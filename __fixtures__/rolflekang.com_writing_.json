{
  "data": "<!DOCTYPE html><html lang=\"en\"><head><script src=\"/cdn-cgi/apps/head/UfjZ8HAT0I7Fsvqp0rf-S7u-dA8.js\"></script><link href=\"https://fonts.googleapis.com/css?family=Merriweather:300,400,700\" rel=\"stylesheet\"/><link rel=\"alternate\" type=\"application/rss+xml\" title=\"Writing by Rolf Erik Lekang\" href=\"feed.xml\"/><link rel=\"alternate\" type=\"application/feed+json\" title=\"Writing by Rolf Erik Lekang\" href=\"feed.json\"/><meta name=\"viewport\" content=\"width=device-width\"/><meta charSet=\"utf-8\"/><title>Rolf Erik Lekang - Writing</title><meta content=\"Rolf Erik Lekang - Writing\" property=\"og:title\"/><meta content=\"Rolf Erik Lekang - Writing\" name=\"twitter:title\"/><meta content=\"@relekang\" name=\"twitter:author\"/><meta content=\"summary\" name=\"twitter:card\"/><meta name=\"next-head-count\" content=\"7\"/><link rel=\"preload\" href=\"/_next/static/css/d771bc1f6de9098f2a56.css\" as=\"style\"/><link rel=\"stylesheet\" href=\"/_next/static/css/d771bc1f6de9098f2a56.css\" data-n-g=\"\"/><link rel=\"preload\" href=\"/_next/static/css/30f808af86d4af1d606e.css\" as=\"style\"/><link rel=\"stylesheet\" href=\"/_next/static/css/30f808af86d4af1d606e.css\" data-n-p=\"\"/><noscript data-n-css=\"\"></noscript><link rel=\"preload\" href=\"/_next/static/chunks/main-7d802164a7b8639038cc.js\" as=\"script\"/><link rel=\"preload\" href=\"/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js\" as=\"script\"/><link rel=\"preload\" href=\"/_next/static/chunks/framework.abffcf18e526b7c0dbcd.js\" as=\"script\"/><link rel=\"preload\" href=\"/_next/static/chunks/8415929568fe72b6a34b53df40b441bf1d16c618.f4a246c9c1efb0a580ac.js\" as=\"script\"/><link rel=\"preload\" href=\"/_next/static/chunks/98a995b697fdf6ac7718c65f99d5111879ab1e63.083a266542cc50e12bc5.js\" as=\"script\"/><link rel=\"preload\" href=\"/_next/static/chunks/059db41020c5a0b2f8e44e07e9a188d04fefe6bb.2f9308fbeaf5eadb94bb.js\" as=\"script\"/><link rel=\"preload\" href=\"/_next/static/chunks/pages/_app-d9022d161dcdc53f7fc0.js\" as=\"script\"/><link rel=\"preload\" href=\"/_next/static/chunks/d2fd18a0c135e6d07091be301f7526a200065b3b.c6cb363515a690cb8a1f.js\" as=\"script\"/><link rel=\"preload\" href=\"/_next/static/chunks/pages/writing-dd4eb9934d4fcc628fdd.js\" as=\"script\"/></head><body><div id=\"__next\"><div class=\"   Layout_Layout__SbGXq light\"><header class=\"Layout_Header__UiVoQ\"><div class=\"Layout_Wrapper__1m2JS\"><a class=\"Layout_Name__1Xoz7\" href=\"/\">Rolf Erik Lekang</a><nav class=\"   Layout_Navigation__31nKV no-print\"><a href=\"/writing\">Writing</a><a href=\"/photography\">Photography</a></nav></div></header><div class=\"  Layout_Wrapper__1m2JS\"><main><ul class=\"PostList_PostList__1xxKf\"><li class=\"PostList_PostListItem__3SU27\"><a href=\"using-certbot-with-ansible\">Using certbot with Ansible</a><em>08.11.2020</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"ansible-handlers-in-loops\">Using Ansible handlers in loops</a><em>12.09.2020</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"serving-plain-text-with-nextjs\">Serving text/plain for curl with Next</a><em>26.05.2020</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"wireless-uplinks-with-unifi\">Wireless uplinks with Unifi</a><em>03.05.2020</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"using-git-commits-instead-of-stash\">Using git commits instead of git stash</a><em>14.11.2019</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"twitter-cards-for-gatsby-posts\">Twitter cards for Gatsby posts</a><em>26.02.2019</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"related-articles-with-gatsby\">Related articles with Gatsby</a><em>20.02.2019</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"creating-a-cli-with-reason-native\">Creating a CLI with Reason native</a><em>12.02.2019</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"testing-simple-graphql-services\">Testing simple GraphQL services</a><em>28.05.2017</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"lets-run-some-races\">Let&#x27;s run some races this year</a><em>02.01.2017</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"software-development-on-an-ipad\">Software development on an iPad</a><em>01.01.2017</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"filtering-lint-errors\">Filtering lint errors</a><em>10.06.2016</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"interrail-summer\">Interrail summer</a><em>26.07.2015</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"writing-latex-in-atom\">Writing (latex) in Atom</a><em>23.05.2015</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"rmoq\">rmoq - a request mock cache</a><em>30.12.2014</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"django-nopassword-one-point-o\">django-nopassword reached 1.0</a><em>03.10.2014</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"moving-to-pelican\">Moving the blog to pelican</a><em>07.05.2014</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"building-tumblr-theme-with-grunt\">Building a Tumblr theme with GruntJS</a><em>02.02.2014</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"backup-routines-for-redisdb\">Backup routine for Redis</a><em>24.10.2013</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"django-app-custom-user\">Making your Django app ready for custom users</a><em>22.05.2013</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"stats-are-fun\">Stats are fun</a><em>03.03.2013</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"alfred-scripts-for-jekyll\">Alfred scripts for Jekyll</a><em>26.02.2013</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"use-array-in-postgresql\">Use array in postgresql with django</a><em>27.01.2013</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"apply-puppet-configuration-automatically\">Apply puppet automatically</a><em>03.01.2013</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"readable-wikipedia\">Readable Wikipedia</a><em>02.12.2012</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"django-nopassword\">django-nopassword</a><em>28.09.2012</em></li><li class=\"PostList_PostListItem__3SU27\"><a href=\"the-github-lamp\">The Github lamp</a><em>16.09.2012</em></li></ul></main></div></div></div><script id=\"__NEXT_DATA__\" type=\"application/json\">{\"props\":{\"pageProps\":{\"posts\":[{\"slug\":\"using-certbot-with-ansible\",\"layout\":\"post\",\"title\":\"Using certbot with Ansible\",\"date\":\"2020-11-08T00:00:00.000Z\",\"category\":\"homelab\",\"tags\":[\"letsencrypt\",\"acme\",\"certbot\",\"ansible\"],\"relatedPosts\":[{\"slug\":\"ansible-handlers-in-loops\",\"layout\":\"post\",\"title\":\"Using Ansible handlers in loops\",\"date\":\"2020-09-12T00:00:00.000Z\",\"category\":\"ansible\",\"tags\":[\"ansible\",\"devops\",\"ops\",\"infrastructure-as-code\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"Recently I have been dusting of my old ansible playbooks that I use to deploy personal\\\\nstuff. Everything from side projects like \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://feedhuddler.com\\\"\\n  }, \\\"feedhuddler.com\\\"), \\\" to the unifi controller for\\\\nmy home network. In that setup I have a projects role that takes a list of projects and\\\\ndeploy them either running directly on the host with systemd services or docker containers.\\\\nThe systemd setup was using a task to restart the service after changing them. I wanted to\\\\nchange this to be done with a handler instead. However, handlers does not accept arguments.\\\\nThe posts describes a workaround for that problem, enabling dynamic use of handlers.\\\"), mdx(\\\"p\\\", null, \\\"First let us look at what a handler is and how it differs from a task. The handlers are\\\\nactions that can be triggered by other tasks. On a task you can define which handlers they\\\\nshould trigger. Very useful for things like \\\\\\\"Configuration file was updated so we want to restart\\\\nan application\\\\\\\". A nice feature is that these handlers are triggered at the end of the playbook,\\\\nand they only run once. Thus, if you have 5 tasks that triggers the same handler it will only\\\\nrun once at the end.\\\"), mdx(\\\"p\\\", null, \\\"The problem at hand is that handlers does not accept any arguments. Thus, when a task have a loop\\\\ngoing through a list of projects it is not straight forward how to be able to keep one handler for\\\\nall these services. Below is an example setup, we will be looking at single file playbooks to make\\\\nit easier to follow the changes that would usually be across different files in roles.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-yml\\\"\\n  }, \\\"---\\\\n- hosts: all\\\\n  vars:\\\\n    projects:\\\\n      - name: super-project\\\\n        port: 4000\\\\n      - name: not-so-super-project\\\\n        port: 5000\\\\n  tasks:\\\\n    - name: 'Create systemd config for {{ item.name }}'\\\\n      loop: '{{ projects }}'\\\\n      template:\\\\n        src: web.service.jinja2\\\\n        dest: /etc/systemd/system/{{ item.name }}.service\\\\n        owner: root\\\\n        group: root\\\\n      notify:\\\\n        - reload systemd\\\\n        - 'restart {{ item.name }}'\\\\n\\\\n  handlers:\\\\n    - name: reload systemd\\\\n      systemd:\\\\n        daemon_reload: yes\\\\n    - name: restart super-project\\\\n      service:\\\\n        name: '{{ item }}'\\\\n        state: restarted\\\\n    - name: restart not-so-super-project\\\\n      service:\\\\n        name: '{{ item }}'\\\\n        state: restarted\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This works, but when adding a new project it is necessary to add a new handler. This is not the end of\\\\nthe world. However, I do not touch this code very often and when I do it is usually because I need to\\\\nchange the configuration for a service or add a new service. Thus, it would be nice to be able to that without\\\\nediting the role every time.\\\"), mdx(\\\"p\\\", null, \\\"There is another feature in ansible we can use to work around the fact that handlers does not support\\\\narguments. Each task has the ability to store the result in a variable, and if the task has a loop that\\\\nvariable will be a list of these results. This is done by adding \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"register: variable_name\\\"), \\\" to the task.\\\\nEven though handlers does not work with arguments, it has access to the global variable scope. This means\\\\nwe can make a handler looping over the result and restart the services. See the highlighted changes below.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-yml\\\"\\n  }, \\\"---\\\\n- hosts: all\\\\n  vars:\\\\n    projects:\\\\n      - name: super-project\\\\n        port: 4000\\\\n      - name: not-so-super-project\\\\n        port: 5000\\\\n  tasks:\\\\n    - name: Create systemd config for projects\\\\n      loop: '{{ projects }}'\\\\n      template:\\\\n        src: web.service.jinja2\\\\n        dest: /etc/systemd/system/{{ item.name }}.service\\\\n        owner: root\\\\n        group: root\\\\n      # highlight-next-line\\\\n      register: systemd_projects\\\\n      notify:\\\\n        - reload systemd\\\\n        # highlight-next-line\\\\n        - restart systemd projects\\\\n\\\\n  handlers:\\\\n    - name: reload systemd\\\\n      systemd:\\\\n        daemon_reload: yes\\\\n    # highlight-start\\\\n    - name: restart systemd projects\\\\n      loop: \\\\\\\"{{ systemd_projects.results | selectattr('changed', 'equalto', true) | map(attribute='item') | map(attribute='name') | list }}\\\\\\\"\\\\n      service:\\\\n        name: '{{ item }}'\\\\n        state: restarted\\\\n    # highlight-end\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The playbook now have one handler for restarting the projects: \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"restart systemd projects\\\"), \\\". Let's have a closer look\\\\nat the loop for that handler. \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"systemd_projects.results\\\"), \\\" is the result list from the task above creating the\\\\nsystemd service files. \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"selectattr('changed', 'equalto', true)\\\"), \\\" is a filter that will select only the items\\\\nin the list that has a property changed set to true. The two next filters \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"map(attribute='item') | map(attribute='name')\\\"), \\\"\\\\nmaps the items to certain attributes. The last filter \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"list\\\"), \\\" converts a generator into a list.\\\"), mdx(\\\"p\\\", null, \\\"This means that this list\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-json\\\"\\n  }, \\\"[\\\\n  {\\\\n    \\\\\\\"changed\\\\\\\": true,\\\\n    \\\\\\\"item\\\\\\\": { \\\\\\\"name\\\\\\\": \\\\\\\"super-project\\\\\\\", \\\\\\\"port\\\\\\\": 4000 }\\\\n  },\\\\n  {\\\\n    \\\\\\\"changed\\\\\\\": false,\\\\n    \\\\\\\"item\\\\\\\": { \\\\\\\"name\\\\\\\": \\\\\\\"not-so-super-project\\\\\\\", \\\\\\\"port\\\\\\\": 5000 }\\\\n  }\\\\n]\\\\n\\\")), mdx(\\\"p\\\", null, \\\"would turn into\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-json\\\"\\n  }, \\\"[\\\\\\\"super-project\\\\\\\"]\\\\n\\\")), mdx(\\\"p\\\", null, \\\"which in turn would result in the handler running\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-yml\\\"\\n  }, \\\"service:\\\\n  name: super-project\\\\n  state: restarted\\\\n\\\")), mdx(\\\"p\\\", null, \\\"In other words, we have a dynamic handler that can restart services based on changes so that we can\\\\nfocus on only the configuration whenever there is a new side-project to deploy.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eRecently I have been dusting of my old ansible playbooks that I use to deploy personal\\nstuff. Everything from side projects like \\u003ca href=\\\"https://feedhuddler.com\\\"\\u003efeedhuddler.com\\u003c/a\\u003e to the unifi controller for\\nmy home network. In that setup I have a projects role that takes a list of projects and\\ndeploy them either running directly on the host with systemd services or docker containers.\\nThe systemd setup was using a task to restart the service after changing them. I wanted to\\nchange this to be done with a handler instead. However, handlers does not accept arguments.\\nThe posts describes a workaround for that problem, enabling dynamic use of handlers.\\u003c/p\\u003e\\u003cp\\u003eFirst let us look at what a handler is and how it differs from a task. The handlers are\\nactions that can be triggered by other tasks. On a task you can define which handlers they\\nshould trigger. Very useful for things like \\u0026quot;Configuration file was updated so we want to restart\\nan application\\u0026quot;. A nice feature is that these handlers are triggered at the end of the playbook,\\nand they only run once. Thus, if you have 5 tasks that triggers the same handler it will only\\nrun once at the end.\\u003c/p\\u003e\\u003cp\\u003eThe problem at hand is that handlers does not accept any arguments. Thus, when a task have a loop\\ngoing through a list of projects it is not straight forward how to be able to keep one handler for\\nall these services. Below is an example setup, we will be looking at single file playbooks to make\\nit easier to follow the changes that would usually be across different files in roles.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"yml\\\"\\u003e\\u003cpre class=\\\"prism-code language-yml\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e---\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ehosts\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e all\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003evars\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eprojects\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e super\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eproject\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e4000\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e not\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eso\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003esuper\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eproject\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e5000\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003etasks\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;Create systemd config for {{ item.name }}\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eloop\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;{{ projects }}\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003etemplate\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003esrc\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e web.service.jinja2\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003edest\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e /etc/systemd/system/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e item.name \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e.service\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eowner\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e root\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003egroup\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e root\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003enotify\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e reload systemd\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;restart {{ item.name }}\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ehandlers\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e reload systemd\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003esystemd\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003edaemon_reload\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e yes\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e restart super\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eproject\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eservice\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;{{ item }}\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003estate\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e restarted\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e restart not\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eso\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003esuper\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eproject\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eservice\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;{{ item }}\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003estate\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e restarted\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis works, but when adding a new project it is necessary to add a new handler. This is not the end of\\nthe world. However, I do not touch this code very often and when I do it is usually because I need to\\nchange the configuration for a service or add a new service. Thus, it would be nice to be able to that without\\nediting the role every time.\\u003c/p\\u003e\\u003cp\\u003eThere is another feature in ansible we can use to work around the fact that handlers does not support\\narguments. Each task has the ability to store the result in a variable, and if the task has a loop that\\nvariable will be a list of these results. This is done by adding \\u003ccode\\u003eregister: variable_name\\u003c/code\\u003e to the task.\\nEven though handlers does not work with arguments, it has access to the global variable scope. This means\\nwe can make a handler looping over the result and restart the services. See the highlighted changes below.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"yml\\\"\\u003e\\u003cpre class=\\\"prism-code language-yml\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e---\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ehosts\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e all\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003evars\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eprojects\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e super\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eproject\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e4000\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e not\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eso\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003esuper\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eproject\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e5000\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003etasks\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e Create systemd config for projects\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eloop\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;{{ projects }}\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003etemplate\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003esrc\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e web.service.jinja2\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003edest\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e /etc/systemd/system/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e item.name \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e.service\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eowner\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e root\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003egroup\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e root\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eregister\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e systemd_projects\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003enotify\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e reload systemd\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e restart systemd projects\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ehandlers\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e reload systemd\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003esystemd\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003edaemon_reload\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e yes\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e restart systemd projects\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eloop\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;{{ systemd_projects.results | selectattr(\\u0026#x27;changed\\u0026#x27;, \\u0026#x27;equalto\\u0026#x27;, true) | map(attribute=\\u0026#x27;item\\u0026#x27;) | map(attribute=\\u0026#x27;name\\u0026#x27;) | list }}\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eservice\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;{{ item }}\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003estate\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e restarted\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe playbook now have one handler for restarting the projects: \\u003ccode\\u003erestart systemd projects\\u003c/code\\u003e. Let\\u0026#x27;s have a closer look\\nat the loop for that handler. \\u003ccode\\u003esystemd_projects.results\\u003c/code\\u003e is the result list from the task above creating the\\nsystemd service files. \\u003ccode\\u003eselectattr(\\u0026#x27;changed\\u0026#x27;, \\u0026#x27;equalto\\u0026#x27;, true)\\u003c/code\\u003e is a filter that will select only the items\\nin the list that has a property changed set to true. The two next filters \\u003ccode\\u003emap(attribute=\\u0026#x27;item\\u0026#x27;) | map(attribute=\\u0026#x27;name\\u0026#x27;)\\u003c/code\\u003e\\nmaps the items to certain attributes. The last filter \\u003ccode\\u003elist\\u003c/code\\u003e converts a generator into a list.\\u003c/p\\u003e\\u003cp\\u003eThis means that this list\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"json\\\"\\u003e\\u003cpre class=\\\"prism-code language-json\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token property\\\"\\u003e\\u0026quot;changed\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token boolean\\\"\\u003etrue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token property\\\"\\u003e\\u0026quot;item\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token property\\\"\\u003e\\u0026quot;name\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;super-project\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token property\\\"\\u003e\\u0026quot;port\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e4000\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token property\\\"\\u003e\\u0026quot;changed\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token boolean\\\"\\u003efalse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token property\\\"\\u003e\\u0026quot;item\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token property\\\"\\u003e\\u0026quot;name\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;not-so-super-project\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token property\\\"\\u003e\\u0026quot;port\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e5000\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003ewould turn into\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"json\\\"\\u003e\\u003cpre class=\\\"prism-code language-json\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;super-project\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003ewhich in turn would result in the handler running\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"yml\\\"\\u003e\\u003cpre class=\\\"prism-code language-yml\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eservice\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e super\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eproject\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003estate\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e restarted\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eIn other words, we have a dynamic handler that can restart services based on changes so that we can\\nfocus on only the configuration whenever there is a new side-project to deploy.\\u003c/p\\u003e\",\"scope\":{}},\"count\":1}]},{\"slug\":\"ansible-handlers-in-loops\",\"layout\":\"post\",\"title\":\"Using Ansible handlers in loops\",\"date\":\"2020-09-12T00:00:00.000Z\",\"category\":\"ansible\",\"tags\":[\"ansible\",\"devops\",\"ops\",\"infrastructure-as-code\"],\"relatedPosts\":[{\"slug\":\"using-certbot-with-ansible\",\"layout\":\"post\",\"title\":\"Using certbot with Ansible\",\"date\":\"2020-11-08T00:00:00.000Z\",\"category\":\"homelab\",\"tags\":[\"letsencrypt\",\"acme\",\"certbot\",\"ansible\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"I have been using acme-tiny and a custom shell script for renewal of\\\\nmy ssl certificates for a couple of years now. Over the years I have\\\\nbeen adding more and more sites which has made the instability of this\\\\nsetup more and more apparent. This eventually got me to look into alternatives.\\\\nAccording to \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://letsencrypt.org/getting-started/\\\"\\n  }, \\\"Let's Encrypts getting started guide\\\"), \\\"\\\\nit is recommended to use \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://certbot.eff.org/\\\"\\n  }, \\\"certbot\\\"), \\\".\\\"), mdx(\\\"p\\\", null, \\\"Certbot is pretty veratile tool in the way that it support multiple webservers\\\\nand multiple verification options in various degrees of automation. I do want some\\\\nlevel of control since I am running with nginx configs generated with Ansible. The\\\\nissue here is that if certbot is allowed to do everything it would alter the nginx\\\\nconfig of the different sites. This would in turn make the next deployment with\\\\nAnsible overwrite certbots changes. Thus, I choose to use the certonly option in\\\\ncertbot.\\\"), mdx(\\\"p\\\", null, \\\"Let's get started with the installation and main setup before diving into how to\\\\nuse it for a given site. The following Ansible tasks first installs certbot with\\\\npip. It is possible to use apt or other linux package managers, however, I found\\\\nthis to be working more nicely on arm based hardware like Raspberry Pis. The\\\\nregister task is to accept the terms of use of letsencrypt. It will also create\\\\nthe account private key used in the verification step. Furthermore, I add a file\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"/etc/letsencrypt/.registered\\\"), \\\" this is just to make sure ansible does not run this\\\\ncommand every time. Finally, the cronjob for renewal is set up.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-yaml\\\"\\n  }, \\\"- name: Install certbot\\\\n  pip:\\\\n    name:\\\\n      - certbot\\\\n      - certbot-nginx\\\\n    executable: pip3\\\\n  tags:\\\\n    - nginx\\\\n    - certbot\\\\n\\\\n- name: Register certbot\\\\n  shell: |\\\\n    certbot -n register --agree-tos --email me@domain.example\\\\n    touch /etc/letsencrypt/.registered\\\\n  args:\\\\n    creates: /etc/letsencrypt/.registered\\\\n  tags:\\\\n    - nginx\\\\n    - certbot\\\\n\\\\n- name: Setup cronjob for renewal\\\\n  cron:\\\\n    name: certbot-renewal\\\\n    job: \\\\\\\"/bin/bash -lc '/usr/local/bin/certbot -q renew'\\\\\\\"\\\\n    minute: \\\\\\\"0\\\\\\\"\\\\n    hour: \\\\\\\"14\\\\\\\"\\\\n  tags:\\\\n    - nginx\\\\n    - certbot\\\\n\\\")), mdx(\\\"p\\\", null, \\\"With this in place we can dive into how to get certificates for a given domain.\\\\nThe Ansible task below runs the command for getting a certificate verified with\\\\ncallback nginx, but without changing anything permanently. This means that the\\\\nnginx config needs to be updated to use the certificates. The result of the\\\\ncommand is certificates and keys stored inside the directory\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"/etc/letsencrypt/live/{{ hostname }}\\\"), \\\".\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-yaml\\\"\\n  }, \\\"- name: 'Get certificate'\\\\n  command: '/usr/local/bin/certbot -n --nginx certonly -d {{ hostname }}'\\\\n  args:\\\\n    creates: '/etc/letsencrypt/live/{{ hostname }}'\\\\n  ignore_errors: true\\\\n  tags:\\\\n    - nginx\\\\n    - certbot\\\\n\\\")), mdx(\\\"p\\\", null, \\\"After this we can add the certificates to the nginx config. This part would be\\\\nautomatic if the task above did not include \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"certonly\\\"), \\\".\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\"\\n  }, \\\"ssl_certificate_key /etc/letsencrypt/live/{{\\\\xA0hostname }}/privkey.pem;\\\\nssl_certificate     /etc/letsencrypt/live/{{\\\\xA0hostname }}/fullchain.pem;\\\\n\\\")), mdx(\\\"p\\\", null, \\\"That is all that is needed to have an automated certificate setup with auto-renewal.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eI have been using acme-tiny and a custom shell script for renewal of\\nmy ssl certificates for a couple of years now. Over the years I have\\nbeen adding more and more sites which has made the instability of this\\nsetup more and more apparent. This eventually got me to look into alternatives.\\nAccording to \\u003ca href=\\\"https://letsencrypt.org/getting-started/\\\"\\u003eLet\\u0026#x27;s Encrypts getting started guide\\u003c/a\\u003e\\nit is recommended to use \\u003ca href=\\\"https://certbot.eff.org/\\\"\\u003ecertbot\\u003c/a\\u003e.\\u003c/p\\u003e\\u003cp\\u003eCertbot is pretty veratile tool in the way that it support multiple webservers\\nand multiple verification options in various degrees of automation. I do want some\\nlevel of control since I am running with nginx configs generated with Ansible. The\\nissue here is that if certbot is allowed to do everything it would alter the nginx\\nconfig of the different sites. This would in turn make the next deployment with\\nAnsible overwrite certbots changes. Thus, I choose to use the certonly option in\\ncertbot.\\u003c/p\\u003e\\u003cp\\u003eLet\\u0026#x27;s get started with the installation and main setup before diving into how to\\nuse it for a given site. The following Ansible tasks first installs certbot with\\npip. It is possible to use apt or other linux package managers, however, I found\\nthis to be working more nicely on arm based hardware like Raspberry Pis. The\\nregister task is to accept the terms of use of letsencrypt. It will also create\\nthe account private key used in the verification step. Furthermore, I add a file\\n\\u003ccode\\u003e/etc/letsencrypt/.registered\\u003c/code\\u003e this is just to make sure ansible does not run this\\ncommand every time. Finally, the cronjob for renewal is set up.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"yaml\\\"\\u003e\\u003cpre class=\\\"prism-code language-yaml\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e Install certbot\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003epip\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e certbot\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e certbot\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003enginx\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eexecutable\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e pip3\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e nginx\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e certbot\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e Register certbot\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eshell\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e|\\u003c/span\\u003e\\u003cspan class=\\\"token scalar string\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token scalar string\\\"\\u003e    certbot -n register --agree-tos --email me@domain.example\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token scalar string\\\"\\u003e    touch /etc/letsencrypt/.registered\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eargs\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ecreates\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e /etc/letsencrypt/.registered\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e nginx\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e certbot\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e Setup cronjob for renewal\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ecron\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e certbot\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003erenewal\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ejob\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;/bin/bash -lc \\u0026#x27;/usr/local/bin/certbot -q renew\\u0026#x27;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eminute\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;0\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ehour\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;14\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e nginx\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e certbot\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eWith this in place we can dive into how to get certificates for a given domain.\\nThe Ansible task below runs the command for getting a certificate verified with\\ncallback nginx, but without changing anything permanently. This means that the\\nnginx config needs to be updated to use the certificates. The result of the\\ncommand is certificates and keys stored inside the directory\\n\\u003ccode\\u003e/etc/letsencrypt/live/{{ hostname }}\\u003c/code\\u003e.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"yaml\\\"\\u003e\\u003cpre class=\\\"prism-code language-yaml\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;Get certificate\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ecommand\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;/usr/local/bin/certbot -n --nginx certonly -d {{ hostname }}\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eargs\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ecreates\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;/etc/letsencrypt/live/{{ hostname }}\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eignore_errors\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token boolean important\\\"\\u003etrue\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e nginx\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e certbot\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eAfter this we can add the certificates to the nginx config. This part would be\\nautomatic if the task above did not include \\u003ccode\\u003ecertonly\\u003c/code\\u003e.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\"\\u003e\\u003cpre class=\\\"prism-code language-undefined\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003essl_certificate_key /etc/letsencrypt/live/{{hostname }}/privkey.pem;\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003essl_certificate     /etc/letsencrypt/live/{{hostname }}/fullchain.pem;\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThat is all that is needed to have an automated certificate setup with auto-renewal.\\u003c/p\\u003e\",\"scope\":{}},\"count\":1}]},{\"slug\":\"serving-plain-text-with-nextjs\",\"layout\":\"post\",\"title\":\"Serving text/plain for curl with Next\",\"date\":\"2020-05-26T00:00:00.000Z\",\"category\":\"nextjs\",\"tags\":[\"nextjs\",\"javascript\",\"curl\",\"nodejs\"],\"relatedPosts\":[{\"slug\":\"testing-simple-graphql-services\",\"layout\":\"post\",\"date\":\"2017-05-28T00:00:00.000Z\",\"title\":\"Testing simple GraphQL services\",\"tags\":[\"graphql\",\"testing\",\"javascript\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"I recently created a \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/relekang/micro-rss-parser\\\"\\n  }, \\\"GraphQL based microservice\\\"), \\\" for parsing RSS-feeds. I wanted\\\\nto write something down about the approach I took to test the API. The service is read only, as\\\\nthere is little we can push out into others RSS feeds.\\\"), mdx(\\\"p\\\", null, \\\"GraphQL returns 200 status for almost everything. Whenever error occurs it only pushes the error\\\\nto a list of errors that is passed to the payload. This is because it is designed to be resillient\\\\nand give as much information as it can even when something fails. This also means that we can\\\\nabstract away the most part of successful and unsuccessful requests in our tests and still get\\\\nvalid tests. Thus, when testing the API layer of this service the only thing that matters is the\\\\nquery and the response.\\\"), mdx(\\\"p\\\", null, \\\"Services like micro-rss-parser has another characteristic that makes them easy to test. No\\\\nauthentication or authorization, which means that we do not need to check different types of errors\\\\nbased on different states of authorization. Thus, it is only the GraphQL query and the response\\\\nthat matters.\\\"), mdx(\\\"p\\\", null, \\\"I created a helper that allowed me to write tests in an easy way with focus on the queries. The\\\\ntests look like this:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"testGraphQlService`{\\\\n  feed(url=\\\\\\\"https://rolflekang.com/feed.xml\\\\\\\") {\\\\n    entries {\\\\n      title\\\\n    }\\\\n  }\\\\n}\\\\n `\\\\n\\\")), mdx(\\\"p\\\", null, \\\"Under the hood that helper creates a \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://facebook.github.io/jest/\\\"\\n  }, \\\"jest\\\"), \\\" test that asserts to a snapshot with jests handy\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://facebook.github.io/jest/docs/expect.html#tomatchsnapshotoptionalstring\\\"\\n  }, \\\"toMatchSnapshot()\\\"), \\\". This generates a snapshot file for every test file with a map of responses\\\\nwith the query as key. Thus, reviewing these tests and test changes is a bliss. Below is the\\\\nimplementation of the test helper as it was in micro-rss-parser at the time when this was written.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"const request = require('superagent')\\\\n\\\\nfunction createTestServer() {\\\\n  /*\\\\n   * Set up a test instance and return url.\\\\n   * For micro-rss-parser I used this https://github.com/zeit/micro#testing\\\\n   */\\\\n}\\\\n\\\\nfunction testGraphqlApi (strings, ...args) {\\\\n  const query = String.raw(strings, ...args)\\\\n  test(query, async () =\\u003e {\\\\n    let response\\\\n    const url = await createTestServer()\\\\n\\\\n    try {\\\\n      response = (await request\\\\n        .post(url)\\\\n        .set('User-Agent', 'graphql-test')\\\\n        .set('Content-Type', 'application/json')\\\\n        .send(JSON.stringify({ query }))\\\\n      ).body\\\\n    } catch (error) {\\\\n      if (!error.response) {\\\\n        throw error\\\\n      }\\\\n\\\\n      response = error.response.body\\\\n    }\\\\n\\\\n    expect(response).toMatchSnapshot()\\\\n  })\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"It has made it easy to write good and readable API tests of the little microservice. However,\\\\nkeep in mind that this is a sufficient solution due to the assumptions discussed earlier so it\\\\nmight not be a fit approach for you project, nevertheless, feel free to take the helper. Let me\\\\nknow how it works out for you \\\\u270C\\\\uFE0F\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eI recently created a \\u003ca href=\\\"https://github.com/relekang/micro-rss-parser\\\"\\u003eGraphQL based microservice\\u003c/a\\u003e for parsing RSS-feeds. I wanted\\nto write something down about the approach I took to test the API. The service is read only, as\\nthere is little we can push out into others RSS feeds.\\u003c/p\\u003e\\u003cp\\u003eGraphQL returns 200 status for almost everything. Whenever error occurs it only pushes the error\\nto a list of errors that is passed to the payload. This is because it is designed to be resillient\\nand give as much information as it can even when something fails. This also means that we can\\nabstract away the most part of successful and unsuccessful requests in our tests and still get\\nvalid tests. Thus, when testing the API layer of this service the only thing that matters is the\\nquery and the response.\\u003c/p\\u003e\\u003cp\\u003eServices like micro-rss-parser has another characteristic that makes them easy to test. No\\nauthentication or authorization, which means that we do not need to check different types of errors\\nbased on different states of authorization. Thus, it is only the GraphQL query and the response\\nthat matters.\\u003c/p\\u003e\\u003cp\\u003eI created a helper that allowed me to write tests in an easy way with focus on the queries. The\\ntests look like this:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etestGraphQlService\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e{\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e  feed(url=\\u0026quot;https://rolflekang.com/feed.xml\\u0026quot;) {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e    entries {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      title\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e    }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e  }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e}\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eUnder the hood that helper creates a \\u003ca href=\\\"https://facebook.github.io/jest/\\\"\\u003ejest\\u003c/a\\u003e test that asserts to a snapshot with jests handy\\n\\u003ca href=\\\"http://facebook.github.io/jest/docs/expect.html#tomatchsnapshotoptionalstring\\\"\\u003etoMatchSnapshot()\\u003c/a\\u003e. This generates a snapshot file for every test file with a map of responses\\nwith the query as key. Thus, reviewing these tests and test changes is a bliss. Below is the\\nimplementation of the test helper as it was in micro-rss-parser at the time when this was written.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e request \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;superagent\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateTestServer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e/*\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e   * Set up a test instance and return url.\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e   * For micro-rss-parser I used this https://github.com/zeit/micro#testing\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e   */\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003etestGraphqlApi\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003estrings\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eargs\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e query \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token known-class-name class-name\\\"\\u003eString\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eraw\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003estrings\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eargs\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003etest\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003equery\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003easync\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003elet\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e url \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eawait\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateTestServer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003etry\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eawait\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e request\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003epost\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eurl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eset\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;User-Agent\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;graphql-test\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eset\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;Content-Type\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;application/json\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esend\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token known-class-name class-name\\\"\\u003eJSON\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003estringify\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e query \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ebody\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ecatch\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eerror\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eerror\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eresponse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ethrow\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e error\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e error\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eresponse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ebody\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eexpect\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eresponse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003etoMatchSnapshot\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eIt has made it easy to write good and readable API tests of the little microservice. However,\\nkeep in mind that this is a sufficient solution due to the assumptions discussed earlier so it\\nmight not be a fit approach for you project, nevertheless, feel free to take the helper. Let me\\nknow how it works out for you \\u003c/p\\u003e\",\"scope\":{}},\"count\":1},{\"slug\":\"related-articles-with-gatsby\",\"layout\":\"post\",\"title\":\"Related articles with Gatsby\",\"date\":\"2019-02-20T00:00:00.000Z\",\"category\":\"Gatsby\",\"tags\":[\"gatsby\",\"javascript\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"This website is created with \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/\\\"\\n  }, \\\"Gatsby\\\"), \\\", Reasonml and a little bit of typescript.\\\\nIn this post I will explain how I built the \\\\\\\"Related articles\\\\\\\" feature that can be\\\\nseen on the bottom of some of the articles. I have kept all the examples in this\\\\npost in javascript so it will be helpful to more people.\\\"), mdx(\\\"p\\\", null, \\\"First of we need to define what makes two posts or articles related. On this site\\\\nand for this article I am defining it as articles that has the same tags. In the\\\\nfrontmatter I have a comma separated list of tags. Below is an example:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-yaml\\\"\\n  }, \\\"title: Related articles with Gatsby\\\\nslug: related-articles-with-gatsby\\\\ntags: gatsby,javascript\\\\ndate: 2019-02-20\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This blog is based on a setup with \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\n  }, \\\"gatsby-transformer-remark\\\"), \\\" which has the\\\\nfollowing in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatsby-node.js\\\"), \\\" to generate the pages. The first part fetches all\\\\nthe articles and the necessary metadata with Graphql. The second part loops over\\\\nall the articles and then creates pages for them with the Gatsby \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createPage\\\"), \\\"\\\\nfunction.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"exports.createPages = async ({ graphql, actions }) =\\u003e {\\\\n  const { createPage } = actions;\\\\n  const templatePath = path.resolve('./src/templates/');\\\\n\\\\n  const response = await graphql(\\\\n    `\\\\n      query {\\\\n        allMarkdownRemark {\\\\n          edges {\\\\n            node {\\\\n              frontmatter {\\\\n                layout\\\\n                slug\\\\n                date(formatString: \\\\\\\"DD.MM.YYYY\\\\\\\")\\\\n              }\\\\n            }\\\\n          }\\\\n        }\\\\n      }\\\\n    `\\\\n  );\\\\n\\\\n  const postEdges = response.data.allMarkdownRemark.edges\\\\n\\\\n  postEdges.forEach(({ node }) =\\u003e {\\\\n    const { slug, layout, tags } = node.frontmatter;\\\\n    createPage({\\\\n      path: `/${slug}`,\\\\n      component: path.join(templatePath, `${layout}.tsx`),\\\\n      context: { slug },\\\\n    });\\\\n  });\\\\n\\\")), mdx(\\\"p\\\", null, \\\"In order to populate the data for related articles we will add the data as\\\\ncontext parameters in the createPage call. However, first we need to find\\\\nthose articles. The code below will build a map of tags and articles with those\\\\ntags.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"const articlesByTags = postEdges.reduce((lastValue, { node }) =\\u003e {\\\\n  const tags = node.frontmatter.tags || \\\\\\\"\\\\\\\";\\\\n  tags.split(/, ?/).forEach(tag =\\u003e {\\\\n    if (lastValue[tag]) {\\\\n      lastValue[tag].push(node.frontmatter);\\\\n    } else {\\\\n      lastValue[tag] = [node.frontmatter];\\\\n    }\\\\n  });\\\\n  return lastValue;\\\\n}, {});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The result will be something like the following, where \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"{...}\\\"), \\\" is the\\\\nfrontmatter of a post. This we can use to look up all the related articles for\\\\none post.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"{\\\\n  gatsby: [{...}, {...}],\\\\n  cli: [{...}, {...}]\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"articlesByTags\\\"), \\\" is useful for looking up all the articles that has a list of tags. Let\\\\nus look at a possible implementation for that.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"const _ = require(\\\\\\\"lodash/fp\\\\\\\");\\\\n\\\\nfunction findRelatedArticles(slug, tags) {\\\\n  return _.flow([\\\\n    _.split(/, ?/),\\\\n    _.map(tag =\\u003e articlesByTags[tag]),\\\\n    _.flatten,\\\\n    _.filter(node =\\u003e node.slug !== slug),\\\\n    _.uniqBy(node =\\u003e node.slug)\\\\n  ])(tags);\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"In this function the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"_\\\"), \\\" is the\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/lodash/lodash/wiki/FP-Guide\\\"\\n  }, \\\"functional programming(fp) version of lodash\\\"), \\\", which has this neat\\\\nutility called flow for grouping actions together. Flow returns a function when\\\\ncalled will perform all the operations in the array. Each operation will have\\\\nto be a function and the return value of each of them will be passed as the\\\\nargument to the next one. The function above will first split the comma\\\\nseparated string to a list and then perform a map on that list of tags to a\\\\nlist of lists of articles. Since we now have a list of lists it is necessary to\\\\nflatten it, which will result in a list of articles. The next step is to filter\\\\nout the current post since we only want other articles than the one that is\\\\ncurrently viewed. In the last step we want to remove any duplicate articles and\\\\ncan do that by selecting unique elements based on the slug.\\\"), mdx(\\\"p\\\", null, \\\"To finish the data setup it is necessary to add the related articles to the\\\\ncontext in the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createPage\\\"), \\\" call.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"createPage({\\\\n  path: `/${slug}`,\\\\n  component: path.join(templatePath, `${layout}.tsx`),\\\\n  context: {\\\\n    slug,\\\\n    // highlight-next-line\\\\n    relatedArticles: findRelatedArticles(slug, tags),\\\\n  },\\\\n});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatsby-node.js\\\"), \\\" file should look something like the following now. In the\\\\ncode below the changes is highlighted.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"exports.createPages = async ({ graphql, actions }) =\\u003e {\\\\n  const { createPage } = actions;\\\\n  const templatePath = path.resolve('./src/templates/');\\\\n\\\\n  const response = await graphql(\\\\n    `\\\\n      query {\\\\n        allMarkdownRemark {\\\\n          edges {\\\\n            node {\\\\n              frontmatter {\\\\n                layout\\\\n                slug\\\\n                date(formatString: \\\\\\\"DD.MM.YYYY\\\\\\\")\\\\n              }\\\\n            }\\\\n          }\\\\n        }\\\\n      }\\\\n    `\\\\n  );\\\\n\\\\n  const postEdges = response.data.allMarkdownRemark.edges;\\\\n\\\\n  // highlight-start\\\\n  const articlesByTags = postEdges.reduce((lastValue, { node }) =\\u003e {\\\\n    const tags = node.frontmatter.tags || '';\\\\n    tags.split(/, ?/).forEach(tag =\\u003e {\\\\n      if (lastValue[tag]) {\\\\n        lastValue[tag].push(node.frontmatter);\\\\n      } else {\\\\n        lastValue[tag] = [node.frontmatter];\\\\n      }\\\\n    });\\\\n    return lastValue;\\\\n  }, {});\\\\n  // highlight-end\\\\n\\\\n  // highlight-start\\\\n  function findRelatedArticles(slug, tags) {\\\\n    return _.flow([\\\\n      _.split(/, ?/),\\\\n      _.map(tag =\\u003e articlesByTags[tag]),\\\\n      _.flatten,\\\\n      _.filter(node =\\u003e node.slug !== slug),\\\\n      _.uniqBy(node =\\u003e node.slug),\\\\n    ])(tags);\\\\n  }\\\\n  // highlight-end\\\\n\\\\n  postEdges.forEach(({ node }) =\\u003e {\\\\n    const { slug, layout, tags } = node.frontmatter;\\\\n    createPage({\\\\n      path: `/${slug}`,\\\\n      component: path.join(templatePath, `${layout}.tsx`),\\\\n      context: {\\\\n        slug,\\\\n        // highlight-next-line\\\\n        relatedArticles: findRelatedArticles(slug, tags),\\\\n      },\\\\n    });\\\\n  });\\\\n\\\")), mdx(\\\"p\\\", null, \\\"At this point all the data needed is in place. However, it still has to\\\\nbe shown to give some value. Let us look at a component to add this to\\\\nthe site.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"export function RelatedArticles(props) {\\\\n  if (!props.articles || props.articles.length === 0) {\\\\n    return \\u003cdiv /\\u003e;\\\\n  }\\\\n  return (\\\\n    \\u003csection id=\\\\\\\"related-articles\\\\\\\"\\u003e\\\\n      \\u003cheader\\u003eRelated articles\\u003c/header\\u003e\\\\n      \\u003cul\\u003e\\\\n        {props.articles.map(article =\\u003e (\\\\n          \\u003cli key={article.slug}\\u003e\\\\n            \\u003cLink to={`/${article.slug}`}\\u003e{article.title}\\u003c/Link\\u003e\\\\n            {' '}\\\\n            \\u003cem\\u003e{article.date}\\u003c/em\\u003e\\\\n          \\u003c/li\\u003e\\\\n        ))}\\\\n      \\u003c/ul\\u003e\\\\n    \\u003c/section\\u003e\\\\n  );\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This component will render an empty div if there are no related articles.\\\\nIn the case of related articles it will render a list with links to the\\\\narticles. Remember that the data available here is defined by the graphql\\\\nquery in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatbsy-node.js\\\"), \\\". In order to glue these parts together and make\\\\nit work the component needs to be added in the template used for the\\\\narticles.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"\\u003cRelatedArticles articles={props.pageContext.relatedArticles} /\\u003e\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The page component will get the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"context\\\"), \\\" attribute from \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createPage\\\"), \\\" as\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"pageContext\\\"), \\\". Thus, the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"relatedArticles\\\"), \\\" attribute we created earlier will\\\\nbe accessible on that object.\\\"), mdx(\\\"p\\\", null, \\\"This is all that is needed to have related articles with a Gatsby site with\\\\nthe transformer-remark plugin. To see have it looks have a look at the bottom\\\\nof the \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"/testing-simple-graphql-services#related-articles\\\"\\n  }, \\\"Testing simple GraphQL services\\\"), \\\"\\\\narticle.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eThis website is created with \\u003ca href=\\\"https://www.gatsbyjs.org/\\\"\\u003eGatsby\\u003c/a\\u003e, Reasonml and a little bit of typescript.\\nIn this post I will explain how I built the \\u0026quot;Related articles\\u0026quot; feature that can be\\nseen on the bottom of some of the articles. I have kept all the examples in this\\npost in javascript so it will be helpful to more people.\\u003c/p\\u003e\\u003cp\\u003eFirst of we need to define what makes two posts or articles related. On this site\\nand for this article I am defining it as articles that has the same tags. In the\\nfrontmatter I have a comma separated list of tags. Below is an example:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"yaml\\\"\\u003e\\u003cpre class=\\\"prism-code language-yaml\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e Related articles with Gatsby\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e related\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003earticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ewith\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003egatsby\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e gatsby\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ejavascript\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003edate\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token datetime number\\\"\\u003e2019-02-20\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis blog is based on a setup with \\u003ca href=\\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\u003egatsby-transformer-remark\\u003c/a\\u003e which has the\\nfollowing in \\u003ccode\\u003egatsby-node.js\\u003c/code\\u003e to generate the pages. The first part fetches all\\nthe articles and the necessary metadata with Graphql. The second part loops over\\nall the articles and then creates pages for them with the Gatsby \\u003ccode\\u003ecreatePage\\u003c/code\\u003e\\nfunction.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eexports\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method-variable function-variable method function property-access\\\"\\u003ecreatePages\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003easync\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e graphql\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e actions \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e createPage \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e actions\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e templatePath \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eresolve\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;./src/templates/\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eawait\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003egraphql\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      query {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e        allMarkdownRemark {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e          edges {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e            node {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e              frontmatter {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                layout\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                slug\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                date(formatString: \\u0026quot;DD.MM.YYYY\\u0026quot;)\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e              }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e            }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e          }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e        }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e postEdges \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eallMarkdownRemark\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eedges\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  postEdges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e layout\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreatePage\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      component\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etemplatePath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003elayout\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e.tsx\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      context\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eIn order to populate the data for related articles we will add the data as\\ncontext parameters in the createPage call. However, first we need to find\\nthose articles. The code below will build a map of tags and articles with those\\ntags.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articlesByTags \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e postEdges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ereduce\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003elastValue\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003e, ?\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003elastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003epush\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe result will be something like the following, where \\u003ccode\\u003e{...}\\u003c/code\\u003e is the\\nfrontmatter of a post. This we can use to look up all the related articles for\\none post.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  gatsby\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  cli\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe \\u003ccode\\u003earticlesByTags\\u003c/code\\u003e is useful for looking up all the articles that has a list of tags. Let\\nus look at a possible implementation for that.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e _ \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;lodash/fp\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003efindRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eflow\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003e, ?\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emap\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articlesByTags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eflatten\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efilter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003euniqBy\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eIn this function the \\u003ccode\\u003e_\\u003c/code\\u003e is the\\n\\u003ca href=\\\"https://github.com/lodash/lodash/wiki/FP-Guide\\\"\\u003efunctional programming(fp) version of lodash\\u003c/a\\u003e, which has this neat\\nutility called flow for grouping actions together. Flow returns a function when\\ncalled will perform all the operations in the array. Each operation will have\\nto be a function and the return value of each of them will be passed as the\\nargument to the next one. The function above will first split the comma\\nseparated string to a list and then perform a map on that list of tags to a\\nlist of lists of articles. Since we now have a list of lists it is necessary to\\nflatten it, which will result in a list of articles. The next step is to filter\\nout the current post since we only want other articles than the one that is\\ncurrently viewed. In the last step we want to remove any duplicate articles and\\ncan do that by selecting unique elements based on the slug.\\u003c/p\\u003e\\u003cp\\u003eTo finish the data setup it is necessary to add the related articles to the\\ncontext in the \\u003ccode\\u003ecreatePage\\u003c/code\\u003e call.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreatePage\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  component\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etemplatePath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003elayout\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e.tsx\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    relatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003efindRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe \\u003ccode\\u003egatsby-node.js\\u003c/code\\u003e file should look something like the following now. In the\\ncode below the changes is highlighted.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eexports\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method-variable function-variable method function property-access\\\"\\u003ecreatePages\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003easync\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e graphql\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e actions \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e createPage \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e actions\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e templatePath \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eresolve\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;./src/templates/\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eawait\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003egraphql\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      query {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e        allMarkdownRemark {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e          edges {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e            node {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e              frontmatter {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                layout\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                slug\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                date(formatString: \\u0026quot;DD.MM.YYYY\\u0026quot;)\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e              }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e            }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e          }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e        }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e postEdges \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eallMarkdownRemark\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eedges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articlesByTags \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e postEdges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ereduce\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003elastValue\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003e, ?\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003elastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003epush\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003efindRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eflow\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003e, ?\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emap\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articlesByTags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eflatten\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efilter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003euniqBy\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  postEdges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e layout\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreatePage\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      component\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etemplatePath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003elayout\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e.tsx\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      context\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        relatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003efindRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eAt this point all the data needed is in place. However, it still has to\\nbe shown to give some value. Let us look at a component to add this to\\nthe site.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword module\\\"\\u003eexport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function maybe-class-name\\\"\\u003eRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eprops\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eprops\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003earticles\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e props\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003earticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003elength\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e===\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ediv \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003esection id\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;related-articles\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eheader\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eRelated\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articles\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eheader\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eul\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eprops\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003earticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emap\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e          \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eli key\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eLink\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e to\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eLink\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27; \\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eem\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edate\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eem\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e          \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eli\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eul\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003esection\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis component will render an empty div if there are no related articles.\\nIn the case of related articles it will render a list with links to the\\narticles. Remember that the data available here is defined by the graphql\\nquery in \\u003ccode\\u003egatbsy-node.js\\u003c/code\\u003e. In order to glue these parts together and make\\nit work the component needs to be added in the template used for the\\narticles.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articles\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eprops\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003epageContext\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003erelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe page component will get the \\u003ccode\\u003econtext\\u003c/code\\u003e attribute from \\u003ccode\\u003ecreatePage\\u003c/code\\u003e as\\n\\u003ccode\\u003epageContext\\u003c/code\\u003e. Thus, the \\u003ccode\\u003erelatedArticles\\u003c/code\\u003e attribute we created earlier will\\nbe accessible on that object.\\u003c/p\\u003e\\u003cp\\u003eThis is all that is needed to have related articles with a Gatsby site with\\nthe transformer-remark plugin. To see have it looks have a look at the bottom\\nof the \\u003ca href=\\\"/testing-simple-graphql-services#related-articles\\\"\\u003eTesting simple GraphQL services\\u003c/a\\u003e\\narticle.\\u003c/p\\u003e\",\"scope\":{}},\"count\":1},{\"slug\":\"twitter-cards-for-gatsby-posts\",\"layout\":\"post\",\"title\":\"Twitter cards for Gatsby posts\",\"date\":\"2019-02-26T00:00:00.000Z\",\"category\":\"Gatsby\",\"tags\":[\"gatsby\",\"canvas\",\"javascript\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"Previously this blog had the default article twitter card. I have seen some\\\\nother sited like \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://dev.to/\\\"\\n  }, \\\"dev.to\\\"), \\\" have these nice title images for the twitter cards.\\\\nI wanted to add these to this site for two reasons: they look kind of nice and\\\\nI would like to look into what it would take to create these. The idea I had\\\\nfor my own cards was for it to resemble the current header with RL and the\\\\npurple line and then the title of the post below it. This first version\\\\nwas written with Node.js and \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/Automattic/node-canvas\\\"\\n  }, \\\"node-canvas\\\"), \\\", maybe in the feature I will try\\\\nto convert it to native reason. Here is a preview of the twitter card for this\\\\npost.\\\"), mdx(\\\"p\\\", null, mdx(\\\"img\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"src\\\": \\\"/twitter-cards-for-gatsby-posts-link-card.png\\\",\\n    \\\"alt\\\": \\\"Twitter card for this post\\\"\\n  })), mdx(\\\"p\\\", null, \\\"Twitter has \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://cards-dev.twitter.com/validator\\\"\\n  }, \\\"a tool to validate\\\"), \\\" the cards for different\\\\npages. It will show how the card will be viewed in a tweet. Below is an\\\\nexample with this post.\\\"), mdx(\\\"p\\\", null, mdx(\\\"img\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"src\\\": \\\"/images/twitter-cards-for-gatsby-posts/card-screenshot.png\\\",\\n    \\\"alt\\\": \\\"Screenshot of a twitter card\\\"\\n  })), mdx(\\\"p\\\", null, \\\"So how to build this? Two things is necessary to get this to work. Creating\\\\nthe image and then add the meta tags to each posts according to the twitter\\\\ndocumentation.\\\"), mdx(\\\"p\\\", null, \\\"Firstly, let us look at the creating of the images themselves. \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/Automattic/node-canvas\\\"\\n  }, \\\"node-canvas\\\"), \\\"\\\\nis a nice tool to do drawing in Node.js that we want to store in a file. It\\\\ncan do many of the things possible to do with browser side canvas. Below is\\\\nthe implementation of the card for this site. What parts each section draws\\\\nis put in comments above them. In the end of the function the\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"canvas.toBuffer('image/png')\\\"), \\\" function is used to create a buffer that we\\\\ncan write to a file, which then is written to the file.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"const { createCanvas } = require('canvas');\\\\nconst fs = require('fs');\\\\n\\\\nfunction createLinkCards({ title, path }) {\\\\n  const canvas = createCanvas(600, 300);\\\\n  const context = canvas.getContext('2d');\\\\n\\\\n  // Create a white background\\\\n  context.fillStyle = 'white';\\\\n  context.fillRect(0, 0, canvas.width, canvas.height);\\\\n\\\\n  // Create the big RL in purple\\\\n  context.font = '100pt serif';\\\\n  context.fillStyle = '#6C3082';\\\\n  const header = context.measureText('RL');\\\\n  context.fillText('RL', (canvas.width - header.width) / 2, 160);\\\\n\\\\n  // Create the purple line across the image\\\\n  context.strokeStyle = '#6C3082';\\\\n  context.beginPath();\\\\n  context.lineTo(0, 180);\\\\n  context.lineTo(canvas.width, 180);\\\\n  context.lineWidth = 6;\\\\n  context.stroke();\\\\n\\\\n  // Insert the title text beneath the purple line\\\\n  setFontSizeForWidth(canvas.width * 0.75)\\\\n  context.fillStyle = 'black';\\\\n  const text = context.measureText(title);\\\\n  context.fillText(title, (canvas.width - text.width) / 2, 250);\\\\n\\\\n  fs.writeFileSync(path, canvas.toBuffer('image/png'));\\\\n};\\\\n\\\")), mdx(\\\"p\\\", null, \\\"There are a few things to take a closer look at. Several places\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"context.measureText\\\"), \\\" is used. It will take use the current font config to\\\\nmeasure how wide the string passed as the first argument will be. This is\\\\nuseful to center the text since we can use it to calculate the placement of\\\\nthe text. Furthermore, it can be used to decide the font size if we do not\\\\nknow the amount of text to render beforehand. In this case, that is done for\\\\nthe title with the function below, which will test any font size from 100pt\\\\nand downwards until the text fits within a certain limit. In the case of the\\\\ncard title it is set to 75 % of the canvas with.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"function setFontSizeForWidth(context, width) {\\\\n  let fontSize = 100;\\\\n  do {\\\\n    fontSize--;\\\\n    context.font = fontSize + 'pt serif';\\\\n  } while (context.measureText(title).width \\u003e width);\\\\n  return fontSize;\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The next thing needed is to call the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createLinkCards\\\"), \\\" in the same place\\\\nwhere \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createPage\\\"), \\\" is called in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatsby-node.js\\\"), \\\". In this example I have used\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\n  }, \\\"gatsby-transformer-remark\\\"), \\\" the code snippet below is looping over the result\\\\nof the graphql query similar to the documentation for\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\n  }, \\\"gatsby-transformer-remark\\\"), \\\".\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"posts.forEach(({ node }) =\\u003e {\\\\n  const { slug, layout, tags, title } = node.frontmatter;\\\\n  createPage({\\\\n    path: `/${slug}`,\\\\n    component: path.join(templatePath, 'blogpost.js'),\\\\n  });\\\\n  createLinkCards({\\\\n    title,\\\\n    path: path.join('public', `${slug}-link-card.png`),\\\\n  });\\\\n});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"After running \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatsby build\\\"), \\\" the public folder will now have a link card file\\\\nfor each post. Open one and check how it looks. Next step will be to link this\\\\nin the blogpost template. These things needs to be linked in meta tags in the\\\\nhead tag. To change metadata with Gatsby it is recommended to use react-helmet.\\\\nThere is a \\\", \\\"[guide on how to change metadata][gatsby-docs-metadata]\\\", \\\" in the Gatsby\\\\ndocumentation. In the component in the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"blogpost.js\\\"), \\\" template add the following\\\\nsnippet of code.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"\\u003cHelmet\\u003e\\\\n  \\u003cmeta name=\\\\\\\"twitter:title\\\\\\\" content={title} /\\u003e\\\\n  \\u003cmeta name=\\\\\\\"twitter:card\\\\\\\" content=\\\\\\\"summary_large_image\\\\\\\" /\\u003e\\\\n  \\u003cmeta name=\\\\\\\"twitter:author\\\\\\\" content=\\\\\\\"@\\u003cyour twitter handle\\u003e\\\\\\\" /\\u003e\\\\n  \\u003cmeta name=\\\\\\\"twitter:image:src\\\\\\\" content={`${window.location.origin}/${slug}-link-card.png`} /\\u003e\\\\n\\u003c/Helmet\\u003e\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This is all that is needed to get these nice cards in tweets with links to your blog.\\\\nIt might be worth looking into more meta tags for getting the same behavior on other\\\\nsites that have similar functionality. Remember that \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://cards-dev.twitter.com/validator\\\"\\n  }, \\\"twitter has a tool to test\\\"), \\\"\\\\nyour new cards.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003ePreviously this blog had the default article twitter card. I have seen some\\nother sited like \\u003ca href=\\\"https://dev.to/\\\"\\u003edev.to\\u003c/a\\u003e have these nice title images for the twitter cards.\\nI wanted to add these to this site for two reasons: they look kind of nice and\\nI would like to look into what it would take to create these. The idea I had\\nfor my own cards was for it to resemble the current header with RL and the\\npurple line and then the title of the post below it. This first version\\nwas written with Node.js and \\u003ca href=\\\"https://github.com/Automattic/node-canvas\\\"\\u003enode-canvas\\u003c/a\\u003e, maybe in the feature I will try\\nto convert it to native reason. Here is a preview of the twitter card for this\\npost.\\u003c/p\\u003e\\u003cp\\u003e\\u003cimg alt=\\\"Twitter card for this post\\\" src=\\\"/twitter-cards-for-gatsby-posts-link-card.png\\\"/\\u003e\\u003c/p\\u003e\\u003cp\\u003eTwitter has \\u003ca href=\\\"https://cards-dev.twitter.com/validator\\\"\\u003ea tool to validate\\u003c/a\\u003e the cards for different\\npages. It will show how the card will be viewed in a tweet. Below is an\\nexample with this post.\\u003c/p\\u003e\\u003cp\\u003e\\u003cimg alt=\\\"Screenshot of a twitter card\\\" src=\\\"/images/twitter-cards-for-gatsby-posts/card-screenshot.png\\\"/\\u003e\\u003c/p\\u003e\\u003cp\\u003eSo how to build this? Two things is necessary to get this to work. Creating\\nthe image and then add the meta tags to each posts according to the twitter\\ndocumentation.\\u003c/p\\u003e\\u003cp\\u003eFirstly, let us look at the creating of the images themselves. \\u003ca href=\\\"https://github.com/Automattic/node-canvas\\\"\\u003enode-canvas\\u003c/a\\u003e\\nis a nice tool to do drawing in Node.js that we want to store in a file. It\\ncan do many of the things possible to do with browser side canvas. Below is\\nthe implementation of the card for this site. What parts each section draws\\nis put in comments above them. In the end of the function the\\n\\u003ccode\\u003ecanvas.toBuffer(\\u0026#x27;image/png\\u0026#x27;)\\u003c/code\\u003e function is used to create a buffer that we\\ncan write to a file, which then is written to the file.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e createCanvas \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;canvas\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fs \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;fs\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateLinkCards\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e title\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e path \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateCanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e600\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e300\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e context \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003egetContext\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;2d\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e// Create a white background\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efillStyle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;white\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efillRect\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheight\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e// Create the big RL in purple\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efont\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;100pt serif\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efillStyle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;#6C3082\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e header \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emeasureText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;RL\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efillText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;RL\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ecanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e header\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e2\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e160\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e// Create the purple line across the image\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003estrokeStyle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;#6C3082\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ebeginPath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elineTo\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e180\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elineTo\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ecanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e180\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003elineWidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e6\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003estroke\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e// Insert the title text beneath the purple line\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003esetFontSizeForWidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ecanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e*\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0.75\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efillStyle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;black\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e text \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emeasureText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efillText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ecanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e text\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e2\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e250\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  fs\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ewriteFileSync\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003epath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003etoBuffer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;image/png\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThere are a few things to take a closer look at. Several places\\n\\u003ccode\\u003econtext.measureText\\u003c/code\\u003e is used. It will take use the current font config to\\nmeasure how wide the string passed as the first argument will be. This is\\nuseful to center the text since we can use it to calculate the placement of\\nthe text. Furthermore, it can be used to decide the font size if we do not\\nknow the amount of text to render beforehand. In this case, that is done for\\nthe title with the function below, which will test any font size from 100pt\\nand downwards until the text fits within a certain limit. In the case of the\\ncard title it is set to 75 % of the canvas with.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003esetFontSizeForWidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003econtext\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e width\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003elet\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fontSize \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e100\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003edo\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    fontSize\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e--\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efont\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fontSize \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e+\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;pt serif\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ewhile\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003econtext\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emeasureText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e width\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fontSize\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe next thing needed is to call the \\u003ccode\\u003ecreateLinkCards\\u003c/code\\u003e in the same place\\nwhere \\u003ccode\\u003ecreatePage\\u003c/code\\u003e is called in \\u003ccode\\u003egatsby-node.js\\u003c/code\\u003e. In this example I have used\\n\\u003ca href=\\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\u003egatsby-transformer-remark\\u003c/a\\u003e the code snippet below is looping over the result\\nof the graphql query similar to the documentation for\\n\\u003ca href=\\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\u003egatsby-transformer-remark\\u003c/a\\u003e.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eposts\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e layout\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e title \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreatePage\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    component\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etemplatePath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;blogpost.js\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateLinkCards\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    title\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;public\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e-link-card.png\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eAfter running \\u003ccode\\u003egatsby build\\u003c/code\\u003e the public folder will now have a link card file\\nfor each post. Open one and check how it looks. Next step will be to link this\\nin the blogpost template. These things needs to be linked in meta tags in the\\nhead tag. To change metadata with Gatsby it is recommended to use react-helmet.\\nThere is a \\u003c!-- --\\u003e[guide on how to change metadata][gatsby-docs-metadata]\\u003c!-- --\\u003e in the Gatsby\\ndocumentation. In the component in the \\u003ccode\\u003eblogpost.js\\u003c/code\\u003e template add the following\\nsnippet of code.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eHelmet\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emeta name\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;twitter:title\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e content\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emeta name\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;twitter:card\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e content\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;summary_large_image\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emeta name\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;twitter:author\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e content\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;@\\u0026lt;your twitter handle\\u0026gt;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emeta name\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;twitter:image:src\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e content\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003ewindow\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003elocation\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eorigin\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e-link-card.png\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eHelmet\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis is all that is needed to get these nice cards in tweets with links to your blog.\\nIt might be worth looking into more meta tags for getting the same behavior on other\\nsites that have similar functionality. Remember that \\u003ca href=\\\"https://cards-dev.twitter.com/validator\\\"\\u003etwitter has a tool to test\\u003c/a\\u003e\\nyour new cards.\\u003c/p\\u003e\",\"scope\":{}},\"count\":1}]},{\"slug\":\"wireless-uplinks-with-unifi\",\"layout\":\"post\",\"title\":\"Wireless uplinks with Unifi\",\"date\":\"2020-05-03T00:00:00.000Z\",\"category\":\"Homelab\",\"tags\":[\"networking\",\"unifi\",\"ubiquiti\",\"homelab\"],\"relatedPosts\":[]},{\"slug\":\"using-git-commits-instead-of-stash\",\"layout\":\"post\",\"title\":\"Using git commits instead of git stash\",\"date\":\"2019-11-14T00:00:00.000Z\",\"tags\":[\"git\"],\"relatedPosts\":[{\"slug\":\"the-github-lamp\",\"layout\":\"post\",\"title\":\"The Github lamp\",\"date\":\"2012-09-16T00:00:00.000Z\",\"category\":\"Python\",\"tags\":[\"arduino\",\"github\",\"git\",\"web.py\"],\"redirect_from\":\"/2012/09/16/the-github-lamp/\",\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"blockquote\\\", null, mdx(\\\"p\\\", {\\n    parentName: \\\"blockquote\\\"\\n  }, \\\"Update: This project is now on github: \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://github.com/relekang/lumen\\\"\\n  }, \\\"relekang/lumen\\\"))), mdx(\\\"p\\\", null, \\\"My arduino has been collecting dust in a drawer for a while. This weekend I figured why not hook it up with github post-receive hooks and do something cool. The hooks can be set up in the \\\", mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Service Hooks\\\"), \\\" section of a repository's admin page on github. Just add a url to where the web.py site is running and github will send that url a POST request everytime someone pushes a commit to the repository. You can fin more info about post-receive hooks at \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://help.github.com/articles/post-receive-hooks\\\"\\n  }, \\\"help.github.com\\\"), \\\".\\\"), mdx(\\\"p\\\", null, \\\"About two years ago I rebuilt a IKEA children-lamp to be controllable with high/low digital signals.\\\"), mdx(\\\"p\\\", null, mdx(\\\"img\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"src\\\": \\\"/images/github-lamp.jpg\\\",\\n    \\\"alt\\\": \\\"The IKEA lamp\\\"\\n  })), mdx(\\\"p\\\", null, \\\"I wrote this based on the serial example for the arduino. It turns the lamp on and off according to the commands \\\", mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"on\\\"), \\\", \\\", mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"off\\\"), \\\" and \\\", mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"blink\\\"), \\\".\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-c\\\"\\n  }, \\\"String inputString = \\\\\\\"\\\\\\\";\\\\nboolean stringComplete = false;\\\\nint led = 5;\\\\n\\\\nvoid setup() {\\\\n      Serial.begin(9600);\\\\n      inputString.reserve(200);\\\\n      pinMode(led, OUTPUT);\\\\n}\\\\n\\\\nvoid loop() {\\\\n    if (stringComplete) {\\\\n        if(inputString == \\\\\\\"on\\\\\\\"){\\\\n            digitalWrite(led, HIGH);\\\\n        } else if (inputString == \\\\\\\"off\\\\\\\"){\\\\n            digitalWrite(led, LOW);\\\\n        } else if (inputString == \\\\\\\"blink\\\\\\\"){\\\\n            digitalWrite(led, HIGH);\\\\n            delay(1000);\\\\n            digitalWrite(led, LOW);\\\\n        } else {\\\\n            Serial.println(inputString);\\\\n        }\\\\n        // clear the string:\\\\n        inputString = \\\\\\\"\\\\\\\";\\\\n        stringComplete = false;\\\\n    }\\\\n}\\\\n\\\\nvoid serialEvent() {\\\\n    while (Serial.available()) {\\\\n        char inChar = (char)Serial.read();\\\\n        if (inChar == '\\\\\\\\n') {\\\\n            stringComplete = true;\\\\n        } else {\\\\n            inputString += inChar;\\\\n        }\\\\n    }\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The arduino is connected to my mac mini. I have some python code running on the mac to write stuff onto the serial connection between the mac and the arduino. I am using \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://webpy.org/\\\"\\n  }, \\\"web.py\\\"), \\\" and \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://gunicorn.org/\\\"\\n  }, \\\"gunicorn\\\"), \\\" to handle the web requests. The web.py-file \\\", mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"lighthouse_keeper.py\\\"), \\\" looks like this:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"SERIALPORT = \\\\\\\"/dev/tty.usbmodemfd121\\\\\\\"\\\\n\\\\nclass GithubHook:\\\\n    def POST(self):\\\\n        send_serial_data(\\\\\\\"blink\\\\\\\\n\\\\\\\")\\\\n        data = json.loads(web.input().payload)\\\\n        print \\\\\\\"%s pushed to %s - %s\\\\\\\" % (\\\\n            data['pusher']['name'],\\\\n            data['repository']['name'],\\\\n            data['repository']['homepage']\\\\n        )\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\\n    def GET(self):\\\\n        return \\\\\\\"Something is wrong\\\\\\\"\\\\n\\\\ndef send_serial_data(data):\\\\n    #open serial port\\\\n    try:\\\\n        ser = serial.Serial(SERIALPORT, 9600)\\\\n    except serial.SerialException:\\\\n        return\\\\n\\\\n    ser.write(data)\\\\n\\\\n    #close serial port\\\\n    ser.close()\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    app = web.application(urls, globals())\\\\n    app.run()\\\\n\\\\napplication = web.application(urls, globals(), True).wsgifunc()\\\\n\\\")), mdx(\\\"p\\\", null, \\\"To run gunicorn I just run the command:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-bash\\\"\\n  }, \\\"gunicorn lighthouse_keeper\\\\n\\\")));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cblockquote\\u003e\\u003cp\\u003eUpdate: This project is now on github: \\u003ca href=\\\"http://github.com/relekang/lumen\\\"\\u003erelekang/lumen\\u003c/a\\u003e\\u003c/p\\u003e\\u003c/blockquote\\u003e\\u003cp\\u003eMy arduino has been collecting dust in a drawer for a while. This weekend I figured why not hook it up with github post-receive hooks and do something cool. The hooks can be set up in the \\u003cem\\u003eService Hooks\\u003c/em\\u003e section of a repository\\u0026#x27;s admin page on github. Just add a url to where the web.py site is running and github will send that url a POST request everytime someone pushes a commit to the repository. You can fin more info about post-receive hooks at \\u003ca href=\\\"https://help.github.com/articles/post-receive-hooks\\\"\\u003ehelp.github.com\\u003c/a\\u003e.\\u003c/p\\u003e\\u003cp\\u003eAbout two years ago I rebuilt a IKEA children-lamp to be controllable with high/low digital signals.\\u003c/p\\u003e\\u003cp\\u003e\\u003cimg alt=\\\"The IKEA lamp\\\" src=\\\"/images/github-lamp.jpg\\\"/\\u003e\\u003c/p\\u003e\\u003cp\\u003eI wrote this based on the serial example for the arduino. It turns the lamp on and off according to the commands \\u003cem\\u003eon\\u003c/em\\u003e, \\u003cem\\u003eoff\\u003c/em\\u003e and \\u003cem\\u003eblink\\u003c/em\\u003e.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"c\\\"\\u003e\\u003cpre class=\\\"prism-code language-c\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eString inputString \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eboolean stringComplete \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e false\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eint\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e led \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e5\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003evoid\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003esetup\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      Serial\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ebegin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e9600\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      inputString\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ereserve\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e200\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003epinMode\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eled\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e OUTPUT\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003evoid\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eloop\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003estringComplete\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003einputString \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;on\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003edigitalWrite\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eled\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e HIGH\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003einputString \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;off\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003edigitalWrite\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eled\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e LOW\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003einputString \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;blink\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003edigitalWrite\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eled\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e HIGH\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003edelay\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e1000\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003edigitalWrite\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eled\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e LOW\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            Serial\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eprintln\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003einputString\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e// clear the string:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        inputString \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        stringComplete \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e false\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003evoid\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eserialEvent\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ewhile\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eSerial\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eavailable\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003echar\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e inChar \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003echar\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eSerial\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eread\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003einChar \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;\\\\n\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            stringComplete \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e true\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            inputString \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e+=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e inChar\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe arduino is connected to my mac mini. I have some python code running on the mac to write stuff onto the serial connection between the mac and the arduino. I am using \\u003ca href=\\\"http://webpy.org/\\\"\\u003eweb.py\\u003c/a\\u003e and \\u003ca href=\\\"http://gunicorn.org/\\\"\\u003egunicorn\\u003c/a\\u003e to handle the web requests. The web.py-file \\u003cem\\u003elighthouse_keeper.py\\u003c/em\\u003e looks like this:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eSERIALPORT \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;/dev/tty.usbmodemfd121\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eclass\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token class-name\\\"\\u003eGithubHook\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003edef\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ePOST\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eself\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        send_serial_data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;blink\\\\n\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        data \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e json\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eloads\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eweb\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token builtin\\\"\\u003einput\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003epayload\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eprint\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;%s pushed to %s - %s\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e%\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;pusher\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;name\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;repository\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;name\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;repository\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;homepage\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003edef\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eGET\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eself\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;Something is wrong\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003edef\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003esend_serial_data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e#open serial port\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003etry\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        ser \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e serial\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eSerial\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eSERIALPORT\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e9600\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eexcept\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e serial\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eSerialException\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    ser\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ewrite\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e#close serial port\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    ser\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eclose\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e __name__ \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;__main__\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    app \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e web\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eapplication\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eurls\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token builtin\\\"\\u003eglobals\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    app\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003erun\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eapplication \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e web\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eapplication\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eurls\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token builtin\\\"\\u003eglobals\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token boolean\\\"\\u003eTrue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ewsgifunc\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eTo run gunicorn I just run the command:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"bash\\\"\\u003e\\u003cpre class=\\\"prism-code language-bash\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003egunicorn lighthouse_keeper\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\",\"scope\":{}},\"count\":1}]},{\"slug\":\"twitter-cards-for-gatsby-posts\",\"layout\":\"post\",\"title\":\"Twitter cards for Gatsby posts\",\"date\":\"2019-02-26T00:00:00.000Z\",\"category\":\"Gatsby\",\"tags\":[\"gatsby\",\"canvas\",\"javascript\"],\"relatedPosts\":[{\"slug\":\"related-articles-with-gatsby\",\"layout\":\"post\",\"title\":\"Related articles with Gatsby\",\"date\":\"2019-02-20T00:00:00.000Z\",\"category\":\"Gatsby\",\"tags\":[\"gatsby\",\"javascript\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"This website is created with \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/\\\"\\n  }, \\\"Gatsby\\\"), \\\", Reasonml and a little bit of typescript.\\\\nIn this post I will explain how I built the \\\\\\\"Related articles\\\\\\\" feature that can be\\\\nseen on the bottom of some of the articles. I have kept all the examples in this\\\\npost in javascript so it will be helpful to more people.\\\"), mdx(\\\"p\\\", null, \\\"First of we need to define what makes two posts or articles related. On this site\\\\nand for this article I am defining it as articles that has the same tags. In the\\\\nfrontmatter I have a comma separated list of tags. Below is an example:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-yaml\\\"\\n  }, \\\"title: Related articles with Gatsby\\\\nslug: related-articles-with-gatsby\\\\ntags: gatsby,javascript\\\\ndate: 2019-02-20\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This blog is based on a setup with \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\n  }, \\\"gatsby-transformer-remark\\\"), \\\" which has the\\\\nfollowing in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatsby-node.js\\\"), \\\" to generate the pages. The first part fetches all\\\\nthe articles and the necessary metadata with Graphql. The second part loops over\\\\nall the articles and then creates pages for them with the Gatsby \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createPage\\\"), \\\"\\\\nfunction.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"exports.createPages = async ({ graphql, actions }) =\\u003e {\\\\n  const { createPage } = actions;\\\\n  const templatePath = path.resolve('./src/templates/');\\\\n\\\\n  const response = await graphql(\\\\n    `\\\\n      query {\\\\n        allMarkdownRemark {\\\\n          edges {\\\\n            node {\\\\n              frontmatter {\\\\n                layout\\\\n                slug\\\\n                date(formatString: \\\\\\\"DD.MM.YYYY\\\\\\\")\\\\n              }\\\\n            }\\\\n          }\\\\n        }\\\\n      }\\\\n    `\\\\n  );\\\\n\\\\n  const postEdges = response.data.allMarkdownRemark.edges\\\\n\\\\n  postEdges.forEach(({ node }) =\\u003e {\\\\n    const { slug, layout, tags } = node.frontmatter;\\\\n    createPage({\\\\n      path: `/${slug}`,\\\\n      component: path.join(templatePath, `${layout}.tsx`),\\\\n      context: { slug },\\\\n    });\\\\n  });\\\\n\\\")), mdx(\\\"p\\\", null, \\\"In order to populate the data for related articles we will add the data as\\\\ncontext parameters in the createPage call. However, first we need to find\\\\nthose articles. The code below will build a map of tags and articles with those\\\\ntags.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"const articlesByTags = postEdges.reduce((lastValue, { node }) =\\u003e {\\\\n  const tags = node.frontmatter.tags || \\\\\\\"\\\\\\\";\\\\n  tags.split(/, ?/).forEach(tag =\\u003e {\\\\n    if (lastValue[tag]) {\\\\n      lastValue[tag].push(node.frontmatter);\\\\n    } else {\\\\n      lastValue[tag] = [node.frontmatter];\\\\n    }\\\\n  });\\\\n  return lastValue;\\\\n}, {});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The result will be something like the following, where \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"{...}\\\"), \\\" is the\\\\nfrontmatter of a post. This we can use to look up all the related articles for\\\\none post.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"{\\\\n  gatsby: [{...}, {...}],\\\\n  cli: [{...}, {...}]\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"articlesByTags\\\"), \\\" is useful for looking up all the articles that has a list of tags. Let\\\\nus look at a possible implementation for that.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"const _ = require(\\\\\\\"lodash/fp\\\\\\\");\\\\n\\\\nfunction findRelatedArticles(slug, tags) {\\\\n  return _.flow([\\\\n    _.split(/, ?/),\\\\n    _.map(tag =\\u003e articlesByTags[tag]),\\\\n    _.flatten,\\\\n    _.filter(node =\\u003e node.slug !== slug),\\\\n    _.uniqBy(node =\\u003e node.slug)\\\\n  ])(tags);\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"In this function the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"_\\\"), \\\" is the\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/lodash/lodash/wiki/FP-Guide\\\"\\n  }, \\\"functional programming(fp) version of lodash\\\"), \\\", which has this neat\\\\nutility called flow for grouping actions together. Flow returns a function when\\\\ncalled will perform all the operations in the array. Each operation will have\\\\nto be a function and the return value of each of them will be passed as the\\\\nargument to the next one. The function above will first split the comma\\\\nseparated string to a list and then perform a map on that list of tags to a\\\\nlist of lists of articles. Since we now have a list of lists it is necessary to\\\\nflatten it, which will result in a list of articles. The next step is to filter\\\\nout the current post since we only want other articles than the one that is\\\\ncurrently viewed. In the last step we want to remove any duplicate articles and\\\\ncan do that by selecting unique elements based on the slug.\\\"), mdx(\\\"p\\\", null, \\\"To finish the data setup it is necessary to add the related articles to the\\\\ncontext in the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createPage\\\"), \\\" call.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"createPage({\\\\n  path: `/${slug}`,\\\\n  component: path.join(templatePath, `${layout}.tsx`),\\\\n  context: {\\\\n    slug,\\\\n    // highlight-next-line\\\\n    relatedArticles: findRelatedArticles(slug, tags),\\\\n  },\\\\n});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatsby-node.js\\\"), \\\" file should look something like the following now. In the\\\\ncode below the changes is highlighted.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"exports.createPages = async ({ graphql, actions }) =\\u003e {\\\\n  const { createPage } = actions;\\\\n  const templatePath = path.resolve('./src/templates/');\\\\n\\\\n  const response = await graphql(\\\\n    `\\\\n      query {\\\\n        allMarkdownRemark {\\\\n          edges {\\\\n            node {\\\\n              frontmatter {\\\\n                layout\\\\n                slug\\\\n                date(formatString: \\\\\\\"DD.MM.YYYY\\\\\\\")\\\\n              }\\\\n            }\\\\n          }\\\\n        }\\\\n      }\\\\n    `\\\\n  );\\\\n\\\\n  const postEdges = response.data.allMarkdownRemark.edges;\\\\n\\\\n  // highlight-start\\\\n  const articlesByTags = postEdges.reduce((lastValue, { node }) =\\u003e {\\\\n    const tags = node.frontmatter.tags || '';\\\\n    tags.split(/, ?/).forEach(tag =\\u003e {\\\\n      if (lastValue[tag]) {\\\\n        lastValue[tag].push(node.frontmatter);\\\\n      } else {\\\\n        lastValue[tag] = [node.frontmatter];\\\\n      }\\\\n    });\\\\n    return lastValue;\\\\n  }, {});\\\\n  // highlight-end\\\\n\\\\n  // highlight-start\\\\n  function findRelatedArticles(slug, tags) {\\\\n    return _.flow([\\\\n      _.split(/, ?/),\\\\n      _.map(tag =\\u003e articlesByTags[tag]),\\\\n      _.flatten,\\\\n      _.filter(node =\\u003e node.slug !== slug),\\\\n      _.uniqBy(node =\\u003e node.slug),\\\\n    ])(tags);\\\\n  }\\\\n  // highlight-end\\\\n\\\\n  postEdges.forEach(({ node }) =\\u003e {\\\\n    const { slug, layout, tags } = node.frontmatter;\\\\n    createPage({\\\\n      path: `/${slug}`,\\\\n      component: path.join(templatePath, `${layout}.tsx`),\\\\n      context: {\\\\n        slug,\\\\n        // highlight-next-line\\\\n        relatedArticles: findRelatedArticles(slug, tags),\\\\n      },\\\\n    });\\\\n  });\\\\n\\\")), mdx(\\\"p\\\", null, \\\"At this point all the data needed is in place. However, it still has to\\\\nbe shown to give some value. Let us look at a component to add this to\\\\nthe site.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"export function RelatedArticles(props) {\\\\n  if (!props.articles || props.articles.length === 0) {\\\\n    return \\u003cdiv /\\u003e;\\\\n  }\\\\n  return (\\\\n    \\u003csection id=\\\\\\\"related-articles\\\\\\\"\\u003e\\\\n      \\u003cheader\\u003eRelated articles\\u003c/header\\u003e\\\\n      \\u003cul\\u003e\\\\n        {props.articles.map(article =\\u003e (\\\\n          \\u003cli key={article.slug}\\u003e\\\\n            \\u003cLink to={`/${article.slug}`}\\u003e{article.title}\\u003c/Link\\u003e\\\\n            {' '}\\\\n            \\u003cem\\u003e{article.date}\\u003c/em\\u003e\\\\n          \\u003c/li\\u003e\\\\n        ))}\\\\n      \\u003c/ul\\u003e\\\\n    \\u003c/section\\u003e\\\\n  );\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This component will render an empty div if there are no related articles.\\\\nIn the case of related articles it will render a list with links to the\\\\narticles. Remember that the data available here is defined by the graphql\\\\nquery in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatbsy-node.js\\\"), \\\". In order to glue these parts together and make\\\\nit work the component needs to be added in the template used for the\\\\narticles.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"\\u003cRelatedArticles articles={props.pageContext.relatedArticles} /\\u003e\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The page component will get the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"context\\\"), \\\" attribute from \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createPage\\\"), \\\" as\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"pageContext\\\"), \\\". Thus, the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"relatedArticles\\\"), \\\" attribute we created earlier will\\\\nbe accessible on that object.\\\"), mdx(\\\"p\\\", null, \\\"This is all that is needed to have related articles with a Gatsby site with\\\\nthe transformer-remark plugin. To see have it looks have a look at the bottom\\\\nof the \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"/testing-simple-graphql-services#related-articles\\\"\\n  }, \\\"Testing simple GraphQL services\\\"), \\\"\\\\narticle.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eThis website is created with \\u003ca href=\\\"https://www.gatsbyjs.org/\\\"\\u003eGatsby\\u003c/a\\u003e, Reasonml and a little bit of typescript.\\nIn this post I will explain how I built the \\u0026quot;Related articles\\u0026quot; feature that can be\\nseen on the bottom of some of the articles. I have kept all the examples in this\\npost in javascript so it will be helpful to more people.\\u003c/p\\u003e\\u003cp\\u003eFirst of we need to define what makes two posts or articles related. On this site\\nand for this article I am defining it as articles that has the same tags. In the\\nfrontmatter I have a comma separated list of tags. Below is an example:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"yaml\\\"\\u003e\\u003cpre class=\\\"prism-code language-yaml\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e Related articles with Gatsby\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e related\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003earticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ewith\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003egatsby\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e gatsby\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ejavascript\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003edate\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token datetime number\\\"\\u003e2019-02-20\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis blog is based on a setup with \\u003ca href=\\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\u003egatsby-transformer-remark\\u003c/a\\u003e which has the\\nfollowing in \\u003ccode\\u003egatsby-node.js\\u003c/code\\u003e to generate the pages. The first part fetches all\\nthe articles and the necessary metadata with Graphql. The second part loops over\\nall the articles and then creates pages for them with the Gatsby \\u003ccode\\u003ecreatePage\\u003c/code\\u003e\\nfunction.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eexports\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method-variable function-variable method function property-access\\\"\\u003ecreatePages\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003easync\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e graphql\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e actions \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e createPage \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e actions\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e templatePath \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eresolve\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;./src/templates/\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eawait\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003egraphql\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      query {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e        allMarkdownRemark {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e          edges {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e            node {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e              frontmatter {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                layout\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                slug\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                date(formatString: \\u0026quot;DD.MM.YYYY\\u0026quot;)\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e              }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e            }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e          }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e        }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e postEdges \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eallMarkdownRemark\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eedges\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  postEdges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e layout\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreatePage\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      component\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etemplatePath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003elayout\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e.tsx\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      context\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eIn order to populate the data for related articles we will add the data as\\ncontext parameters in the createPage call. However, first we need to find\\nthose articles. The code below will build a map of tags and articles with those\\ntags.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articlesByTags \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e postEdges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ereduce\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003elastValue\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003e, ?\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003elastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003epush\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe result will be something like the following, where \\u003ccode\\u003e{...}\\u003c/code\\u003e is the\\nfrontmatter of a post. This we can use to look up all the related articles for\\none post.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  gatsby\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  cli\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe \\u003ccode\\u003earticlesByTags\\u003c/code\\u003e is useful for looking up all the articles that has a list of tags. Let\\nus look at a possible implementation for that.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e _ \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;lodash/fp\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003efindRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eflow\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003e, ?\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emap\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articlesByTags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eflatten\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efilter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003euniqBy\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eIn this function the \\u003ccode\\u003e_\\u003c/code\\u003e is the\\n\\u003ca href=\\\"https://github.com/lodash/lodash/wiki/FP-Guide\\\"\\u003efunctional programming(fp) version of lodash\\u003c/a\\u003e, which has this neat\\nutility called flow for grouping actions together. Flow returns a function when\\ncalled will perform all the operations in the array. Each operation will have\\nto be a function and the return value of each of them will be passed as the\\nargument to the next one. The function above will first split the comma\\nseparated string to a list and then perform a map on that list of tags to a\\nlist of lists of articles. Since we now have a list of lists it is necessary to\\nflatten it, which will result in a list of articles. The next step is to filter\\nout the current post since we only want other articles than the one that is\\ncurrently viewed. In the last step we want to remove any duplicate articles and\\ncan do that by selecting unique elements based on the slug.\\u003c/p\\u003e\\u003cp\\u003eTo finish the data setup it is necessary to add the related articles to the\\ncontext in the \\u003ccode\\u003ecreatePage\\u003c/code\\u003e call.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreatePage\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  component\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etemplatePath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003elayout\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e.tsx\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    relatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003efindRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe \\u003ccode\\u003egatsby-node.js\\u003c/code\\u003e file should look something like the following now. In the\\ncode below the changes is highlighted.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eexports\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method-variable function-variable method function property-access\\\"\\u003ecreatePages\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003easync\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e graphql\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e actions \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e createPage \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e actions\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e templatePath \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eresolve\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;./src/templates/\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eawait\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003egraphql\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      query {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e        allMarkdownRemark {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e          edges {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e            node {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e              frontmatter {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                layout\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                slug\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                date(formatString: \\u0026quot;DD.MM.YYYY\\u0026quot;)\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e              }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e            }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e          }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e        }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e postEdges \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eallMarkdownRemark\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eedges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articlesByTags \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e postEdges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ereduce\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003elastValue\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003e, ?\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003elastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003epush\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003efindRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eflow\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003e, ?\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emap\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articlesByTags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eflatten\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efilter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003euniqBy\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  postEdges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e layout\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreatePage\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      component\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etemplatePath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003elayout\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e.tsx\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      context\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        relatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003efindRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eAt this point all the data needed is in place. However, it still has to\\nbe shown to give some value. Let us look at a component to add this to\\nthe site.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword module\\\"\\u003eexport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function maybe-class-name\\\"\\u003eRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eprops\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eprops\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003earticles\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e props\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003earticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003elength\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e===\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ediv \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003esection id\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;related-articles\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eheader\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eRelated\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articles\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eheader\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eul\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eprops\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003earticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emap\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e          \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eli key\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eLink\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e to\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eLink\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27; \\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eem\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edate\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eem\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e          \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eli\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eul\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003esection\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis component will render an empty div if there are no related articles.\\nIn the case of related articles it will render a list with links to the\\narticles. Remember that the data available here is defined by the graphql\\nquery in \\u003ccode\\u003egatbsy-node.js\\u003c/code\\u003e. In order to glue these parts together and make\\nit work the component needs to be added in the template used for the\\narticles.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articles\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eprops\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003epageContext\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003erelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe page component will get the \\u003ccode\\u003econtext\\u003c/code\\u003e attribute from \\u003ccode\\u003ecreatePage\\u003c/code\\u003e as\\n\\u003ccode\\u003epageContext\\u003c/code\\u003e. Thus, the \\u003ccode\\u003erelatedArticles\\u003c/code\\u003e attribute we created earlier will\\nbe accessible on that object.\\u003c/p\\u003e\\u003cp\\u003eThis is all that is needed to have related articles with a Gatsby site with\\nthe transformer-remark plugin. To see have it looks have a look at the bottom\\nof the \\u003ca href=\\\"/testing-simple-graphql-services#related-articles\\\"\\u003eTesting simple GraphQL services\\u003c/a\\u003e\\narticle.\\u003c/p\\u003e\",\"scope\":{}},\"count\":2},{\"slug\":\"testing-simple-graphql-services\",\"layout\":\"post\",\"date\":\"2017-05-28T00:00:00.000Z\",\"title\":\"Testing simple GraphQL services\",\"tags\":[\"graphql\",\"testing\",\"javascript\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"I recently created a \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/relekang/micro-rss-parser\\\"\\n  }, \\\"GraphQL based microservice\\\"), \\\" for parsing RSS-feeds. I wanted\\\\nto write something down about the approach I took to test the API. The service is read only, as\\\\nthere is little we can push out into others RSS feeds.\\\"), mdx(\\\"p\\\", null, \\\"GraphQL returns 200 status for almost everything. Whenever error occurs it only pushes the error\\\\nto a list of errors that is passed to the payload. This is because it is designed to be resillient\\\\nand give as much information as it can even when something fails. This also means that we can\\\\nabstract away the most part of successful and unsuccessful requests in our tests and still get\\\\nvalid tests. Thus, when testing the API layer of this service the only thing that matters is the\\\\nquery and the response.\\\"), mdx(\\\"p\\\", null, \\\"Services like micro-rss-parser has another characteristic that makes them easy to test. No\\\\nauthentication or authorization, which means that we do not need to check different types of errors\\\\nbased on different states of authorization. Thus, it is only the GraphQL query and the response\\\\nthat matters.\\\"), mdx(\\\"p\\\", null, \\\"I created a helper that allowed me to write tests in an easy way with focus on the queries. The\\\\ntests look like this:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"testGraphQlService`{\\\\n  feed(url=\\\\\\\"https://rolflekang.com/feed.xml\\\\\\\") {\\\\n    entries {\\\\n      title\\\\n    }\\\\n  }\\\\n}\\\\n `\\\\n\\\")), mdx(\\\"p\\\", null, \\\"Under the hood that helper creates a \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://facebook.github.io/jest/\\\"\\n  }, \\\"jest\\\"), \\\" test that asserts to a snapshot with jests handy\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://facebook.github.io/jest/docs/expect.html#tomatchsnapshotoptionalstring\\\"\\n  }, \\\"toMatchSnapshot()\\\"), \\\". This generates a snapshot file for every test file with a map of responses\\\\nwith the query as key. Thus, reviewing these tests and test changes is a bliss. Below is the\\\\nimplementation of the test helper as it was in micro-rss-parser at the time when this was written.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"const request = require('superagent')\\\\n\\\\nfunction createTestServer() {\\\\n  /*\\\\n   * Set up a test instance and return url.\\\\n   * For micro-rss-parser I used this https://github.com/zeit/micro#testing\\\\n   */\\\\n}\\\\n\\\\nfunction testGraphqlApi (strings, ...args) {\\\\n  const query = String.raw(strings, ...args)\\\\n  test(query, async () =\\u003e {\\\\n    let response\\\\n    const url = await createTestServer()\\\\n\\\\n    try {\\\\n      response = (await request\\\\n        .post(url)\\\\n        .set('User-Agent', 'graphql-test')\\\\n        .set('Content-Type', 'application/json')\\\\n        .send(JSON.stringify({ query }))\\\\n      ).body\\\\n    } catch (error) {\\\\n      if (!error.response) {\\\\n        throw error\\\\n      }\\\\n\\\\n      response = error.response.body\\\\n    }\\\\n\\\\n    expect(response).toMatchSnapshot()\\\\n  })\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"It has made it easy to write good and readable API tests of the little microservice. However,\\\\nkeep in mind that this is a sufficient solution due to the assumptions discussed earlier so it\\\\nmight not be a fit approach for you project, nevertheless, feel free to take the helper. Let me\\\\nknow how it works out for you \\\\u270C\\\\uFE0F\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eI recently created a \\u003ca href=\\\"https://github.com/relekang/micro-rss-parser\\\"\\u003eGraphQL based microservice\\u003c/a\\u003e for parsing RSS-feeds. I wanted\\nto write something down about the approach I took to test the API. The service is read only, as\\nthere is little we can push out into others RSS feeds.\\u003c/p\\u003e\\u003cp\\u003eGraphQL returns 200 status for almost everything. Whenever error occurs it only pushes the error\\nto a list of errors that is passed to the payload. This is because it is designed to be resillient\\nand give as much information as it can even when something fails. This also means that we can\\nabstract away the most part of successful and unsuccessful requests in our tests and still get\\nvalid tests. Thus, when testing the API layer of this service the only thing that matters is the\\nquery and the response.\\u003c/p\\u003e\\u003cp\\u003eServices like micro-rss-parser has another characteristic that makes them easy to test. No\\nauthentication or authorization, which means that we do not need to check different types of errors\\nbased on different states of authorization. Thus, it is only the GraphQL query and the response\\nthat matters.\\u003c/p\\u003e\\u003cp\\u003eI created a helper that allowed me to write tests in an easy way with focus on the queries. The\\ntests look like this:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etestGraphQlService\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e{\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e  feed(url=\\u0026quot;https://rolflekang.com/feed.xml\\u0026quot;) {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e    entries {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      title\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e    }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e  }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e}\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eUnder the hood that helper creates a \\u003ca href=\\\"https://facebook.github.io/jest/\\\"\\u003ejest\\u003c/a\\u003e test that asserts to a snapshot with jests handy\\n\\u003ca href=\\\"http://facebook.github.io/jest/docs/expect.html#tomatchsnapshotoptionalstring\\\"\\u003etoMatchSnapshot()\\u003c/a\\u003e. This generates a snapshot file for every test file with a map of responses\\nwith the query as key. Thus, reviewing these tests and test changes is a bliss. Below is the\\nimplementation of the test helper as it was in micro-rss-parser at the time when this was written.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e request \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;superagent\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateTestServer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e/*\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e   * Set up a test instance and return url.\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e   * For micro-rss-parser I used this https://github.com/zeit/micro#testing\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e   */\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003etestGraphqlApi\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003estrings\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eargs\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e query \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token known-class-name class-name\\\"\\u003eString\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eraw\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003estrings\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eargs\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003etest\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003equery\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003easync\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003elet\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e url \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eawait\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateTestServer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003etry\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eawait\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e request\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003epost\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eurl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eset\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;User-Agent\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;graphql-test\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eset\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;Content-Type\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;application/json\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esend\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token known-class-name class-name\\\"\\u003eJSON\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003estringify\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e query \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ebody\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ecatch\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eerror\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eerror\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eresponse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ethrow\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e error\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e error\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eresponse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ebody\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eexpect\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eresponse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003etoMatchSnapshot\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eIt has made it easy to write good and readable API tests of the little microservice. However,\\nkeep in mind that this is a sufficient solution due to the assumptions discussed earlier so it\\nmight not be a fit approach for you project, nevertheless, feel free to take the helper. Let me\\nknow how it works out for you \\u003c/p\\u003e\",\"scope\":{}},\"count\":1},{\"slug\":\"serving-plain-text-with-nextjs\",\"layout\":\"post\",\"title\":\"Serving text/plain for curl with Next\",\"date\":\"2020-05-26T00:00:00.000Z\",\"category\":\"nextjs\",\"tags\":[\"nextjs\",\"javascript\",\"curl\",\"nodejs\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"I have recently been trying out the \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://nextjs.org/\\\"\\n  }, \\\"Next.js\\\"), \\\" for some projects again. I have\\\\nhad earlier projects where I have been really happy with Next, but for some time now\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/\\\"\\n  }, \\\"Gatsby\\\"), \\\" has been my go to. One of the big things separating these two are that Next\\\\nhas runtime server side rendering and thought it would be a neat to utilize this to\\\\nhave separate content-types based on the client. The idea is that if the client is a\\\\nCLI based client like \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://curl.haxx.se/\\\"\\n  }, \\\"curl\\\"), \\\" the server should respond with a plain text response.\\\\nThis should not be the case if the accept header is set to something specific. The\\\\ndefault accept header in curl is \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"*/*\\\"), \\\".\\\"), mdx(\\\"p\\\", null, \\\"Next has a feature where you can drop in your own http server and still let the\\\\nframework handle the rendering. This is helpful in many situations like protecting\\\\nthings with login or using Next as a part of an already existing application. Below is\\\\na minimal custom server. The highlighted line is where the rendering of the response\\\\nis handed of to Next.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-javascript\\\"\\n  }, \\\"const { createServer } = require(\\\\\\\"http\\\\\\\");\\\\nconst { parse } = require(\\\\\\\"url\\\\\\\");\\\\nconst next = require(\\\\\\\"next\\\\\\\");\\\\n\\\\nconst dev = process.env.NODE_ENV !== \\\\\\\"production\\\\\\\";\\\\nconst app = next({ dev });\\\\nconst handle = app.getRequestHandler();\\\\nconst port = parseInt(process.env.PORT || \\\\\\\"3000\\\\\\\");\\\\n\\\\napp.prepare().then(() =\\u003e {\\\\n  createServer((req, res) =\\u003e {\\\\n    const parsedUrl = parse(req.url, true);\\\\n    // highlight-next-line\\\\n    handle(req, res, parsedUrl);\\\\n  }).listen(port, err =\\u003e {\\\\n    if (err) throw err;\\\\n    console.log(`\\u003e Ready on http://localhost:${port}`);\\\\n  });\\\\n});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This custom server does nothing that the default Next server does not, so putting this\\\\na project does not make very much sense unless one adds something more. That said, if\\\\nthis is put in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"server.js\\\"), \\\" in a Next project running \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"node server.js\\\"), \\\" in dev and\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"NODE_ENV=production node server.js\\\"), \\\" in production should work nicely.\\\"), mdx(\\\"p\\\", null, \\\"To achieve the custom content type responses without duplicating the content we can\\\\nuse Next to render the content. Then we will pass it through a npm module that returns\\\\ntext from HTML. It could also be interesting to do the same with something that returns\\\\nmarkdown if you want to keep more of semantic elements. In order to get the html from\\\\nNext we need to give it a fake response that we can read from afterwords. I will admit,\\\\nthis is a hack, but hey it works. \\\\uD83E\\\\uDD37\\\\u200D\\\\u2642\\\\uFE0F\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-javascript\\\"\\n  }, \\\"class FakeResponse extends EventEmitter {\\\\n  constructor() {\\\\n    super();\\\\n    this.headers = {};\\\\n    this.data = \\\\\\\"\\\\\\\";\\\\n  }\\\\n\\\\n  getHeader(key) {\\\\n    return this.headers[key];\\\\n  }\\\\n\\\\n  setHeader(key, value) {\\\\n    return (this.headers[key] = value);\\\\n  }\\\\n\\\\n  write(data) {\\\\n    this.data += data;\\\\n  }\\\\n\\\\n  end(data) {\\\\n    this.data += data;\\\\n    this.emit(\\\\\\\"end\\\\\\\", data);\\\\n  }\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The class above emulates the part of Node's \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"http.ServerResponse\\\"), \\\" that is needed and emits\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"end\\\"), \\\" when the response is done. This makes it possible to get the HTML generated by Next\\\\nand the headers set by Next. Below is a function that takes the same arguments as Next's\\\\nhandle function, but it uses the fake response to get the generated HTML and pass that to\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.npmjs.com/package/html-to-text\\\"\\n  }, \\\"html-to-text\\\"), \\\". It also copies all the headers from the fake response to the real response.\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Content-Length\\\"), \\\" and \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Content-Type\\\"), \\\" is excluded from this copying since those will be\\\\ndifferent from what Next has set.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-javascript\\\"\\n  }, \\\"function handleWithText(req, res, parsedUrl) {\\\\n  const fakeRes = new FakeResponse();\\\\n  fakeRes.on(\\\\\\\"end\\\\\\\", data =\\u003e {\\\\n    Object.keys(fakeRes.headers).forEach(key =\\u003e {\\\\n      if (key !== \\\\\\\"Content-Length\\\\\\\" \\u0026\\u0026 key !== \\\\\\\"Content-Type\\\\\\\") {\\\\n        res.setHeader(key, fakeRes.getHeader(key));\\\\n      }\\\\n    });\\\\n    res.setHeader(\\\\\\\"Content-Type\\\\\\\", \\\\\\\"text/plain\\\\\\\");\\\\n    res.statusCode = fakeRes.statusCode || 200\\\\n    res.end(htmlToText.fromString(data));\\\\n  });\\\\n  handle(req, fakeRes, parsedUrl);\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"With that set up, the custom server code can be changed to the following. The code\\\\nbelow checks the accept header and uses the new \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"handleWithText\\\"), \\\" function if the\\\\naccept header is set to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"text/plain\\\"), \\\" or the user agent is \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://curl.haxx.se/\\\"\\n  }, \\\"curl\\\"), \\\" or \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://httpie.org/\\\"\\n  }, \\\"httpie\\\"), \\\",\\\\nthe two CLI based http clients I know of, with an accept header set to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"*/*\\\"), \\\".\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-javascript\\\"\\n  }, \\\"app.prepare().then(() =\\u003e {\\\\n  createServer((req, res) =\\u003e {\\\\n    const parsedUrl = parse(req.url, true);\\\\n    const [accept] = (req.headers[\\\\\\\"accept\\\\\\\"] || \\\\\\\"\\\\\\\").split(\\\\\\\";\\\\\\\");\\\\n\\\\n    if (\\\\n      accept === \\\\\\\"text/plain\\\\\\\" ||\\\\n      (accept === \\\\\\\"*/*\\\\\\\" \\u0026\\u0026 /curl|HTTPie/.test(req.headers[\\\\\\\"user-agent\\\\\\\"] || \\\\\\\"\\\\\\\"))\\\\n    ) {\\\\n      handleWithText(req, res, parsedUrl);\\\\n    } else {\\\\n      handle(req, res, parsedUrl);\\\\n    }\\\\n  }).listen(port, err =\\u003e {\\\\n    if (err) throw err;\\\\n    console.log(`\\u003e Ready on http://localhost:${port}`);\\\\n  });\\\\n});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This would result in this output if it would be used on the front page of this website\\\\n(which would require me to rewrite it from Gatsby first, but that is another thing).\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\"\\n  }, \\\"$ curl -L rolflekang.com\\\\nRL [/]\\\\n\\\\nHi, I am Rolf\\\\n\\\\nI am an independent software developer who enjoys working\\\\nwith the whole stack. I occationally write posts [/writing], take photographs\\\\n[/photography], ride mountain bikes and snowboards. I do consulting work, if\\\\nthat is something you are looking I might be able to help out [/hire].\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This might not be the most useful feature, but it might be neat if your website\\\\ncontains information that people often would want to get from the terminal. Anyhow,\\\\nit is a fun little easter egg. \\\\uD83D\\\\uDC23\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eI have recently been trying out the \\u003ca href=\\\"https://nextjs.org/\\\"\\u003eNext.js\\u003c/a\\u003e for some projects again. I have\\nhad earlier projects where I have been really happy with Next, but for some time now\\n\\u003ca href=\\\"https://www.gatsbyjs.org/\\\"\\u003eGatsby\\u003c/a\\u003e has been my go to. One of the big things separating these two are that Next\\nhas runtime server side rendering and thought it would be a neat to utilize this to\\nhave separate content-types based on the client. The idea is that if the client is a\\nCLI based client like \\u003ca href=\\\"https://curl.haxx.se/\\\"\\u003ecurl\\u003c/a\\u003e the server should respond with a plain text response.\\nThis should not be the case if the accept header is set to something specific. The\\ndefault accept header in curl is \\u003ccode\\u003e*/*\\u003c/code\\u003e.\\u003c/p\\u003e\\u003cp\\u003eNext has a feature where you can drop in your own http server and still let the\\nframework handle the rendering. This is helpful in many situations like protecting\\nthings with login or using Next as a part of an already existing application. Below is\\na minimal custom server. The highlighted line is where the rendering of the response\\nis handed of to Next.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"javascript\\\"\\u003e\\u003cpre class=\\\"prism-code language-javascript\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e createServer \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;http\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parse \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;url\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e next \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;next\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e dev \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e process\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eenv\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token constant\\\"\\u003eNODE_ENV\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;production\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e app \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003enext\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e dev \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e handle \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e app\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003egetRequestHandler\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e port \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eparseInt\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eprocess\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eenv\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token constant\\\"\\u003ePORT\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;3000\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eapp\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eprepare\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ethen\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateServer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eparse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eurl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token boolean\\\"\\u003etrue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elisten\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eerr\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eerr\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ethrow\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e err\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token console class-name\\\"\\u003econsole\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elog\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e\\u0026gt; Ready on http://localhost:\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis custom server does nothing that the default Next server does not, so putting this\\na project does not make very much sense unless one adds something more. That said, if\\nthis is put in \\u003ccode\\u003eserver.js\\u003c/code\\u003e in a Next project running \\u003ccode\\u003enode server.js\\u003c/code\\u003e in dev and\\n\\u003ccode\\u003eNODE_ENV=production node server.js\\u003c/code\\u003e in production should work nicely.\\u003c/p\\u003e\\u003cp\\u003eTo achieve the custom content type responses without duplicating the content we can\\nuse Next to render the content. Then we will pass it through a npm module that returns\\ntext from HTML. It could also be interesting to do the same with something that returns\\nmarkdown if you want to keep more of semantic elements. In order to get the html from\\nNext we need to give it a fake response that we can read from afterwords. I will admit,\\nthis is a hack, but hey it works. \\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"javascript\\\"\\u003e\\u003cpre class=\\\"prism-code language-javascript\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eclass\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token class-name\\\"\\u003eFakeResponse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eextends\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token class-name\\\"\\u003eEventEmitter\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003econstructor\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003esuper\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003egetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003esetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e value\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e value\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ewrite\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e+=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eend\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e+=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eemit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;end\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe class above emulates the part of Node\\u0026#x27;s \\u003ccode\\u003ehttp.ServerResponse\\u003c/code\\u003e that is needed and emits\\n\\u003ccode\\u003eend\\u003c/code\\u003e when the response is done. This makes it possible to get the HTML generated by Next\\nand the headers set by Next. Below is a function that takes the same arguments as Next\\u0026#x27;s\\nhandle function, but it uses the fake response to get the generated HTML and pass that to\\n\\u003ca href=\\\"https://www.npmjs.com/package/html-to-text\\\"\\u003ehtml-to-text\\u003c/a\\u003e. It also copies all the headers from the fake response to the real response.\\n\\u003ccode\\u003eContent-Length\\u003c/code\\u003e and \\u003ccode\\u003eContent-Type\\u003c/code\\u003e is excluded from this copying since those will be\\ndifferent from what Next has set.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"javascript\\\"\\u003e\\u003cpre class=\\\"prism-code language-javascript\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandleWithText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fakeRes \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003enew\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token class-name\\\"\\u003eFakeResponse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  fakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eon\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;end\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token known-class-name class-name\\\"\\u003eObject\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ekeys\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003efakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;Content-Length\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026amp;\\u0026amp;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e key \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;Content-Type\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003egetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;Content-Type\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;text/plain\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003estatusCode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003estatusCode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e200\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eend\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ehtmlToText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efromString\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eWith that set up, the custom server code can be changed to the following. The code\\nbelow checks the accept header and uses the new \\u003ccode\\u003ehandleWithText\\u003c/code\\u003e function if the\\naccept header is set to \\u003ccode\\u003etext/plain\\u003c/code\\u003e or the user agent is \\u003ca href=\\\"https://curl.haxx.se/\\\"\\u003ecurl\\u003c/a\\u003e or \\u003ca href=\\\"https://httpie.org/\\\"\\u003ehttpie\\u003c/a\\u003e,\\nthe two CLI based http clients I know of, with an accept header set to \\u003ccode\\u003e*/*\\u003c/code\\u003e.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"javascript\\\"\\u003e\\u003cpre class=\\\"prism-code language-javascript\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eapp\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eprepare\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ethen\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateServer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eparse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eurl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token boolean\\\"\\u003etrue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eaccept\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;accept\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      accept \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e===\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;text/plain\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eaccept \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e===\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;*/*\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026amp;\\u0026amp;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003ecurl|HTTPie\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003etest\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;user-agent\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandleWithText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elisten\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eerr\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eerr\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ethrow\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e err\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token console class-name\\\"\\u003econsole\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elog\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e\\u0026gt; Ready on http://localhost:\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis would result in this output if it would be used on the front page of this website\\n(which would require me to rewrite it from Gatsby first, but that is another thing).\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\"\\u003e\\u003cpre class=\\\"prism-code language-undefined\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e$ curl -L rolflekang.com\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eRL [/]\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eHi, I am Rolf\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eI am an independent software developer who enjoys working\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ewith the whole stack. I occationally write posts [/writing], take photographs\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e[/photography], ride mountain bikes and snowboards. I do consulting work, if\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ethat is something you are looking I might be able to help out [/hire].\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis might not be the most useful feature, but it might be neat if your website\\ncontains information that people often would want to get from the terminal. Anyhow,\\nit is a fun little easter egg. \\u003c/p\\u003e\",\"scope\":{}},\"count\":1}]},{\"slug\":\"related-articles-with-gatsby\",\"layout\":\"post\",\"title\":\"Related articles with Gatsby\",\"date\":\"2019-02-20T00:00:00.000Z\",\"category\":\"Gatsby\",\"tags\":[\"gatsby\",\"javascript\"],\"relatedPosts\":[{\"slug\":\"twitter-cards-for-gatsby-posts\",\"layout\":\"post\",\"title\":\"Twitter cards for Gatsby posts\",\"date\":\"2019-02-26T00:00:00.000Z\",\"category\":\"Gatsby\",\"tags\":[\"gatsby\",\"canvas\",\"javascript\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"Previously this blog had the default article twitter card. I have seen some\\\\nother sited like \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://dev.to/\\\"\\n  }, \\\"dev.to\\\"), \\\" have these nice title images for the twitter cards.\\\\nI wanted to add these to this site for two reasons: they look kind of nice and\\\\nI would like to look into what it would take to create these. The idea I had\\\\nfor my own cards was for it to resemble the current header with RL and the\\\\npurple line and then the title of the post below it. This first version\\\\nwas written with Node.js and \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/Automattic/node-canvas\\\"\\n  }, \\\"node-canvas\\\"), \\\", maybe in the feature I will try\\\\nto convert it to native reason. Here is a preview of the twitter card for this\\\\npost.\\\"), mdx(\\\"p\\\", null, mdx(\\\"img\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"src\\\": \\\"/twitter-cards-for-gatsby-posts-link-card.png\\\",\\n    \\\"alt\\\": \\\"Twitter card for this post\\\"\\n  })), mdx(\\\"p\\\", null, \\\"Twitter has \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://cards-dev.twitter.com/validator\\\"\\n  }, \\\"a tool to validate\\\"), \\\" the cards for different\\\\npages. It will show how the card will be viewed in a tweet. Below is an\\\\nexample with this post.\\\"), mdx(\\\"p\\\", null, mdx(\\\"img\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"src\\\": \\\"/images/twitter-cards-for-gatsby-posts/card-screenshot.png\\\",\\n    \\\"alt\\\": \\\"Screenshot of a twitter card\\\"\\n  })), mdx(\\\"p\\\", null, \\\"So how to build this? Two things is necessary to get this to work. Creating\\\\nthe image and then add the meta tags to each posts according to the twitter\\\\ndocumentation.\\\"), mdx(\\\"p\\\", null, \\\"Firstly, let us look at the creating of the images themselves. \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/Automattic/node-canvas\\\"\\n  }, \\\"node-canvas\\\"), \\\"\\\\nis a nice tool to do drawing in Node.js that we want to store in a file. It\\\\ncan do many of the things possible to do with browser side canvas. Below is\\\\nthe implementation of the card for this site. What parts each section draws\\\\nis put in comments above them. In the end of the function the\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"canvas.toBuffer('image/png')\\\"), \\\" function is used to create a buffer that we\\\\ncan write to a file, which then is written to the file.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"const { createCanvas } = require('canvas');\\\\nconst fs = require('fs');\\\\n\\\\nfunction createLinkCards({ title, path }) {\\\\n  const canvas = createCanvas(600, 300);\\\\n  const context = canvas.getContext('2d');\\\\n\\\\n  // Create a white background\\\\n  context.fillStyle = 'white';\\\\n  context.fillRect(0, 0, canvas.width, canvas.height);\\\\n\\\\n  // Create the big RL in purple\\\\n  context.font = '100pt serif';\\\\n  context.fillStyle = '#6C3082';\\\\n  const header = context.measureText('RL');\\\\n  context.fillText('RL', (canvas.width - header.width) / 2, 160);\\\\n\\\\n  // Create the purple line across the image\\\\n  context.strokeStyle = '#6C3082';\\\\n  context.beginPath();\\\\n  context.lineTo(0, 180);\\\\n  context.lineTo(canvas.width, 180);\\\\n  context.lineWidth = 6;\\\\n  context.stroke();\\\\n\\\\n  // Insert the title text beneath the purple line\\\\n  setFontSizeForWidth(canvas.width * 0.75)\\\\n  context.fillStyle = 'black';\\\\n  const text = context.measureText(title);\\\\n  context.fillText(title, (canvas.width - text.width) / 2, 250);\\\\n\\\\n  fs.writeFileSync(path, canvas.toBuffer('image/png'));\\\\n};\\\\n\\\")), mdx(\\\"p\\\", null, \\\"There are a few things to take a closer look at. Several places\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"context.measureText\\\"), \\\" is used. It will take use the current font config to\\\\nmeasure how wide the string passed as the first argument will be. This is\\\\nuseful to center the text since we can use it to calculate the placement of\\\\nthe text. Furthermore, it can be used to decide the font size if we do not\\\\nknow the amount of text to render beforehand. In this case, that is done for\\\\nthe title with the function below, which will test any font size from 100pt\\\\nand downwards until the text fits within a certain limit. In the case of the\\\\ncard title it is set to 75 % of the canvas with.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"function setFontSizeForWidth(context, width) {\\\\n  let fontSize = 100;\\\\n  do {\\\\n    fontSize--;\\\\n    context.font = fontSize + 'pt serif';\\\\n  } while (context.measureText(title).width \\u003e width);\\\\n  return fontSize;\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The next thing needed is to call the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createLinkCards\\\"), \\\" in the same place\\\\nwhere \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createPage\\\"), \\\" is called in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatsby-node.js\\\"), \\\". In this example I have used\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\n  }, \\\"gatsby-transformer-remark\\\"), \\\" the code snippet below is looping over the result\\\\nof the graphql query similar to the documentation for\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\n  }, \\\"gatsby-transformer-remark\\\"), \\\".\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"posts.forEach(({ node }) =\\u003e {\\\\n  const { slug, layout, tags, title } = node.frontmatter;\\\\n  createPage({\\\\n    path: `/${slug}`,\\\\n    component: path.join(templatePath, 'blogpost.js'),\\\\n  });\\\\n  createLinkCards({\\\\n    title,\\\\n    path: path.join('public', `${slug}-link-card.png`),\\\\n  });\\\\n});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"After running \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatsby build\\\"), \\\" the public folder will now have a link card file\\\\nfor each post. Open one and check how it looks. Next step will be to link this\\\\nin the blogpost template. These things needs to be linked in meta tags in the\\\\nhead tag. To change metadata with Gatsby it is recommended to use react-helmet.\\\\nThere is a \\\", \\\"[guide on how to change metadata][gatsby-docs-metadata]\\\", \\\" in the Gatsby\\\\ndocumentation. In the component in the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"blogpost.js\\\"), \\\" template add the following\\\\nsnippet of code.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"\\u003cHelmet\\u003e\\\\n  \\u003cmeta name=\\\\\\\"twitter:title\\\\\\\" content={title} /\\u003e\\\\n  \\u003cmeta name=\\\\\\\"twitter:card\\\\\\\" content=\\\\\\\"summary_large_image\\\\\\\" /\\u003e\\\\n  \\u003cmeta name=\\\\\\\"twitter:author\\\\\\\" content=\\\\\\\"@\\u003cyour twitter handle\\u003e\\\\\\\" /\\u003e\\\\n  \\u003cmeta name=\\\\\\\"twitter:image:src\\\\\\\" content={`${window.location.origin}/${slug}-link-card.png`} /\\u003e\\\\n\\u003c/Helmet\\u003e\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This is all that is needed to get these nice cards in tweets with links to your blog.\\\\nIt might be worth looking into more meta tags for getting the same behavior on other\\\\nsites that have similar functionality. Remember that \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://cards-dev.twitter.com/validator\\\"\\n  }, \\\"twitter has a tool to test\\\"), \\\"\\\\nyour new cards.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003ePreviously this blog had the default article twitter card. I have seen some\\nother sited like \\u003ca href=\\\"https://dev.to/\\\"\\u003edev.to\\u003c/a\\u003e have these nice title images for the twitter cards.\\nI wanted to add these to this site for two reasons: they look kind of nice and\\nI would like to look into what it would take to create these. The idea I had\\nfor my own cards was for it to resemble the current header with RL and the\\npurple line and then the title of the post below it. This first version\\nwas written with Node.js and \\u003ca href=\\\"https://github.com/Automattic/node-canvas\\\"\\u003enode-canvas\\u003c/a\\u003e, maybe in the feature I will try\\nto convert it to native reason. Here is a preview of the twitter card for this\\npost.\\u003c/p\\u003e\\u003cp\\u003e\\u003cimg alt=\\\"Twitter card for this post\\\" src=\\\"/twitter-cards-for-gatsby-posts-link-card.png\\\"/\\u003e\\u003c/p\\u003e\\u003cp\\u003eTwitter has \\u003ca href=\\\"https://cards-dev.twitter.com/validator\\\"\\u003ea tool to validate\\u003c/a\\u003e the cards for different\\npages. It will show how the card will be viewed in a tweet. Below is an\\nexample with this post.\\u003c/p\\u003e\\u003cp\\u003e\\u003cimg alt=\\\"Screenshot of a twitter card\\\" src=\\\"/images/twitter-cards-for-gatsby-posts/card-screenshot.png\\\"/\\u003e\\u003c/p\\u003e\\u003cp\\u003eSo how to build this? Two things is necessary to get this to work. Creating\\nthe image and then add the meta tags to each posts according to the twitter\\ndocumentation.\\u003c/p\\u003e\\u003cp\\u003eFirstly, let us look at the creating of the images themselves. \\u003ca href=\\\"https://github.com/Automattic/node-canvas\\\"\\u003enode-canvas\\u003c/a\\u003e\\nis a nice tool to do drawing in Node.js that we want to store in a file. It\\ncan do many of the things possible to do with browser side canvas. Below is\\nthe implementation of the card for this site. What parts each section draws\\nis put in comments above them. In the end of the function the\\n\\u003ccode\\u003ecanvas.toBuffer(\\u0026#x27;image/png\\u0026#x27;)\\u003c/code\\u003e function is used to create a buffer that we\\ncan write to a file, which then is written to the file.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e createCanvas \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;canvas\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fs \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;fs\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateLinkCards\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e title\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e path \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateCanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e600\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e300\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e context \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003egetContext\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;2d\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e// Create a white background\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efillStyle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;white\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efillRect\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheight\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e// Create the big RL in purple\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efont\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;100pt serif\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efillStyle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;#6C3082\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e header \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emeasureText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;RL\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efillText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;RL\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ecanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e header\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e2\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e160\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e// Create the purple line across the image\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003estrokeStyle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;#6C3082\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ebeginPath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elineTo\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e180\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elineTo\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ecanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e180\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003elineWidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e6\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003estroke\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e// Insert the title text beneath the purple line\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003esetFontSizeForWidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ecanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e*\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0.75\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efillStyle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;black\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e text \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emeasureText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efillText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ecanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e text\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e2\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e250\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  fs\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ewriteFileSync\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003epath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003etoBuffer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;image/png\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThere are a few things to take a closer look at. Several places\\n\\u003ccode\\u003econtext.measureText\\u003c/code\\u003e is used. It will take use the current font config to\\nmeasure how wide the string passed as the first argument will be. This is\\nuseful to center the text since we can use it to calculate the placement of\\nthe text. Furthermore, it can be used to decide the font size if we do not\\nknow the amount of text to render beforehand. In this case, that is done for\\nthe title with the function below, which will test any font size from 100pt\\nand downwards until the text fits within a certain limit. In the case of the\\ncard title it is set to 75 % of the canvas with.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003esetFontSizeForWidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003econtext\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e width\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003elet\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fontSize \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e100\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003edo\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    fontSize\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e--\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efont\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fontSize \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e+\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;pt serif\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ewhile\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003econtext\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emeasureText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e width\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fontSize\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe next thing needed is to call the \\u003ccode\\u003ecreateLinkCards\\u003c/code\\u003e in the same place\\nwhere \\u003ccode\\u003ecreatePage\\u003c/code\\u003e is called in \\u003ccode\\u003egatsby-node.js\\u003c/code\\u003e. In this example I have used\\n\\u003ca href=\\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\u003egatsby-transformer-remark\\u003c/a\\u003e the code snippet below is looping over the result\\nof the graphql query similar to the documentation for\\n\\u003ca href=\\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\u003egatsby-transformer-remark\\u003c/a\\u003e.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eposts\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e layout\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e title \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreatePage\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    component\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etemplatePath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;blogpost.js\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateLinkCards\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    title\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;public\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e-link-card.png\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eAfter running \\u003ccode\\u003egatsby build\\u003c/code\\u003e the public folder will now have a link card file\\nfor each post. Open one and check how it looks. Next step will be to link this\\nin the blogpost template. These things needs to be linked in meta tags in the\\nhead tag. To change metadata with Gatsby it is recommended to use react-helmet.\\nThere is a \\u003c!-- --\\u003e[guide on how to change metadata][gatsby-docs-metadata]\\u003c!-- --\\u003e in the Gatsby\\ndocumentation. In the component in the \\u003ccode\\u003eblogpost.js\\u003c/code\\u003e template add the following\\nsnippet of code.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eHelmet\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emeta name\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;twitter:title\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e content\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emeta name\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;twitter:card\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e content\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;summary_large_image\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emeta name\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;twitter:author\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e content\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;@\\u0026lt;your twitter handle\\u0026gt;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emeta name\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;twitter:image:src\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e content\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003ewindow\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003elocation\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eorigin\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e-link-card.png\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eHelmet\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis is all that is needed to get these nice cards in tweets with links to your blog.\\nIt might be worth looking into more meta tags for getting the same behavior on other\\nsites that have similar functionality. Remember that \\u003ca href=\\\"https://cards-dev.twitter.com/validator\\\"\\u003etwitter has a tool to test\\u003c/a\\u003e\\nyour new cards.\\u003c/p\\u003e\",\"scope\":{}},\"count\":2},{\"slug\":\"testing-simple-graphql-services\",\"layout\":\"post\",\"date\":\"2017-05-28T00:00:00.000Z\",\"title\":\"Testing simple GraphQL services\",\"tags\":[\"graphql\",\"testing\",\"javascript\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"I recently created a \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/relekang/micro-rss-parser\\\"\\n  }, \\\"GraphQL based microservice\\\"), \\\" for parsing RSS-feeds. I wanted\\\\nto write something down about the approach I took to test the API. The service is read only, as\\\\nthere is little we can push out into others RSS feeds.\\\"), mdx(\\\"p\\\", null, \\\"GraphQL returns 200 status for almost everything. Whenever error occurs it only pushes the error\\\\nto a list of errors that is passed to the payload. This is because it is designed to be resillient\\\\nand give as much information as it can even when something fails. This also means that we can\\\\nabstract away the most part of successful and unsuccessful requests in our tests and still get\\\\nvalid tests. Thus, when testing the API layer of this service the only thing that matters is the\\\\nquery and the response.\\\"), mdx(\\\"p\\\", null, \\\"Services like micro-rss-parser has another characteristic that makes them easy to test. No\\\\nauthentication or authorization, which means that we do not need to check different types of errors\\\\nbased on different states of authorization. Thus, it is only the GraphQL query and the response\\\\nthat matters.\\\"), mdx(\\\"p\\\", null, \\\"I created a helper that allowed me to write tests in an easy way with focus on the queries. The\\\\ntests look like this:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"testGraphQlService`{\\\\n  feed(url=\\\\\\\"https://rolflekang.com/feed.xml\\\\\\\") {\\\\n    entries {\\\\n      title\\\\n    }\\\\n  }\\\\n}\\\\n `\\\\n\\\")), mdx(\\\"p\\\", null, \\\"Under the hood that helper creates a \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://facebook.github.io/jest/\\\"\\n  }, \\\"jest\\\"), \\\" test that asserts to a snapshot with jests handy\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://facebook.github.io/jest/docs/expect.html#tomatchsnapshotoptionalstring\\\"\\n  }, \\\"toMatchSnapshot()\\\"), \\\". This generates a snapshot file for every test file with a map of responses\\\\nwith the query as key. Thus, reviewing these tests and test changes is a bliss. Below is the\\\\nimplementation of the test helper as it was in micro-rss-parser at the time when this was written.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"const request = require('superagent')\\\\n\\\\nfunction createTestServer() {\\\\n  /*\\\\n   * Set up a test instance and return url.\\\\n   * For micro-rss-parser I used this https://github.com/zeit/micro#testing\\\\n   */\\\\n}\\\\n\\\\nfunction testGraphqlApi (strings, ...args) {\\\\n  const query = String.raw(strings, ...args)\\\\n  test(query, async () =\\u003e {\\\\n    let response\\\\n    const url = await createTestServer()\\\\n\\\\n    try {\\\\n      response = (await request\\\\n        .post(url)\\\\n        .set('User-Agent', 'graphql-test')\\\\n        .set('Content-Type', 'application/json')\\\\n        .send(JSON.stringify({ query }))\\\\n      ).body\\\\n    } catch (error) {\\\\n      if (!error.response) {\\\\n        throw error\\\\n      }\\\\n\\\\n      response = error.response.body\\\\n    }\\\\n\\\\n    expect(response).toMatchSnapshot()\\\\n  })\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"It has made it easy to write good and readable API tests of the little microservice. However,\\\\nkeep in mind that this is a sufficient solution due to the assumptions discussed earlier so it\\\\nmight not be a fit approach for you project, nevertheless, feel free to take the helper. Let me\\\\nknow how it works out for you \\\\u270C\\\\uFE0F\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eI recently created a \\u003ca href=\\\"https://github.com/relekang/micro-rss-parser\\\"\\u003eGraphQL based microservice\\u003c/a\\u003e for parsing RSS-feeds. I wanted\\nto write something down about the approach I took to test the API. The service is read only, as\\nthere is little we can push out into others RSS feeds.\\u003c/p\\u003e\\u003cp\\u003eGraphQL returns 200 status for almost everything. Whenever error occurs it only pushes the error\\nto a list of errors that is passed to the payload. This is because it is designed to be resillient\\nand give as much information as it can even when something fails. This also means that we can\\nabstract away the most part of successful and unsuccessful requests in our tests and still get\\nvalid tests. Thus, when testing the API layer of this service the only thing that matters is the\\nquery and the response.\\u003c/p\\u003e\\u003cp\\u003eServices like micro-rss-parser has another characteristic that makes them easy to test. No\\nauthentication or authorization, which means that we do not need to check different types of errors\\nbased on different states of authorization. Thus, it is only the GraphQL query and the response\\nthat matters.\\u003c/p\\u003e\\u003cp\\u003eI created a helper that allowed me to write tests in an easy way with focus on the queries. The\\ntests look like this:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etestGraphQlService\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e{\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e  feed(url=\\u0026quot;https://rolflekang.com/feed.xml\\u0026quot;) {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e    entries {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      title\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e    }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e  }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e}\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eUnder the hood that helper creates a \\u003ca href=\\\"https://facebook.github.io/jest/\\\"\\u003ejest\\u003c/a\\u003e test that asserts to a snapshot with jests handy\\n\\u003ca href=\\\"http://facebook.github.io/jest/docs/expect.html#tomatchsnapshotoptionalstring\\\"\\u003etoMatchSnapshot()\\u003c/a\\u003e. This generates a snapshot file for every test file with a map of responses\\nwith the query as key. Thus, reviewing these tests and test changes is a bliss. Below is the\\nimplementation of the test helper as it was in micro-rss-parser at the time when this was written.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e request \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;superagent\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateTestServer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e/*\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e   * Set up a test instance and return url.\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e   * For micro-rss-parser I used this https://github.com/zeit/micro#testing\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e   */\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003etestGraphqlApi\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003estrings\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eargs\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e query \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token known-class-name class-name\\\"\\u003eString\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eraw\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003estrings\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eargs\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003etest\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003equery\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003easync\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003elet\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e url \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eawait\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateTestServer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003etry\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eawait\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e request\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003epost\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eurl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eset\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;User-Agent\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;graphql-test\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eset\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;Content-Type\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;application/json\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esend\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token known-class-name class-name\\\"\\u003eJSON\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003estringify\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e query \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ebody\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ecatch\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eerror\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eerror\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eresponse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ethrow\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e error\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e error\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eresponse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ebody\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eexpect\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eresponse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003etoMatchSnapshot\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eIt has made it easy to write good and readable API tests of the little microservice. However,\\nkeep in mind that this is a sufficient solution due to the assumptions discussed earlier so it\\nmight not be a fit approach for you project, nevertheless, feel free to take the helper. Let me\\nknow how it works out for you \\u003c/p\\u003e\",\"scope\":{}},\"count\":1},{\"slug\":\"serving-plain-text-with-nextjs\",\"layout\":\"post\",\"title\":\"Serving text/plain for curl with Next\",\"date\":\"2020-05-26T00:00:00.000Z\",\"category\":\"nextjs\",\"tags\":[\"nextjs\",\"javascript\",\"curl\",\"nodejs\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"I have recently been trying out the \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://nextjs.org/\\\"\\n  }, \\\"Next.js\\\"), \\\" for some projects again. I have\\\\nhad earlier projects where I have been really happy with Next, but for some time now\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/\\\"\\n  }, \\\"Gatsby\\\"), \\\" has been my go to. One of the big things separating these two are that Next\\\\nhas runtime server side rendering and thought it would be a neat to utilize this to\\\\nhave separate content-types based on the client. The idea is that if the client is a\\\\nCLI based client like \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://curl.haxx.se/\\\"\\n  }, \\\"curl\\\"), \\\" the server should respond with a plain text response.\\\\nThis should not be the case if the accept header is set to something specific. The\\\\ndefault accept header in curl is \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"*/*\\\"), \\\".\\\"), mdx(\\\"p\\\", null, \\\"Next has a feature where you can drop in your own http server and still let the\\\\nframework handle the rendering. This is helpful in many situations like protecting\\\\nthings with login or using Next as a part of an already existing application. Below is\\\\na minimal custom server. The highlighted line is where the rendering of the response\\\\nis handed of to Next.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-javascript\\\"\\n  }, \\\"const { createServer } = require(\\\\\\\"http\\\\\\\");\\\\nconst { parse } = require(\\\\\\\"url\\\\\\\");\\\\nconst next = require(\\\\\\\"next\\\\\\\");\\\\n\\\\nconst dev = process.env.NODE_ENV !== \\\\\\\"production\\\\\\\";\\\\nconst app = next({ dev });\\\\nconst handle = app.getRequestHandler();\\\\nconst port = parseInt(process.env.PORT || \\\\\\\"3000\\\\\\\");\\\\n\\\\napp.prepare().then(() =\\u003e {\\\\n  createServer((req, res) =\\u003e {\\\\n    const parsedUrl = parse(req.url, true);\\\\n    // highlight-next-line\\\\n    handle(req, res, parsedUrl);\\\\n  }).listen(port, err =\\u003e {\\\\n    if (err) throw err;\\\\n    console.log(`\\u003e Ready on http://localhost:${port}`);\\\\n  });\\\\n});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This custom server does nothing that the default Next server does not, so putting this\\\\na project does not make very much sense unless one adds something more. That said, if\\\\nthis is put in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"server.js\\\"), \\\" in a Next project running \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"node server.js\\\"), \\\" in dev and\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"NODE_ENV=production node server.js\\\"), \\\" in production should work nicely.\\\"), mdx(\\\"p\\\", null, \\\"To achieve the custom content type responses without duplicating the content we can\\\\nuse Next to render the content. Then we will pass it through a npm module that returns\\\\ntext from HTML. It could also be interesting to do the same with something that returns\\\\nmarkdown if you want to keep more of semantic elements. In order to get the html from\\\\nNext we need to give it a fake response that we can read from afterwords. I will admit,\\\\nthis is a hack, but hey it works. \\\\uD83E\\\\uDD37\\\\u200D\\\\u2642\\\\uFE0F\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-javascript\\\"\\n  }, \\\"class FakeResponse extends EventEmitter {\\\\n  constructor() {\\\\n    super();\\\\n    this.headers = {};\\\\n    this.data = \\\\\\\"\\\\\\\";\\\\n  }\\\\n\\\\n  getHeader(key) {\\\\n    return this.headers[key];\\\\n  }\\\\n\\\\n  setHeader(key, value) {\\\\n    return (this.headers[key] = value);\\\\n  }\\\\n\\\\n  write(data) {\\\\n    this.data += data;\\\\n  }\\\\n\\\\n  end(data) {\\\\n    this.data += data;\\\\n    this.emit(\\\\\\\"end\\\\\\\", data);\\\\n  }\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The class above emulates the part of Node's \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"http.ServerResponse\\\"), \\\" that is needed and emits\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"end\\\"), \\\" when the response is done. This makes it possible to get the HTML generated by Next\\\\nand the headers set by Next. Below is a function that takes the same arguments as Next's\\\\nhandle function, but it uses the fake response to get the generated HTML and pass that to\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.npmjs.com/package/html-to-text\\\"\\n  }, \\\"html-to-text\\\"), \\\". It also copies all the headers from the fake response to the real response.\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Content-Length\\\"), \\\" and \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Content-Type\\\"), \\\" is excluded from this copying since those will be\\\\ndifferent from what Next has set.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-javascript\\\"\\n  }, \\\"function handleWithText(req, res, parsedUrl) {\\\\n  const fakeRes = new FakeResponse();\\\\n  fakeRes.on(\\\\\\\"end\\\\\\\", data =\\u003e {\\\\n    Object.keys(fakeRes.headers).forEach(key =\\u003e {\\\\n      if (key !== \\\\\\\"Content-Length\\\\\\\" \\u0026\\u0026 key !== \\\\\\\"Content-Type\\\\\\\") {\\\\n        res.setHeader(key, fakeRes.getHeader(key));\\\\n      }\\\\n    });\\\\n    res.setHeader(\\\\\\\"Content-Type\\\\\\\", \\\\\\\"text/plain\\\\\\\");\\\\n    res.statusCode = fakeRes.statusCode || 200\\\\n    res.end(htmlToText.fromString(data));\\\\n  });\\\\n  handle(req, fakeRes, parsedUrl);\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"With that set up, the custom server code can be changed to the following. The code\\\\nbelow checks the accept header and uses the new \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"handleWithText\\\"), \\\" function if the\\\\naccept header is set to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"text/plain\\\"), \\\" or the user agent is \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://curl.haxx.se/\\\"\\n  }, \\\"curl\\\"), \\\" or \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://httpie.org/\\\"\\n  }, \\\"httpie\\\"), \\\",\\\\nthe two CLI based http clients I know of, with an accept header set to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"*/*\\\"), \\\".\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-javascript\\\"\\n  }, \\\"app.prepare().then(() =\\u003e {\\\\n  createServer((req, res) =\\u003e {\\\\n    const parsedUrl = parse(req.url, true);\\\\n    const [accept] = (req.headers[\\\\\\\"accept\\\\\\\"] || \\\\\\\"\\\\\\\").split(\\\\\\\";\\\\\\\");\\\\n\\\\n    if (\\\\n      accept === \\\\\\\"text/plain\\\\\\\" ||\\\\n      (accept === \\\\\\\"*/*\\\\\\\" \\u0026\\u0026 /curl|HTTPie/.test(req.headers[\\\\\\\"user-agent\\\\\\\"] || \\\\\\\"\\\\\\\"))\\\\n    ) {\\\\n      handleWithText(req, res, parsedUrl);\\\\n    } else {\\\\n      handle(req, res, parsedUrl);\\\\n    }\\\\n  }).listen(port, err =\\u003e {\\\\n    if (err) throw err;\\\\n    console.log(`\\u003e Ready on http://localhost:${port}`);\\\\n  });\\\\n});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This would result in this output if it would be used on the front page of this website\\\\n(which would require me to rewrite it from Gatsby first, but that is another thing).\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\"\\n  }, \\\"$ curl -L rolflekang.com\\\\nRL [/]\\\\n\\\\nHi, I am Rolf\\\\n\\\\nI am an independent software developer who enjoys working\\\\nwith the whole stack. I occationally write posts [/writing], take photographs\\\\n[/photography], ride mountain bikes and snowboards. I do consulting work, if\\\\nthat is something you are looking I might be able to help out [/hire].\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This might not be the most useful feature, but it might be neat if your website\\\\ncontains information that people often would want to get from the terminal. Anyhow,\\\\nit is a fun little easter egg. \\\\uD83D\\\\uDC23\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eI have recently been trying out the \\u003ca href=\\\"https://nextjs.org/\\\"\\u003eNext.js\\u003c/a\\u003e for some projects again. I have\\nhad earlier projects where I have been really happy with Next, but for some time now\\n\\u003ca href=\\\"https://www.gatsbyjs.org/\\\"\\u003eGatsby\\u003c/a\\u003e has been my go to. One of the big things separating these two are that Next\\nhas runtime server side rendering and thought it would be a neat to utilize this to\\nhave separate content-types based on the client. The idea is that if the client is a\\nCLI based client like \\u003ca href=\\\"https://curl.haxx.se/\\\"\\u003ecurl\\u003c/a\\u003e the server should respond with a plain text response.\\nThis should not be the case if the accept header is set to something specific. The\\ndefault accept header in curl is \\u003ccode\\u003e*/*\\u003c/code\\u003e.\\u003c/p\\u003e\\u003cp\\u003eNext has a feature where you can drop in your own http server and still let the\\nframework handle the rendering. This is helpful in many situations like protecting\\nthings with login or using Next as a part of an already existing application. Below is\\na minimal custom server. The highlighted line is where the rendering of the response\\nis handed of to Next.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"javascript\\\"\\u003e\\u003cpre class=\\\"prism-code language-javascript\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e createServer \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;http\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parse \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;url\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e next \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;next\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e dev \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e process\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eenv\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token constant\\\"\\u003eNODE_ENV\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;production\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e app \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003enext\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e dev \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e handle \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e app\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003egetRequestHandler\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e port \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eparseInt\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eprocess\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eenv\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token constant\\\"\\u003ePORT\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;3000\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eapp\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eprepare\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ethen\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateServer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eparse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eurl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token boolean\\\"\\u003etrue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elisten\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eerr\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eerr\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ethrow\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e err\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token console class-name\\\"\\u003econsole\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elog\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e\\u0026gt; Ready on http://localhost:\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis custom server does nothing that the default Next server does not, so putting this\\na project does not make very much sense unless one adds something more. That said, if\\nthis is put in \\u003ccode\\u003eserver.js\\u003c/code\\u003e in a Next project running \\u003ccode\\u003enode server.js\\u003c/code\\u003e in dev and\\n\\u003ccode\\u003eNODE_ENV=production node server.js\\u003c/code\\u003e in production should work nicely.\\u003c/p\\u003e\\u003cp\\u003eTo achieve the custom content type responses without duplicating the content we can\\nuse Next to render the content. Then we will pass it through a npm module that returns\\ntext from HTML. It could also be interesting to do the same with something that returns\\nmarkdown if you want to keep more of semantic elements. In order to get the html from\\nNext we need to give it a fake response that we can read from afterwords. I will admit,\\nthis is a hack, but hey it works. \\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"javascript\\\"\\u003e\\u003cpre class=\\\"prism-code language-javascript\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eclass\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token class-name\\\"\\u003eFakeResponse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eextends\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token class-name\\\"\\u003eEventEmitter\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003econstructor\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003esuper\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003egetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003esetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e value\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e value\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ewrite\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e+=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eend\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e+=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eemit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;end\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe class above emulates the part of Node\\u0026#x27;s \\u003ccode\\u003ehttp.ServerResponse\\u003c/code\\u003e that is needed and emits\\n\\u003ccode\\u003eend\\u003c/code\\u003e when the response is done. This makes it possible to get the HTML generated by Next\\nand the headers set by Next. Below is a function that takes the same arguments as Next\\u0026#x27;s\\nhandle function, but it uses the fake response to get the generated HTML and pass that to\\n\\u003ca href=\\\"https://www.npmjs.com/package/html-to-text\\\"\\u003ehtml-to-text\\u003c/a\\u003e. It also copies all the headers from the fake response to the real response.\\n\\u003ccode\\u003eContent-Length\\u003c/code\\u003e and \\u003ccode\\u003eContent-Type\\u003c/code\\u003e is excluded from this copying since those will be\\ndifferent from what Next has set.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"javascript\\\"\\u003e\\u003cpre class=\\\"prism-code language-javascript\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandleWithText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fakeRes \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003enew\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token class-name\\\"\\u003eFakeResponse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  fakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eon\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;end\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token known-class-name class-name\\\"\\u003eObject\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ekeys\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003efakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;Content-Length\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026amp;\\u0026amp;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e key \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;Content-Type\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003egetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;Content-Type\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;text/plain\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003estatusCode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003estatusCode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e200\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eend\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ehtmlToText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efromString\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eWith that set up, the custom server code can be changed to the following. The code\\nbelow checks the accept header and uses the new \\u003ccode\\u003ehandleWithText\\u003c/code\\u003e function if the\\naccept header is set to \\u003ccode\\u003etext/plain\\u003c/code\\u003e or the user agent is \\u003ca href=\\\"https://curl.haxx.se/\\\"\\u003ecurl\\u003c/a\\u003e or \\u003ca href=\\\"https://httpie.org/\\\"\\u003ehttpie\\u003c/a\\u003e,\\nthe two CLI based http clients I know of, with an accept header set to \\u003ccode\\u003e*/*\\u003c/code\\u003e.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"javascript\\\"\\u003e\\u003cpre class=\\\"prism-code language-javascript\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eapp\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eprepare\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ethen\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateServer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eparse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eurl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token boolean\\\"\\u003etrue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eaccept\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;accept\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      accept \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e===\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;text/plain\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eaccept \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e===\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;*/*\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026amp;\\u0026amp;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003ecurl|HTTPie\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003etest\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;user-agent\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandleWithText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elisten\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eerr\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eerr\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ethrow\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e err\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token console class-name\\\"\\u003econsole\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elog\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e\\u0026gt; Ready on http://localhost:\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis would result in this output if it would be used on the front page of this website\\n(which would require me to rewrite it from Gatsby first, but that is another thing).\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\"\\u003e\\u003cpre class=\\\"prism-code language-undefined\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e$ curl -L rolflekang.com\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eRL [/]\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eHi, I am Rolf\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eI am an independent software developer who enjoys working\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ewith the whole stack. I occationally write posts [/writing], take photographs\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e[/photography], ride mountain bikes and snowboards. I do consulting work, if\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ethat is something you are looking I might be able to help out [/hire].\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis might not be the most useful feature, but it might be neat if your website\\ncontains information that people often would want to get from the terminal. Anyhow,\\nit is a fun little easter egg. \\u003c/p\\u003e\",\"scope\":{}},\"count\":1}]},{\"slug\":\"creating-a-cli-with-reason-native\",\"layout\":\"post\",\"date\":\"2019-02-12T00:00:00.000Z\",\"title\":\"Creating a CLI with Reason native\",\"tags\":[\"reasonml\",\"native\"],\"relatedPosts\":[]},{\"slug\":\"testing-simple-graphql-services\",\"layout\":\"post\",\"date\":\"2017-05-28T00:00:00.000Z\",\"title\":\"Testing simple GraphQL services\",\"tags\":[\"graphql\",\"testing\",\"javascript\"],\"relatedPosts\":[{\"slug\":\"rmoq\",\"layout\":\"post\",\"title\":\"rmoq - a request mock cache\",\"date\":\"2014-12-30T00:00:00.000Z\",\"category\":\"Python\",\"tags\":[\"python\",\"testing\",\"mocking\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"While working on \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://feedhuddler.com\\\"\\n  }, \\\"feedhuddler.com\\\"), \\\" there are tests that test the feedparsing functionality. It uses the actual feeds from their origins, which I think is ok for this situation. If the feeds are not longer parseable by feedhuddler the continous integration will fail and I can look into it. It could be managed by some downloaded feeds and mocking of the requests. However, I wouldn't feel comfortable by putting other peoples content in the feedhuddler repo. Furthermore, it should be easy to add a feed that is reported to break the parser without much work. The tests can take a while on the continous integration server without it beeing a big deal, but locally the time consuming tests makes it cumbersome to work test driven or to work with the tests at all.\\\"), mdx(\\\"p\\\", null, mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/relekang/rmoq\\\"\\n  }, mdx(\\\"strong\\\", {\\n    parentName: \\\"a\\\"\\n  }, \\\"rmoq\\\")), \\\" was created to work around that problem. It listen on all requests made by the \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://docs.python-requests.org/en/latest/\\\"\\n  }, \\\"requests\\\"), \\\" framework and intercepts them. If a request is already been cached in the cache folder it creates a response based on a local file. On the other hand, if no file exists for that url it will perform the request and save the content into a file and then return the response. Thus, if the files are already there the tests will run faster and no manual work is needed to create the local files.\\\"), mdx(\\\"p\\\", null, \\\"A nice side-effect of using files as storage is that they can be added to the version control repo. In the case of the feedhuddler tests it is not wanted behaviour, but in other cases it might be just what you want to add these files to code repository.\\\"), mdx(\\\"p\\\", null, \\\"The code can be found on \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/relekang/rmoq\\\"\\n  }, \\\"github.com/relekang/rmoq\\\"), \\\" and it can be installed with pip:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-bash\\\"\\n  }, \\\"pip install rmoq\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The basic way to use it is just to add a decorator to your test:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"@rmoq.activate('test_fixtures')\\\\ndef test_remote_call():\\\\n    response = requests.get('http://example.com')\\\\n    assert response.body == 'Example'\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The path parameter sent in above is optional, and if left out the path will then be set to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"fixtures/\\\"), \\\". The test function is then wrapped in a with statement that intercepts all requests and either load them from file or fetches the content from the url and saves it to a file before returning the response.\\\"), mdx(\\\"p\\\", null, \\\"The feedhuddler tests went from \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Ran 21 tests in 41.394s\\\"), \\\" to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Ran 21 tests in 1.942s\\\"), \\\" which is quite a speedup and the tests suite is much more pleasant to work on.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eWhile working on \\u003ca href=\\\"https://feedhuddler.com\\\"\\u003efeedhuddler.com\\u003c/a\\u003e there are tests that test the feedparsing functionality. It uses the actual feeds from their origins, which I think is ok for this situation. If the feeds are not longer parseable by feedhuddler the continous integration will fail and I can look into it. It could be managed by some downloaded feeds and mocking of the requests. However, I wouldn\\u0026#x27;t feel comfortable by putting other peoples content in the feedhuddler repo. Furthermore, it should be easy to add a feed that is reported to break the parser without much work. The tests can take a while on the continous integration server without it beeing a big deal, but locally the time consuming tests makes it cumbersome to work test driven or to work with the tests at all.\\u003c/p\\u003e\\u003cp\\u003e\\u003ca href=\\\"https://github.com/relekang/rmoq\\\"\\u003e\\u003cstrong\\u003ermoq\\u003c/strong\\u003e\\u003c/a\\u003e was created to work around that problem. It listen on all requests made by the \\u003ca href=\\\"http://docs.python-requests.org/en/latest/\\\"\\u003erequests\\u003c/a\\u003e framework and intercepts them. If a request is already been cached in the cache folder it creates a response based on a local file. On the other hand, if no file exists for that url it will perform the request and save the content into a file and then return the response. Thus, if the files are already there the tests will run faster and no manual work is needed to create the local files.\\u003c/p\\u003e\\u003cp\\u003eA nice side-effect of using files as storage is that they can be added to the version control repo. In the case of the feedhuddler tests it is not wanted behaviour, but in other cases it might be just what you want to add these files to code repository.\\u003c/p\\u003e\\u003cp\\u003eThe code can be found on \\u003ca href=\\\"https://github.com/relekang/rmoq\\\"\\u003egithub.com/relekang/rmoq\\u003c/a\\u003e and it can be installed with pip:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"bash\\\"\\u003e\\u003cpre class=\\\"prism-code language-bash\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003epip \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003einstall\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e rmoq\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe basic way to use it is just to add a decorator to your test:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token decorator annotation punctuation\\\"\\u003e@rmoq\\u003c/span\\u003e\\u003cspan class=\\\"token decorator annotation punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token decorator annotation punctuation\\\"\\u003eactivate\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;test_fixtures\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003edef\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003etest_remote_call\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e requests\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eget\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;http://example.com\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eassert\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ebody \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;Example\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe path parameter sent in above is optional, and if left out the path will then be set to \\u003ccode\\u003efixtures/\\u003c/code\\u003e. The test function is then wrapped in a with statement that intercepts all requests and either load them from file or fetches the content from the url and saves it to a file before returning the response.\\u003c/p\\u003e\\u003cp\\u003eThe feedhuddler tests went from \\u003ccode\\u003eRan 21 tests in 41.394s\\u003c/code\\u003e to \\u003ccode\\u003eRan 21 tests in 1.942s\\u003c/code\\u003e which is quite a speedup and the tests suite is much more pleasant to work on.\\u003c/p\\u003e\",\"scope\":{}},\"count\":1},{\"slug\":\"related-articles-with-gatsby\",\"layout\":\"post\",\"title\":\"Related articles with Gatsby\",\"date\":\"2019-02-20T00:00:00.000Z\",\"category\":\"Gatsby\",\"tags\":[\"gatsby\",\"javascript\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"This website is created with \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/\\\"\\n  }, \\\"Gatsby\\\"), \\\", Reasonml and a little bit of typescript.\\\\nIn this post I will explain how I built the \\\\\\\"Related articles\\\\\\\" feature that can be\\\\nseen on the bottom of some of the articles. I have kept all the examples in this\\\\npost in javascript so it will be helpful to more people.\\\"), mdx(\\\"p\\\", null, \\\"First of we need to define what makes two posts or articles related. On this site\\\\nand for this article I am defining it as articles that has the same tags. In the\\\\nfrontmatter I have a comma separated list of tags. Below is an example:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-yaml\\\"\\n  }, \\\"title: Related articles with Gatsby\\\\nslug: related-articles-with-gatsby\\\\ntags: gatsby,javascript\\\\ndate: 2019-02-20\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This blog is based on a setup with \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\n  }, \\\"gatsby-transformer-remark\\\"), \\\" which has the\\\\nfollowing in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatsby-node.js\\\"), \\\" to generate the pages. The first part fetches all\\\\nthe articles and the necessary metadata with Graphql. The second part loops over\\\\nall the articles and then creates pages for them with the Gatsby \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createPage\\\"), \\\"\\\\nfunction.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"exports.createPages = async ({ graphql, actions }) =\\u003e {\\\\n  const { createPage } = actions;\\\\n  const templatePath = path.resolve('./src/templates/');\\\\n\\\\n  const response = await graphql(\\\\n    `\\\\n      query {\\\\n        allMarkdownRemark {\\\\n          edges {\\\\n            node {\\\\n              frontmatter {\\\\n                layout\\\\n                slug\\\\n                date(formatString: \\\\\\\"DD.MM.YYYY\\\\\\\")\\\\n              }\\\\n            }\\\\n          }\\\\n        }\\\\n      }\\\\n    `\\\\n  );\\\\n\\\\n  const postEdges = response.data.allMarkdownRemark.edges\\\\n\\\\n  postEdges.forEach(({ node }) =\\u003e {\\\\n    const { slug, layout, tags } = node.frontmatter;\\\\n    createPage({\\\\n      path: `/${slug}`,\\\\n      component: path.join(templatePath, `${layout}.tsx`),\\\\n      context: { slug },\\\\n    });\\\\n  });\\\\n\\\")), mdx(\\\"p\\\", null, \\\"In order to populate the data for related articles we will add the data as\\\\ncontext parameters in the createPage call. However, first we need to find\\\\nthose articles. The code below will build a map of tags and articles with those\\\\ntags.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"const articlesByTags = postEdges.reduce((lastValue, { node }) =\\u003e {\\\\n  const tags = node.frontmatter.tags || \\\\\\\"\\\\\\\";\\\\n  tags.split(/, ?/).forEach(tag =\\u003e {\\\\n    if (lastValue[tag]) {\\\\n      lastValue[tag].push(node.frontmatter);\\\\n    } else {\\\\n      lastValue[tag] = [node.frontmatter];\\\\n    }\\\\n  });\\\\n  return lastValue;\\\\n}, {});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The result will be something like the following, where \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"{...}\\\"), \\\" is the\\\\nfrontmatter of a post. This we can use to look up all the related articles for\\\\none post.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"{\\\\n  gatsby: [{...}, {...}],\\\\n  cli: [{...}, {...}]\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"articlesByTags\\\"), \\\" is useful for looking up all the articles that has a list of tags. Let\\\\nus look at a possible implementation for that.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"const _ = require(\\\\\\\"lodash/fp\\\\\\\");\\\\n\\\\nfunction findRelatedArticles(slug, tags) {\\\\n  return _.flow([\\\\n    _.split(/, ?/),\\\\n    _.map(tag =\\u003e articlesByTags[tag]),\\\\n    _.flatten,\\\\n    _.filter(node =\\u003e node.slug !== slug),\\\\n    _.uniqBy(node =\\u003e node.slug)\\\\n  ])(tags);\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"In this function the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"_\\\"), \\\" is the\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/lodash/lodash/wiki/FP-Guide\\\"\\n  }, \\\"functional programming(fp) version of lodash\\\"), \\\", which has this neat\\\\nutility called flow for grouping actions together. Flow returns a function when\\\\ncalled will perform all the operations in the array. Each operation will have\\\\nto be a function and the return value of each of them will be passed as the\\\\nargument to the next one. The function above will first split the comma\\\\nseparated string to a list and then perform a map on that list of tags to a\\\\nlist of lists of articles. Since we now have a list of lists it is necessary to\\\\nflatten it, which will result in a list of articles. The next step is to filter\\\\nout the current post since we only want other articles than the one that is\\\\ncurrently viewed. In the last step we want to remove any duplicate articles and\\\\ncan do that by selecting unique elements based on the slug.\\\"), mdx(\\\"p\\\", null, \\\"To finish the data setup it is necessary to add the related articles to the\\\\ncontext in the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createPage\\\"), \\\" call.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"createPage({\\\\n  path: `/${slug}`,\\\\n  component: path.join(templatePath, `${layout}.tsx`),\\\\n  context: {\\\\n    slug,\\\\n    // highlight-next-line\\\\n    relatedArticles: findRelatedArticles(slug, tags),\\\\n  },\\\\n});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatsby-node.js\\\"), \\\" file should look something like the following now. In the\\\\ncode below the changes is highlighted.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"exports.createPages = async ({ graphql, actions }) =\\u003e {\\\\n  const { createPage } = actions;\\\\n  const templatePath = path.resolve('./src/templates/');\\\\n\\\\n  const response = await graphql(\\\\n    `\\\\n      query {\\\\n        allMarkdownRemark {\\\\n          edges {\\\\n            node {\\\\n              frontmatter {\\\\n                layout\\\\n                slug\\\\n                date(formatString: \\\\\\\"DD.MM.YYYY\\\\\\\")\\\\n              }\\\\n            }\\\\n          }\\\\n        }\\\\n      }\\\\n    `\\\\n  );\\\\n\\\\n  const postEdges = response.data.allMarkdownRemark.edges;\\\\n\\\\n  // highlight-start\\\\n  const articlesByTags = postEdges.reduce((lastValue, { node }) =\\u003e {\\\\n    const tags = node.frontmatter.tags || '';\\\\n    tags.split(/, ?/).forEach(tag =\\u003e {\\\\n      if (lastValue[tag]) {\\\\n        lastValue[tag].push(node.frontmatter);\\\\n      } else {\\\\n        lastValue[tag] = [node.frontmatter];\\\\n      }\\\\n    });\\\\n    return lastValue;\\\\n  }, {});\\\\n  // highlight-end\\\\n\\\\n  // highlight-start\\\\n  function findRelatedArticles(slug, tags) {\\\\n    return _.flow([\\\\n      _.split(/, ?/),\\\\n      _.map(tag =\\u003e articlesByTags[tag]),\\\\n      _.flatten,\\\\n      _.filter(node =\\u003e node.slug !== slug),\\\\n      _.uniqBy(node =\\u003e node.slug),\\\\n    ])(tags);\\\\n  }\\\\n  // highlight-end\\\\n\\\\n  postEdges.forEach(({ node }) =\\u003e {\\\\n    const { slug, layout, tags } = node.frontmatter;\\\\n    createPage({\\\\n      path: `/${slug}`,\\\\n      component: path.join(templatePath, `${layout}.tsx`),\\\\n      context: {\\\\n        slug,\\\\n        // highlight-next-line\\\\n        relatedArticles: findRelatedArticles(slug, tags),\\\\n      },\\\\n    });\\\\n  });\\\\n\\\")), mdx(\\\"p\\\", null, \\\"At this point all the data needed is in place. However, it still has to\\\\nbe shown to give some value. Let us look at a component to add this to\\\\nthe site.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"export function RelatedArticles(props) {\\\\n  if (!props.articles || props.articles.length === 0) {\\\\n    return \\u003cdiv /\\u003e;\\\\n  }\\\\n  return (\\\\n    \\u003csection id=\\\\\\\"related-articles\\\\\\\"\\u003e\\\\n      \\u003cheader\\u003eRelated articles\\u003c/header\\u003e\\\\n      \\u003cul\\u003e\\\\n        {props.articles.map(article =\\u003e (\\\\n          \\u003cli key={article.slug}\\u003e\\\\n            \\u003cLink to={`/${article.slug}`}\\u003e{article.title}\\u003c/Link\\u003e\\\\n            {' '}\\\\n            \\u003cem\\u003e{article.date}\\u003c/em\\u003e\\\\n          \\u003c/li\\u003e\\\\n        ))}\\\\n      \\u003c/ul\\u003e\\\\n    \\u003c/section\\u003e\\\\n  );\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This component will render an empty div if there are no related articles.\\\\nIn the case of related articles it will render a list with links to the\\\\narticles. Remember that the data available here is defined by the graphql\\\\nquery in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatbsy-node.js\\\"), \\\". In order to glue these parts together and make\\\\nit work the component needs to be added in the template used for the\\\\narticles.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"\\u003cRelatedArticles articles={props.pageContext.relatedArticles} /\\u003e\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The page component will get the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"context\\\"), \\\" attribute from \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createPage\\\"), \\\" as\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"pageContext\\\"), \\\". Thus, the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"relatedArticles\\\"), \\\" attribute we created earlier will\\\\nbe accessible on that object.\\\"), mdx(\\\"p\\\", null, \\\"This is all that is needed to have related articles with a Gatsby site with\\\\nthe transformer-remark plugin. To see have it looks have a look at the bottom\\\\nof the \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"/testing-simple-graphql-services#related-articles\\\"\\n  }, \\\"Testing simple GraphQL services\\\"), \\\"\\\\narticle.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eThis website is created with \\u003ca href=\\\"https://www.gatsbyjs.org/\\\"\\u003eGatsby\\u003c/a\\u003e, Reasonml and a little bit of typescript.\\nIn this post I will explain how I built the \\u0026quot;Related articles\\u0026quot; feature that can be\\nseen on the bottom of some of the articles. I have kept all the examples in this\\npost in javascript so it will be helpful to more people.\\u003c/p\\u003e\\u003cp\\u003eFirst of we need to define what makes two posts or articles related. On this site\\nand for this article I am defining it as articles that has the same tags. In the\\nfrontmatter I have a comma separated list of tags. Below is an example:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"yaml\\\"\\u003e\\u003cpre class=\\\"prism-code language-yaml\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e Related articles with Gatsby\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e related\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003earticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ewith\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003egatsby\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e gatsby\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ejavascript\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003edate\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token datetime number\\\"\\u003e2019-02-20\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis blog is based on a setup with \\u003ca href=\\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\u003egatsby-transformer-remark\\u003c/a\\u003e which has the\\nfollowing in \\u003ccode\\u003egatsby-node.js\\u003c/code\\u003e to generate the pages. The first part fetches all\\nthe articles and the necessary metadata with Graphql. The second part loops over\\nall the articles and then creates pages for them with the Gatsby \\u003ccode\\u003ecreatePage\\u003c/code\\u003e\\nfunction.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eexports\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method-variable function-variable method function property-access\\\"\\u003ecreatePages\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003easync\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e graphql\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e actions \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e createPage \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e actions\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e templatePath \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eresolve\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;./src/templates/\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eawait\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003egraphql\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      query {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e        allMarkdownRemark {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e          edges {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e            node {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e              frontmatter {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                layout\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                slug\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                date(formatString: \\u0026quot;DD.MM.YYYY\\u0026quot;)\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e              }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e            }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e          }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e        }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e postEdges \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eallMarkdownRemark\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eedges\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  postEdges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e layout\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreatePage\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      component\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etemplatePath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003elayout\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e.tsx\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      context\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eIn order to populate the data for related articles we will add the data as\\ncontext parameters in the createPage call. However, first we need to find\\nthose articles. The code below will build a map of tags and articles with those\\ntags.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articlesByTags \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e postEdges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ereduce\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003elastValue\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003e, ?\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003elastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003epush\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe result will be something like the following, where \\u003ccode\\u003e{...}\\u003c/code\\u003e is the\\nfrontmatter of a post. This we can use to look up all the related articles for\\none post.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  gatsby\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  cli\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe \\u003ccode\\u003earticlesByTags\\u003c/code\\u003e is useful for looking up all the articles that has a list of tags. Let\\nus look at a possible implementation for that.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e _ \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;lodash/fp\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003efindRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eflow\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003e, ?\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emap\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articlesByTags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eflatten\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efilter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003euniqBy\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eIn this function the \\u003ccode\\u003e_\\u003c/code\\u003e is the\\n\\u003ca href=\\\"https://github.com/lodash/lodash/wiki/FP-Guide\\\"\\u003efunctional programming(fp) version of lodash\\u003c/a\\u003e, which has this neat\\nutility called flow for grouping actions together. Flow returns a function when\\ncalled will perform all the operations in the array. Each operation will have\\nto be a function and the return value of each of them will be passed as the\\nargument to the next one. The function above will first split the comma\\nseparated string to a list and then perform a map on that list of tags to a\\nlist of lists of articles. Since we now have a list of lists it is necessary to\\nflatten it, which will result in a list of articles. The next step is to filter\\nout the current post since we only want other articles than the one that is\\ncurrently viewed. In the last step we want to remove any duplicate articles and\\ncan do that by selecting unique elements based on the slug.\\u003c/p\\u003e\\u003cp\\u003eTo finish the data setup it is necessary to add the related articles to the\\ncontext in the \\u003ccode\\u003ecreatePage\\u003c/code\\u003e call.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreatePage\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  component\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etemplatePath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003elayout\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e.tsx\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    relatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003efindRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe \\u003ccode\\u003egatsby-node.js\\u003c/code\\u003e file should look something like the following now. In the\\ncode below the changes is highlighted.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eexports\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method-variable function-variable method function property-access\\\"\\u003ecreatePages\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003easync\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e graphql\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e actions \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e createPage \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e actions\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e templatePath \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eresolve\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;./src/templates/\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eawait\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003egraphql\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      query {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e        allMarkdownRemark {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e          edges {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e            node {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e              frontmatter {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                layout\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                slug\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                date(formatString: \\u0026quot;DD.MM.YYYY\\u0026quot;)\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e              }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e            }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e          }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e        }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e postEdges \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eallMarkdownRemark\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eedges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articlesByTags \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e postEdges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ereduce\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003elastValue\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003e, ?\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003elastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003epush\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003efindRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eflow\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003e, ?\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emap\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articlesByTags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eflatten\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efilter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003euniqBy\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  postEdges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e layout\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreatePage\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      component\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etemplatePath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003elayout\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e.tsx\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      context\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        relatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003efindRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eAt this point all the data needed is in place. However, it still has to\\nbe shown to give some value. Let us look at a component to add this to\\nthe site.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword module\\\"\\u003eexport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function maybe-class-name\\\"\\u003eRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eprops\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eprops\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003earticles\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e props\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003earticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003elength\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e===\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ediv \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003esection id\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;related-articles\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eheader\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eRelated\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articles\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eheader\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eul\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eprops\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003earticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emap\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e          \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eli key\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eLink\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e to\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eLink\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27; \\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eem\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edate\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eem\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e          \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eli\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eul\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003esection\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis component will render an empty div if there are no related articles.\\nIn the case of related articles it will render a list with links to the\\narticles. Remember that the data available here is defined by the graphql\\nquery in \\u003ccode\\u003egatbsy-node.js\\u003c/code\\u003e. In order to glue these parts together and make\\nit work the component needs to be added in the template used for the\\narticles.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articles\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eprops\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003epageContext\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003erelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe page component will get the \\u003ccode\\u003econtext\\u003c/code\\u003e attribute from \\u003ccode\\u003ecreatePage\\u003c/code\\u003e as\\n\\u003ccode\\u003epageContext\\u003c/code\\u003e. Thus, the \\u003ccode\\u003erelatedArticles\\u003c/code\\u003e attribute we created earlier will\\nbe accessible on that object.\\u003c/p\\u003e\\u003cp\\u003eThis is all that is needed to have related articles with a Gatsby site with\\nthe transformer-remark plugin. To see have it looks have a look at the bottom\\nof the \\u003ca href=\\\"/testing-simple-graphql-services#related-articles\\\"\\u003eTesting simple GraphQL services\\u003c/a\\u003e\\narticle.\\u003c/p\\u003e\",\"scope\":{}},\"count\":1},{\"slug\":\"twitter-cards-for-gatsby-posts\",\"layout\":\"post\",\"title\":\"Twitter cards for Gatsby posts\",\"date\":\"2019-02-26T00:00:00.000Z\",\"category\":\"Gatsby\",\"tags\":[\"gatsby\",\"canvas\",\"javascript\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"Previously this blog had the default article twitter card. I have seen some\\\\nother sited like \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://dev.to/\\\"\\n  }, \\\"dev.to\\\"), \\\" have these nice title images for the twitter cards.\\\\nI wanted to add these to this site for two reasons: they look kind of nice and\\\\nI would like to look into what it would take to create these. The idea I had\\\\nfor my own cards was for it to resemble the current header with RL and the\\\\npurple line and then the title of the post below it. This first version\\\\nwas written with Node.js and \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/Automattic/node-canvas\\\"\\n  }, \\\"node-canvas\\\"), \\\", maybe in the feature I will try\\\\nto convert it to native reason. Here is a preview of the twitter card for this\\\\npost.\\\"), mdx(\\\"p\\\", null, mdx(\\\"img\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"src\\\": \\\"/twitter-cards-for-gatsby-posts-link-card.png\\\",\\n    \\\"alt\\\": \\\"Twitter card for this post\\\"\\n  })), mdx(\\\"p\\\", null, \\\"Twitter has \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://cards-dev.twitter.com/validator\\\"\\n  }, \\\"a tool to validate\\\"), \\\" the cards for different\\\\npages. It will show how the card will be viewed in a tweet. Below is an\\\\nexample with this post.\\\"), mdx(\\\"p\\\", null, mdx(\\\"img\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"src\\\": \\\"/images/twitter-cards-for-gatsby-posts/card-screenshot.png\\\",\\n    \\\"alt\\\": \\\"Screenshot of a twitter card\\\"\\n  })), mdx(\\\"p\\\", null, \\\"So how to build this? Two things is necessary to get this to work. Creating\\\\nthe image and then add the meta tags to each posts according to the twitter\\\\ndocumentation.\\\"), mdx(\\\"p\\\", null, \\\"Firstly, let us look at the creating of the images themselves. \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/Automattic/node-canvas\\\"\\n  }, \\\"node-canvas\\\"), \\\"\\\\nis a nice tool to do drawing in Node.js that we want to store in a file. It\\\\ncan do many of the things possible to do with browser side canvas. Below is\\\\nthe implementation of the card for this site. What parts each section draws\\\\nis put in comments above them. In the end of the function the\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"canvas.toBuffer('image/png')\\\"), \\\" function is used to create a buffer that we\\\\ncan write to a file, which then is written to the file.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"const { createCanvas } = require('canvas');\\\\nconst fs = require('fs');\\\\n\\\\nfunction createLinkCards({ title, path }) {\\\\n  const canvas = createCanvas(600, 300);\\\\n  const context = canvas.getContext('2d');\\\\n\\\\n  // Create a white background\\\\n  context.fillStyle = 'white';\\\\n  context.fillRect(0, 0, canvas.width, canvas.height);\\\\n\\\\n  // Create the big RL in purple\\\\n  context.font = '100pt serif';\\\\n  context.fillStyle = '#6C3082';\\\\n  const header = context.measureText('RL');\\\\n  context.fillText('RL', (canvas.width - header.width) / 2, 160);\\\\n\\\\n  // Create the purple line across the image\\\\n  context.strokeStyle = '#6C3082';\\\\n  context.beginPath();\\\\n  context.lineTo(0, 180);\\\\n  context.lineTo(canvas.width, 180);\\\\n  context.lineWidth = 6;\\\\n  context.stroke();\\\\n\\\\n  // Insert the title text beneath the purple line\\\\n  setFontSizeForWidth(canvas.width * 0.75)\\\\n  context.fillStyle = 'black';\\\\n  const text = context.measureText(title);\\\\n  context.fillText(title, (canvas.width - text.width) / 2, 250);\\\\n\\\\n  fs.writeFileSync(path, canvas.toBuffer('image/png'));\\\\n};\\\\n\\\")), mdx(\\\"p\\\", null, \\\"There are a few things to take a closer look at. Several places\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"context.measureText\\\"), \\\" is used. It will take use the current font config to\\\\nmeasure how wide the string passed as the first argument will be. This is\\\\nuseful to center the text since we can use it to calculate the placement of\\\\nthe text. Furthermore, it can be used to decide the font size if we do not\\\\nknow the amount of text to render beforehand. In this case, that is done for\\\\nthe title with the function below, which will test any font size from 100pt\\\\nand downwards until the text fits within a certain limit. In the case of the\\\\ncard title it is set to 75 % of the canvas with.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"function setFontSizeForWidth(context, width) {\\\\n  let fontSize = 100;\\\\n  do {\\\\n    fontSize--;\\\\n    context.font = fontSize + 'pt serif';\\\\n  } while (context.measureText(title).width \\u003e width);\\\\n  return fontSize;\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The next thing needed is to call the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createLinkCards\\\"), \\\" in the same place\\\\nwhere \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createPage\\\"), \\\" is called in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatsby-node.js\\\"), \\\". In this example I have used\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\n  }, \\\"gatsby-transformer-remark\\\"), \\\" the code snippet below is looping over the result\\\\nof the graphql query similar to the documentation for\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\n  }, \\\"gatsby-transformer-remark\\\"), \\\".\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"posts.forEach(({ node }) =\\u003e {\\\\n  const { slug, layout, tags, title } = node.frontmatter;\\\\n  createPage({\\\\n    path: `/${slug}`,\\\\n    component: path.join(templatePath, 'blogpost.js'),\\\\n  });\\\\n  createLinkCards({\\\\n    title,\\\\n    path: path.join('public', `${slug}-link-card.png`),\\\\n  });\\\\n});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"After running \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatsby build\\\"), \\\" the public folder will now have a link card file\\\\nfor each post. Open one and check how it looks. Next step will be to link this\\\\nin the blogpost template. These things needs to be linked in meta tags in the\\\\nhead tag. To change metadata with Gatsby it is recommended to use react-helmet.\\\\nThere is a \\\", \\\"[guide on how to change metadata][gatsby-docs-metadata]\\\", \\\" in the Gatsby\\\\ndocumentation. In the component in the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"blogpost.js\\\"), \\\" template add the following\\\\nsnippet of code.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"\\u003cHelmet\\u003e\\\\n  \\u003cmeta name=\\\\\\\"twitter:title\\\\\\\" content={title} /\\u003e\\\\n  \\u003cmeta name=\\\\\\\"twitter:card\\\\\\\" content=\\\\\\\"summary_large_image\\\\\\\" /\\u003e\\\\n  \\u003cmeta name=\\\\\\\"twitter:author\\\\\\\" content=\\\\\\\"@\\u003cyour twitter handle\\u003e\\\\\\\" /\\u003e\\\\n  \\u003cmeta name=\\\\\\\"twitter:image:src\\\\\\\" content={`${window.location.origin}/${slug}-link-card.png`} /\\u003e\\\\n\\u003c/Helmet\\u003e\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This is all that is needed to get these nice cards in tweets with links to your blog.\\\\nIt might be worth looking into more meta tags for getting the same behavior on other\\\\nsites that have similar functionality. Remember that \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://cards-dev.twitter.com/validator\\\"\\n  }, \\\"twitter has a tool to test\\\"), \\\"\\\\nyour new cards.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003ePreviously this blog had the default article twitter card. I have seen some\\nother sited like \\u003ca href=\\\"https://dev.to/\\\"\\u003edev.to\\u003c/a\\u003e have these nice title images for the twitter cards.\\nI wanted to add these to this site for two reasons: they look kind of nice and\\nI would like to look into what it would take to create these. The idea I had\\nfor my own cards was for it to resemble the current header with RL and the\\npurple line and then the title of the post below it. This first version\\nwas written with Node.js and \\u003ca href=\\\"https://github.com/Automattic/node-canvas\\\"\\u003enode-canvas\\u003c/a\\u003e, maybe in the feature I will try\\nto convert it to native reason. Here is a preview of the twitter card for this\\npost.\\u003c/p\\u003e\\u003cp\\u003e\\u003cimg alt=\\\"Twitter card for this post\\\" src=\\\"/twitter-cards-for-gatsby-posts-link-card.png\\\"/\\u003e\\u003c/p\\u003e\\u003cp\\u003eTwitter has \\u003ca href=\\\"https://cards-dev.twitter.com/validator\\\"\\u003ea tool to validate\\u003c/a\\u003e the cards for different\\npages. It will show how the card will be viewed in a tweet. Below is an\\nexample with this post.\\u003c/p\\u003e\\u003cp\\u003e\\u003cimg alt=\\\"Screenshot of a twitter card\\\" src=\\\"/images/twitter-cards-for-gatsby-posts/card-screenshot.png\\\"/\\u003e\\u003c/p\\u003e\\u003cp\\u003eSo how to build this? Two things is necessary to get this to work. Creating\\nthe image and then add the meta tags to each posts according to the twitter\\ndocumentation.\\u003c/p\\u003e\\u003cp\\u003eFirstly, let us look at the creating of the images themselves. \\u003ca href=\\\"https://github.com/Automattic/node-canvas\\\"\\u003enode-canvas\\u003c/a\\u003e\\nis a nice tool to do drawing in Node.js that we want to store in a file. It\\ncan do many of the things possible to do with browser side canvas. Below is\\nthe implementation of the card for this site. What parts each section draws\\nis put in comments above them. In the end of the function the\\n\\u003ccode\\u003ecanvas.toBuffer(\\u0026#x27;image/png\\u0026#x27;)\\u003c/code\\u003e function is used to create a buffer that we\\ncan write to a file, which then is written to the file.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e createCanvas \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;canvas\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fs \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;fs\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateLinkCards\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e title\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e path \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateCanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e600\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e300\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e context \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003egetContext\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;2d\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e// Create a white background\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efillStyle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;white\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efillRect\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheight\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e// Create the big RL in purple\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efont\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;100pt serif\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efillStyle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;#6C3082\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e header \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emeasureText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;RL\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efillText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;RL\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ecanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e header\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e2\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e160\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e// Create the purple line across the image\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003estrokeStyle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;#6C3082\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ebeginPath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elineTo\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e180\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elineTo\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ecanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e180\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003elineWidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e6\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003estroke\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e// Insert the title text beneath the purple line\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003esetFontSizeForWidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ecanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e*\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0.75\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efillStyle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;black\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e text \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emeasureText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efillText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ecanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e text\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e2\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e250\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  fs\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ewriteFileSync\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003epath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003etoBuffer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;image/png\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThere are a few things to take a closer look at. Several places\\n\\u003ccode\\u003econtext.measureText\\u003c/code\\u003e is used. It will take use the current font config to\\nmeasure how wide the string passed as the first argument will be. This is\\nuseful to center the text since we can use it to calculate the placement of\\nthe text. Furthermore, it can be used to decide the font size if we do not\\nknow the amount of text to render beforehand. In this case, that is done for\\nthe title with the function below, which will test any font size from 100pt\\nand downwards until the text fits within a certain limit. In the case of the\\ncard title it is set to 75 % of the canvas with.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003esetFontSizeForWidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003econtext\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e width\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003elet\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fontSize \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e100\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003edo\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    fontSize\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e--\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efont\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fontSize \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e+\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;pt serif\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ewhile\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003econtext\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emeasureText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e width\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fontSize\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe next thing needed is to call the \\u003ccode\\u003ecreateLinkCards\\u003c/code\\u003e in the same place\\nwhere \\u003ccode\\u003ecreatePage\\u003c/code\\u003e is called in \\u003ccode\\u003egatsby-node.js\\u003c/code\\u003e. In this example I have used\\n\\u003ca href=\\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\u003egatsby-transformer-remark\\u003c/a\\u003e the code snippet below is looping over the result\\nof the graphql query similar to the documentation for\\n\\u003ca href=\\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\u003egatsby-transformer-remark\\u003c/a\\u003e.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eposts\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e layout\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e title \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreatePage\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    component\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etemplatePath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;blogpost.js\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateLinkCards\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    title\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;public\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e-link-card.png\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eAfter running \\u003ccode\\u003egatsby build\\u003c/code\\u003e the public folder will now have a link card file\\nfor each post. Open one and check how it looks. Next step will be to link this\\nin the blogpost template. These things needs to be linked in meta tags in the\\nhead tag. To change metadata with Gatsby it is recommended to use react-helmet.\\nThere is a \\u003c!-- --\\u003e[guide on how to change metadata][gatsby-docs-metadata]\\u003c!-- --\\u003e in the Gatsby\\ndocumentation. In the component in the \\u003ccode\\u003eblogpost.js\\u003c/code\\u003e template add the following\\nsnippet of code.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eHelmet\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emeta name\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;twitter:title\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e content\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emeta name\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;twitter:card\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e content\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;summary_large_image\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emeta name\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;twitter:author\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e content\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;@\\u0026lt;your twitter handle\\u0026gt;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emeta name\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;twitter:image:src\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e content\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003ewindow\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003elocation\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eorigin\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e-link-card.png\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eHelmet\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis is all that is needed to get these nice cards in tweets with links to your blog.\\nIt might be worth looking into more meta tags for getting the same behavior on other\\nsites that have similar functionality. Remember that \\u003ca href=\\\"https://cards-dev.twitter.com/validator\\\"\\u003etwitter has a tool to test\\u003c/a\\u003e\\nyour new cards.\\u003c/p\\u003e\",\"scope\":{}},\"count\":1},{\"slug\":\"serving-plain-text-with-nextjs\",\"layout\":\"post\",\"title\":\"Serving text/plain for curl with Next\",\"date\":\"2020-05-26T00:00:00.000Z\",\"category\":\"nextjs\",\"tags\":[\"nextjs\",\"javascript\",\"curl\",\"nodejs\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"I have recently been trying out the \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://nextjs.org/\\\"\\n  }, \\\"Next.js\\\"), \\\" for some projects again. I have\\\\nhad earlier projects where I have been really happy with Next, but for some time now\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/\\\"\\n  }, \\\"Gatsby\\\"), \\\" has been my go to. One of the big things separating these two are that Next\\\\nhas runtime server side rendering and thought it would be a neat to utilize this to\\\\nhave separate content-types based on the client. The idea is that if the client is a\\\\nCLI based client like \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://curl.haxx.se/\\\"\\n  }, \\\"curl\\\"), \\\" the server should respond with a plain text response.\\\\nThis should not be the case if the accept header is set to something specific. The\\\\ndefault accept header in curl is \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"*/*\\\"), \\\".\\\"), mdx(\\\"p\\\", null, \\\"Next has a feature where you can drop in your own http server and still let the\\\\nframework handle the rendering. This is helpful in many situations like protecting\\\\nthings with login or using Next as a part of an already existing application. Below is\\\\na minimal custom server. The highlighted line is where the rendering of the response\\\\nis handed of to Next.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-javascript\\\"\\n  }, \\\"const { createServer } = require(\\\\\\\"http\\\\\\\");\\\\nconst { parse } = require(\\\\\\\"url\\\\\\\");\\\\nconst next = require(\\\\\\\"next\\\\\\\");\\\\n\\\\nconst dev = process.env.NODE_ENV !== \\\\\\\"production\\\\\\\";\\\\nconst app = next({ dev });\\\\nconst handle = app.getRequestHandler();\\\\nconst port = parseInt(process.env.PORT || \\\\\\\"3000\\\\\\\");\\\\n\\\\napp.prepare().then(() =\\u003e {\\\\n  createServer((req, res) =\\u003e {\\\\n    const parsedUrl = parse(req.url, true);\\\\n    // highlight-next-line\\\\n    handle(req, res, parsedUrl);\\\\n  }).listen(port, err =\\u003e {\\\\n    if (err) throw err;\\\\n    console.log(`\\u003e Ready on http://localhost:${port}`);\\\\n  });\\\\n});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This custom server does nothing that the default Next server does not, so putting this\\\\na project does not make very much sense unless one adds something more. That said, if\\\\nthis is put in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"server.js\\\"), \\\" in a Next project running \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"node server.js\\\"), \\\" in dev and\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"NODE_ENV=production node server.js\\\"), \\\" in production should work nicely.\\\"), mdx(\\\"p\\\", null, \\\"To achieve the custom content type responses without duplicating the content we can\\\\nuse Next to render the content. Then we will pass it through a npm module that returns\\\\ntext from HTML. It could also be interesting to do the same with something that returns\\\\nmarkdown if you want to keep more of semantic elements. In order to get the html from\\\\nNext we need to give it a fake response that we can read from afterwords. I will admit,\\\\nthis is a hack, but hey it works. \\\\uD83E\\\\uDD37\\\\u200D\\\\u2642\\\\uFE0F\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-javascript\\\"\\n  }, \\\"class FakeResponse extends EventEmitter {\\\\n  constructor() {\\\\n    super();\\\\n    this.headers = {};\\\\n    this.data = \\\\\\\"\\\\\\\";\\\\n  }\\\\n\\\\n  getHeader(key) {\\\\n    return this.headers[key];\\\\n  }\\\\n\\\\n  setHeader(key, value) {\\\\n    return (this.headers[key] = value);\\\\n  }\\\\n\\\\n  write(data) {\\\\n    this.data += data;\\\\n  }\\\\n\\\\n  end(data) {\\\\n    this.data += data;\\\\n    this.emit(\\\\\\\"end\\\\\\\", data);\\\\n  }\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The class above emulates the part of Node's \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"http.ServerResponse\\\"), \\\" that is needed and emits\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"end\\\"), \\\" when the response is done. This makes it possible to get the HTML generated by Next\\\\nand the headers set by Next. Below is a function that takes the same arguments as Next's\\\\nhandle function, but it uses the fake response to get the generated HTML and pass that to\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.npmjs.com/package/html-to-text\\\"\\n  }, \\\"html-to-text\\\"), \\\". It also copies all the headers from the fake response to the real response.\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Content-Length\\\"), \\\" and \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Content-Type\\\"), \\\" is excluded from this copying since those will be\\\\ndifferent from what Next has set.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-javascript\\\"\\n  }, \\\"function handleWithText(req, res, parsedUrl) {\\\\n  const fakeRes = new FakeResponse();\\\\n  fakeRes.on(\\\\\\\"end\\\\\\\", data =\\u003e {\\\\n    Object.keys(fakeRes.headers).forEach(key =\\u003e {\\\\n      if (key !== \\\\\\\"Content-Length\\\\\\\" \\u0026\\u0026 key !== \\\\\\\"Content-Type\\\\\\\") {\\\\n        res.setHeader(key, fakeRes.getHeader(key));\\\\n      }\\\\n    });\\\\n    res.setHeader(\\\\\\\"Content-Type\\\\\\\", \\\\\\\"text/plain\\\\\\\");\\\\n    res.statusCode = fakeRes.statusCode || 200\\\\n    res.end(htmlToText.fromString(data));\\\\n  });\\\\n  handle(req, fakeRes, parsedUrl);\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"With that set up, the custom server code can be changed to the following. The code\\\\nbelow checks the accept header and uses the new \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"handleWithText\\\"), \\\" function if the\\\\naccept header is set to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"text/plain\\\"), \\\" or the user agent is \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://curl.haxx.se/\\\"\\n  }, \\\"curl\\\"), \\\" or \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://httpie.org/\\\"\\n  }, \\\"httpie\\\"), \\\",\\\\nthe two CLI based http clients I know of, with an accept header set to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"*/*\\\"), \\\".\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-javascript\\\"\\n  }, \\\"app.prepare().then(() =\\u003e {\\\\n  createServer((req, res) =\\u003e {\\\\n    const parsedUrl = parse(req.url, true);\\\\n    const [accept] = (req.headers[\\\\\\\"accept\\\\\\\"] || \\\\\\\"\\\\\\\").split(\\\\\\\";\\\\\\\");\\\\n\\\\n    if (\\\\n      accept === \\\\\\\"text/plain\\\\\\\" ||\\\\n      (accept === \\\\\\\"*/*\\\\\\\" \\u0026\\u0026 /curl|HTTPie/.test(req.headers[\\\\\\\"user-agent\\\\\\\"] || \\\\\\\"\\\\\\\"))\\\\n    ) {\\\\n      handleWithText(req, res, parsedUrl);\\\\n    } else {\\\\n      handle(req, res, parsedUrl);\\\\n    }\\\\n  }).listen(port, err =\\u003e {\\\\n    if (err) throw err;\\\\n    console.log(`\\u003e Ready on http://localhost:${port}`);\\\\n  });\\\\n});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This would result in this output if it would be used on the front page of this website\\\\n(which would require me to rewrite it from Gatsby first, but that is another thing).\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\"\\n  }, \\\"$ curl -L rolflekang.com\\\\nRL [/]\\\\n\\\\nHi, I am Rolf\\\\n\\\\nI am an independent software developer who enjoys working\\\\nwith the whole stack. I occationally write posts [/writing], take photographs\\\\n[/photography], ride mountain bikes and snowboards. I do consulting work, if\\\\nthat is something you are looking I might be able to help out [/hire].\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This might not be the most useful feature, but it might be neat if your website\\\\ncontains information that people often would want to get from the terminal. Anyhow,\\\\nit is a fun little easter egg. \\\\uD83D\\\\uDC23\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eI have recently been trying out the \\u003ca href=\\\"https://nextjs.org/\\\"\\u003eNext.js\\u003c/a\\u003e for some projects again. I have\\nhad earlier projects where I have been really happy with Next, but for some time now\\n\\u003ca href=\\\"https://www.gatsbyjs.org/\\\"\\u003eGatsby\\u003c/a\\u003e has been my go to. One of the big things separating these two are that Next\\nhas runtime server side rendering and thought it would be a neat to utilize this to\\nhave separate content-types based on the client. The idea is that if the client is a\\nCLI based client like \\u003ca href=\\\"https://curl.haxx.se/\\\"\\u003ecurl\\u003c/a\\u003e the server should respond with a plain text response.\\nThis should not be the case if the accept header is set to something specific. The\\ndefault accept header in curl is \\u003ccode\\u003e*/*\\u003c/code\\u003e.\\u003c/p\\u003e\\u003cp\\u003eNext has a feature where you can drop in your own http server and still let the\\nframework handle the rendering. This is helpful in many situations like protecting\\nthings with login or using Next as a part of an already existing application. Below is\\na minimal custom server. The highlighted line is where the rendering of the response\\nis handed of to Next.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"javascript\\\"\\u003e\\u003cpre class=\\\"prism-code language-javascript\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e createServer \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;http\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parse \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;url\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e next \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;next\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e dev \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e process\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eenv\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token constant\\\"\\u003eNODE_ENV\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;production\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e app \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003enext\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e dev \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e handle \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e app\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003egetRequestHandler\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e port \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eparseInt\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eprocess\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eenv\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token constant\\\"\\u003ePORT\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;3000\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eapp\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eprepare\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ethen\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateServer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eparse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eurl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token boolean\\\"\\u003etrue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elisten\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eerr\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eerr\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ethrow\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e err\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token console class-name\\\"\\u003econsole\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elog\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e\\u0026gt; Ready on http://localhost:\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis custom server does nothing that the default Next server does not, so putting this\\na project does not make very much sense unless one adds something more. That said, if\\nthis is put in \\u003ccode\\u003eserver.js\\u003c/code\\u003e in a Next project running \\u003ccode\\u003enode server.js\\u003c/code\\u003e in dev and\\n\\u003ccode\\u003eNODE_ENV=production node server.js\\u003c/code\\u003e in production should work nicely.\\u003c/p\\u003e\\u003cp\\u003eTo achieve the custom content type responses without duplicating the content we can\\nuse Next to render the content. Then we will pass it through a npm module that returns\\ntext from HTML. It could also be interesting to do the same with something that returns\\nmarkdown if you want to keep more of semantic elements. In order to get the html from\\nNext we need to give it a fake response that we can read from afterwords. I will admit,\\nthis is a hack, but hey it works. \\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"javascript\\\"\\u003e\\u003cpre class=\\\"prism-code language-javascript\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eclass\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token class-name\\\"\\u003eFakeResponse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eextends\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token class-name\\\"\\u003eEventEmitter\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003econstructor\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003esuper\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003egetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003esetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e value\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e value\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ewrite\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e+=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eend\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e+=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eemit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;end\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe class above emulates the part of Node\\u0026#x27;s \\u003ccode\\u003ehttp.ServerResponse\\u003c/code\\u003e that is needed and emits\\n\\u003ccode\\u003eend\\u003c/code\\u003e when the response is done. This makes it possible to get the HTML generated by Next\\nand the headers set by Next. Below is a function that takes the same arguments as Next\\u0026#x27;s\\nhandle function, but it uses the fake response to get the generated HTML and pass that to\\n\\u003ca href=\\\"https://www.npmjs.com/package/html-to-text\\\"\\u003ehtml-to-text\\u003c/a\\u003e. It also copies all the headers from the fake response to the real response.\\n\\u003ccode\\u003eContent-Length\\u003c/code\\u003e and \\u003ccode\\u003eContent-Type\\u003c/code\\u003e is excluded from this copying since those will be\\ndifferent from what Next has set.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"javascript\\\"\\u003e\\u003cpre class=\\\"prism-code language-javascript\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandleWithText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fakeRes \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003enew\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token class-name\\\"\\u003eFakeResponse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  fakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eon\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;end\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token known-class-name class-name\\\"\\u003eObject\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ekeys\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003efakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;Content-Length\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026amp;\\u0026amp;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e key \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;Content-Type\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003egetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;Content-Type\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;text/plain\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003estatusCode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003estatusCode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e200\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eend\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ehtmlToText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efromString\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eWith that set up, the custom server code can be changed to the following. The code\\nbelow checks the accept header and uses the new \\u003ccode\\u003ehandleWithText\\u003c/code\\u003e function if the\\naccept header is set to \\u003ccode\\u003etext/plain\\u003c/code\\u003e or the user agent is \\u003ca href=\\\"https://curl.haxx.se/\\\"\\u003ecurl\\u003c/a\\u003e or \\u003ca href=\\\"https://httpie.org/\\\"\\u003ehttpie\\u003c/a\\u003e,\\nthe two CLI based http clients I know of, with an accept header set to \\u003ccode\\u003e*/*\\u003c/code\\u003e.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"javascript\\\"\\u003e\\u003cpre class=\\\"prism-code language-javascript\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eapp\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eprepare\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ethen\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateServer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eparse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eurl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token boolean\\\"\\u003etrue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eaccept\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;accept\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      accept \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e===\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;text/plain\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eaccept \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e===\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;*/*\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026amp;\\u0026amp;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003ecurl|HTTPie\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003etest\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;user-agent\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandleWithText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elisten\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eerr\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eerr\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ethrow\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e err\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token console class-name\\\"\\u003econsole\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elog\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e\\u0026gt; Ready on http://localhost:\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis would result in this output if it would be used on the front page of this website\\n(which would require me to rewrite it from Gatsby first, but that is another thing).\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\"\\u003e\\u003cpre class=\\\"prism-code language-undefined\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e$ curl -L rolflekang.com\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eRL [/]\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eHi, I am Rolf\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eI am an independent software developer who enjoys working\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ewith the whole stack. I occationally write posts [/writing], take photographs\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e[/photography], ride mountain bikes and snowboards. I do consulting work, if\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ethat is something you are looking I might be able to help out [/hire].\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis might not be the most useful feature, but it might be neat if your website\\ncontains information that people often would want to get from the terminal. Anyhow,\\nit is a fun little easter egg. \\u003c/p\\u003e\",\"scope\":{}},\"count\":1}]},{\"slug\":\"lets-run-some-races\",\"layout\":\"post\",\"category\":\"Running\",\"tags\":[\"running\"],\"title\":\"Let's run some races this year\",\"date\":\"2017-01-02T00:00:00.000Z\",\"relatedPosts\":[]},{\"slug\":\"software-development-on-an-ipad\",\"layout\":\"post\",\"title\":\"Software development on an iPad\",\"date\":\"2017-01-01T00:00:00.000Z\",\"category\":\"Stuff\",\"tags\":[\"ipad\",\"development-environment\"],\"relatedPosts\":[]},{\"slug\":\"filtering-lint-errors\",\"layout\":\"post\",\"title\":\"Filtering lint errors\",\"date\":\"2016-06-10T00:00:00.000Z\",\"category\":\"Development\",\"tags\":[\"linter\",\"linting\",\"development\"],\"external_site\":\"Medium\",\"external_url\":\"https://medium.com/@relekang/filtering-lint-errors-a1aee46e6f43#.6rw9vu28j\",\"relatedPosts\":[]},{\"slug\":\"interrail-summer\",\"layout\":\"post\",\"title\":\"Interrail summer\",\"category\":\"Travel\",\"tags\":[\"travel\",\"interrail\"],\"date\":\"2015-07-26T00:00:00.000Z\",\"relatedPosts\":[]},{\"slug\":\"writing-latex-in-atom\",\"layout\":\"post\",\"title\":\"Writing (latex) in Atom\",\"date\":\"2015-05-23T00:00:00.000Z\",\"tags\":[\"atom\",\"writing\",\"procrastination\"],\"relatedPosts\":[]},{\"slug\":\"rmoq\",\"layout\":\"post\",\"title\":\"rmoq - a request mock cache\",\"date\":\"2014-12-30T00:00:00.000Z\",\"category\":\"Python\",\"tags\":[\"python\",\"testing\",\"mocking\"],\"relatedPosts\":[{\"slug\":\"testing-simple-graphql-services\",\"layout\":\"post\",\"date\":\"2017-05-28T00:00:00.000Z\",\"title\":\"Testing simple GraphQL services\",\"tags\":[\"graphql\",\"testing\",\"javascript\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"I recently created a \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/relekang/micro-rss-parser\\\"\\n  }, \\\"GraphQL based microservice\\\"), \\\" for parsing RSS-feeds. I wanted\\\\nto write something down about the approach I took to test the API. The service is read only, as\\\\nthere is little we can push out into others RSS feeds.\\\"), mdx(\\\"p\\\", null, \\\"GraphQL returns 200 status for almost everything. Whenever error occurs it only pushes the error\\\\nto a list of errors that is passed to the payload. This is because it is designed to be resillient\\\\nand give as much information as it can even when something fails. This also means that we can\\\\nabstract away the most part of successful and unsuccessful requests in our tests and still get\\\\nvalid tests. Thus, when testing the API layer of this service the only thing that matters is the\\\\nquery and the response.\\\"), mdx(\\\"p\\\", null, \\\"Services like micro-rss-parser has another characteristic that makes them easy to test. No\\\\nauthentication or authorization, which means that we do not need to check different types of errors\\\\nbased on different states of authorization. Thus, it is only the GraphQL query and the response\\\\nthat matters.\\\"), mdx(\\\"p\\\", null, \\\"I created a helper that allowed me to write tests in an easy way with focus on the queries. The\\\\ntests look like this:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"testGraphQlService`{\\\\n  feed(url=\\\\\\\"https://rolflekang.com/feed.xml\\\\\\\") {\\\\n    entries {\\\\n      title\\\\n    }\\\\n  }\\\\n}\\\\n `\\\\n\\\")), mdx(\\\"p\\\", null, \\\"Under the hood that helper creates a \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://facebook.github.io/jest/\\\"\\n  }, \\\"jest\\\"), \\\" test that asserts to a snapshot with jests handy\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://facebook.github.io/jest/docs/expect.html#tomatchsnapshotoptionalstring\\\"\\n  }, \\\"toMatchSnapshot()\\\"), \\\". This generates a snapshot file for every test file with a map of responses\\\\nwith the query as key. Thus, reviewing these tests and test changes is a bliss. Below is the\\\\nimplementation of the test helper as it was in micro-rss-parser at the time when this was written.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"const request = require('superagent')\\\\n\\\\nfunction createTestServer() {\\\\n  /*\\\\n   * Set up a test instance and return url.\\\\n   * For micro-rss-parser I used this https://github.com/zeit/micro#testing\\\\n   */\\\\n}\\\\n\\\\nfunction testGraphqlApi (strings, ...args) {\\\\n  const query = String.raw(strings, ...args)\\\\n  test(query, async () =\\u003e {\\\\n    let response\\\\n    const url = await createTestServer()\\\\n\\\\n    try {\\\\n      response = (await request\\\\n        .post(url)\\\\n        .set('User-Agent', 'graphql-test')\\\\n        .set('Content-Type', 'application/json')\\\\n        .send(JSON.stringify({ query }))\\\\n      ).body\\\\n    } catch (error) {\\\\n      if (!error.response) {\\\\n        throw error\\\\n      }\\\\n\\\\n      response = error.response.body\\\\n    }\\\\n\\\\n    expect(response).toMatchSnapshot()\\\\n  })\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"It has made it easy to write good and readable API tests of the little microservice. However,\\\\nkeep in mind that this is a sufficient solution due to the assumptions discussed earlier so it\\\\nmight not be a fit approach for you project, nevertheless, feel free to take the helper. Let me\\\\nknow how it works out for you \\\\u270C\\\\uFE0F\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eI recently created a \\u003ca href=\\\"https://github.com/relekang/micro-rss-parser\\\"\\u003eGraphQL based microservice\\u003c/a\\u003e for parsing RSS-feeds. I wanted\\nto write something down about the approach I took to test the API. The service is read only, as\\nthere is little we can push out into others RSS feeds.\\u003c/p\\u003e\\u003cp\\u003eGraphQL returns 200 status for almost everything. Whenever error occurs it only pushes the error\\nto a list of errors that is passed to the payload. This is because it is designed to be resillient\\nand give as much information as it can even when something fails. This also means that we can\\nabstract away the most part of successful and unsuccessful requests in our tests and still get\\nvalid tests. Thus, when testing the API layer of this service the only thing that matters is the\\nquery and the response.\\u003c/p\\u003e\\u003cp\\u003eServices like micro-rss-parser has another characteristic that makes them easy to test. No\\nauthentication or authorization, which means that we do not need to check different types of errors\\nbased on different states of authorization. Thus, it is only the GraphQL query and the response\\nthat matters.\\u003c/p\\u003e\\u003cp\\u003eI created a helper that allowed me to write tests in an easy way with focus on the queries. The\\ntests look like this:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etestGraphQlService\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e{\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e  feed(url=\\u0026quot;https://rolflekang.com/feed.xml\\u0026quot;) {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e    entries {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      title\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e    }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e  }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e}\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eUnder the hood that helper creates a \\u003ca href=\\\"https://facebook.github.io/jest/\\\"\\u003ejest\\u003c/a\\u003e test that asserts to a snapshot with jests handy\\n\\u003ca href=\\\"http://facebook.github.io/jest/docs/expect.html#tomatchsnapshotoptionalstring\\\"\\u003etoMatchSnapshot()\\u003c/a\\u003e. This generates a snapshot file for every test file with a map of responses\\nwith the query as key. Thus, reviewing these tests and test changes is a bliss. Below is the\\nimplementation of the test helper as it was in micro-rss-parser at the time when this was written.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e request \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;superagent\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateTestServer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e/*\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e   * Set up a test instance and return url.\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e   * For micro-rss-parser I used this https://github.com/zeit/micro#testing\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e   */\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003etestGraphqlApi\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003estrings\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eargs\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e query \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token known-class-name class-name\\\"\\u003eString\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eraw\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003estrings\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eargs\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003etest\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003equery\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003easync\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003elet\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e url \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eawait\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateTestServer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003etry\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eawait\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e request\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003epost\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eurl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eset\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;User-Agent\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;graphql-test\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eset\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;Content-Type\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;application/json\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esend\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token known-class-name class-name\\\"\\u003eJSON\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003estringify\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e query \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ebody\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ecatch\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eerror\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eerror\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eresponse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ethrow\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e error\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e error\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eresponse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ebody\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eexpect\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eresponse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003etoMatchSnapshot\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eIt has made it easy to write good and readable API tests of the little microservice. However,\\nkeep in mind that this is a sufficient solution due to the assumptions discussed earlier so it\\nmight not be a fit approach for you project, nevertheless, feel free to take the helper. Let me\\nknow how it works out for you \\u003c/p\\u003e\",\"scope\":{}},\"count\":1}]},{\"slug\":\"django-nopassword-one-point-o\",\"layout\":\"post\",\"title\":\"django-nopassword reached 1.0\",\"date\":\"2014-10-03T00:00:00.000Z\",\"categories\":\"django\",\"tags\":[\"django\",\"nopassword\",\"django-nopassword\",\"authentication\"],\"relatedPosts\":[{\"slug\":\"django-nopassword\",\"layout\":\"post\",\"title\":\"django-nopassword\",\"date\":\"2012-09-28T00:00:00.000Z\",\"category\":\"Django\",\"tags\":[\"django\",\"no-password\",\"email-authentication\",\"authentication\"],\"redirect_from\":\"/2012/09/28/django-nopassword/\",\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"Some weeks ago I read a \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://notes.xoxco.com/post/27999787765/is-it-time-for-password-less-login\\\"\\n  }, \\\"blog post\\\"), \\\" by Ben Brown about password less login. I wanted to learn more about custom authentication in Django and I thought that implementing password less login would be good way to learn.\\\"), mdx(\\\"h2\\\", null, \\\"Installation\\\"), mdx(\\\"p\\\", null, \\\"Run this command to install django-nopassword\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\"\\n  }, \\\"pip install django-nopassword\\\\n\\\")), mdx(\\\"h2\\\", null, \\\"Usage\\\"), mdx(\\\"p\\\", null, \\\"Add the app to installed apps\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"INSTALLED_APPS = (\\\\n    ...\\\\n    'nopassword',\\\\n    ...\\\\n)\\\\n\\\")), mdx(\\\"p\\\", null, \\\"Set the authentication backend to \\\", mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"EmailBackend\\\")), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"AUTHENTICATION_BACKENDS = (\\\\n     'nopassword.backends.EmailBackend',\\\\n)\\\\n\\\")), mdx(\\\"p\\\", null, \\\"Add urls to your \\\", mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"urls.py\\\")), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"urlpatterns = patterns('',\\\\n    ...\\\\n    url(r'^accounts/', include('nopassword.urls')),\\\\n    ...\\\\n)\\\\n\\\")));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eSome weeks ago I read a \\u003ca href=\\\"http://notes.xoxco.com/post/27999787765/is-it-time-for-password-less-login\\\"\\u003eblog post\\u003c/a\\u003e by Ben Brown about password less login. I wanted to learn more about custom authentication in Django and I thought that implementing password less login would be good way to learn.\\u003c/p\\u003e\\u003ch2\\u003eInstallation\\u003c/h2\\u003e\\u003cp\\u003eRun this command to install django-nopassword\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\"\\u003e\\u003cpre class=\\\"prism-code language-undefined\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003epip install django-nopassword\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003ch2\\u003eUsage\\u003c/h2\\u003e\\u003cp\\u003eAdd the app to installed apps\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eINSTALLED_APPS \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;nopassword\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eSet the authentication backend to \\u003cem\\u003eEmailBackend\\u003c/em\\u003e\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eAUTHENTICATION_BACKENDS \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e     \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;nopassword.backends.EmailBackend\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eAdd urls to your \\u003cem\\u003eurls.py\\u003c/em\\u003e\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eurlpatterns \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e patterns\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    url\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003er\\u0026#x27;^accounts/\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e include\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;nopassword.urls\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\",\"scope\":{}},\"count\":2},{\"slug\":\"django-app-custom-user\",\"layout\":\"post\",\"title\":\"Making your Django app ready for custom users\",\"date\":\"2013-05-22T00:00:00.000Z\",\"category\":\"Django\",\"tags\":[\"django\",\"custom user\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"In Django 1.5 custom users was introduced. This means that the user model can be swapped for a\\\\ncustom model. How does this affect third-party apps? Foreignkeys and other relations will crash\\\\nif they point to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"auth.User\\\"), \\\". It will raise a exception of the type:\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"AttributeError: Manager isn't available; User has been swapped for 'myapp.CustomUser'\\\")), mdx(\\\"h3\\\", null, \\\"A possible solution\\\"), mdx(\\\"p\\\", null, \\\"In \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://github.com/relekang/django-nopassword/\\\"\\n  }, \\\"django-nopassword\\\"), \\\" I tried a some different approaches. I found a solution that worked well in that app. I added a file, called it \\\", mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"utils.py\\\"), \\\", did not find a more suitable name. The code is listed below:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"# -*- coding: utf-8 -*-\\\\nimport django\\\\n\\\\nif django.VERSION \\u003e= (1, 5):\\\\n    from django.contrib.auth import get_user_model\\\\n    User = get_user_model()\\\\nelse:\\\\n    from django.contrib.auth.models import User\\\\n\\\")), mdx(\\\"p\\\", null, \\\"Everywhere I use the User model I changed the import to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"from app_name.utils import User\\\"), \\\" where app_name in this case was \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"django_nopassword\\\"), \\\".\\\"), mdx(\\\"h3\\\", null, \\\"Testing\\\"), mdx(\\\"p\\\", null, \\\"To be certain that everything was working correctly with custom user I created some tests and \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/relekang/django-nopassword/tree/master/tests\\\"\\n  }, \\\"a test app with a custom user\\\"), \\\". These tests also work nicely on Django 1.4 since \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"AUTH_USER_MODEL\\\"), \\\" is ignored in earlier versions of Django. To make it easier to test with different environments I added it to \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://travis-ci.org/\\\"\\n  }, \\\"Travis\\\"), \\\" and added a hook to the Github repository. The travis settings:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-yaml\\\"\\n  }, \\\"language: python\\\\n\\\\npython:\\\\n  - \\\\\\\"2.6\\\\\\\"\\\\n  - \\\\\\\"2.7\\\\\\\"\\\\n\\\\nenv:\\\\n  - DJANGO_VERSION=1.4\\\\n  - DJANGO_VERSION=1.5\\\\n\\\\ninstall:\\\\n  - pip install psycopg2\\\\n  - pip install django==$DJANGO_VERSION\\\\n\\\\nscript: python setup.py test\\\\n\\\\nbefore_script:\\\\n  - psql -c 'create database django_nopassword;' -U postgres\\\\n\\\")));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eIn Django 1.5 custom users was introduced. This means that the user model can be swapped for a\\ncustom model. How does this affect third-party apps? Foreignkeys and other relations will crash\\nif they point to \\u003ccode\\u003eauth.User\\u003c/code\\u003e. It will raise a exception of the type:\\n\\u003ccode\\u003eAttributeError: Manager isn\\u0026#x27;t available; User has been swapped for \\u0026#x27;myapp.CustomUser\\u0026#x27;\\u003c/code\\u003e\\u003c/p\\u003e\\u003ch3\\u003eA possible solution\\u003c/h3\\u003e\\u003cp\\u003eIn \\u003ca href=\\\"http://github.com/relekang/django-nopassword/\\\"\\u003edjango-nopassword\\u003c/a\\u003e I tried a some different approaches. I found a solution that worked well in that app. I added a file, called it \\u003cem\\u003eutils.py\\u003c/em\\u003e, did not find a more suitable name. The code is listed below:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e# -*- coding: utf-8 -*-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e django\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e django\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eVERSION \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e1\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e5\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efrom\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e django\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003econtrib\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eauth \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e get_user_model\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    User \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e get_user_model\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efrom\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e django\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003econtrib\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eauth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emodels \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e User\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eEverywhere I use the User model I changed the import to \\u003ccode\\u003efrom app_name.utils import User\\u003c/code\\u003e where app_name in this case was \\u003ccode\\u003edjango_nopassword\\u003c/code\\u003e.\\u003c/p\\u003e\\u003ch3\\u003eTesting\\u003c/h3\\u003e\\u003cp\\u003eTo be certain that everything was working correctly with custom user I created some tests and \\u003ca href=\\\"https://github.com/relekang/django-nopassword/tree/master/tests\\\"\\u003ea test app with a custom user\\u003c/a\\u003e. These tests also work nicely on Django 1.4 since \\u003ccode\\u003eAUTH_USER_MODEL\\u003c/code\\u003e is ignored in earlier versions of Django. To make it easier to test with different environments I added it to \\u003ca href=\\\"https://travis-ci.org/\\\"\\u003eTravis\\u003c/a\\u003e and added a hook to the Github repository. The travis settings:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"yaml\\\"\\u003e\\u003cpre class=\\\"prism-code language-yaml\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003elanguage\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e python\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003epython\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;2.6\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;2.7\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eenv\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e DJANGO_VERSION=1.4\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e DJANGO_VERSION=1.5\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003einstall\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e pip install psycopg2\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e pip install django==$DJANGO_VERSION\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003escript\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e python setup.py test\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ebefore_script\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e psql \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ec \\u0026#x27;create database django_nopassword;\\u0026#x27; \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eU postgres\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\",\"scope\":{}},\"count\":1},{\"slug\":\"use-array-in-postgresql\",\"layout\":\"post\",\"title\":\"Use array in postgresql with django\",\"date\":\"2013-01-27T00:00:00.000Z\",\"category\":\"Django\",\"tags\":[\"tags\",\"postgres\",\"array\",\"pgarray\",\"django\"],\"redirect_from\":\"/2013/01/27/use-array-in-postgresql/\",\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"I wanted to use arrays in postgresql for tags on this blog. I installed the packages\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"djorm-ext-pgarray\\\"), \\\" and \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"djorm-ext-expressions\\\"), \\\". The model for the blogposts is displayed below. \\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"from django.db import models\\\\nfrom djorm_expressions.models import ExpressionManager\\\\nfrom djorm_pgarray.fields import ArrayField\\\\n\\\\nclass Post (models.Model):\\\\n    title = models.CharField(max_length=80)\\\\n    slug = models.SlugField()\\\\n    pub_date = models.DateField()\\\\n    content = models.TextField()\\\\n    tags = ArrayField(dbtype=\\\\\\\"varchar(60)\\\\\\\")\\\\n    objects = ExpressionManager()\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The tags field is using \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"djorm_pgarray.fields.ArrayField\\\"), \\\" and the ExpressionManagaer is\\\\nneeded if one would need to make a query using the ArrayField.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eI wanted to use arrays in postgresql for tags on this blog. I installed the packages\\n\\u003ccode\\u003edjorm-ext-pgarray\\u003c/code\\u003e and \\u003ccode\\u003edjorm-ext-expressions\\u003c/code\\u003e. The model for the blogposts is displayed below. \\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efrom\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e django\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003edb \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e models\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efrom\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e djorm_expressions\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emodels \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e ExpressionManager\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efrom\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e djorm_pgarray\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003efields \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e ArrayField\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eclass\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token class-name\\\"\\u003ePost\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emodels\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eModel\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    title \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e models\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eCharField\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emax_length\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e80\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    slug \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e models\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eSlugField\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    pub_date \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e models\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eDateField\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    content \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e models\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eTextField\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    tags \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e ArrayField\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003edbtype\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;varchar(60)\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    objects \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e ExpressionManager\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe tags field is using \\u003ccode\\u003edjorm_pgarray.fields.ArrayField\\u003c/code\\u003e and the ExpressionManagaer is\\nneeded if one would need to make a query using the ArrayField.\\u003c/p\\u003e\",\"scope\":{}},\"count\":1}]},{\"slug\":\"moving-to-pelican\",\"layout\":\"post\",\"title\":\"Moving the blog to pelican\",\"date\":\"2014-05-07T00:00:00.000Z\",\"tags\":[\"this\",\"static-site\",\"pelican\",\"jekyll\"],\"category\":\"the blog\",\"relatedPosts\":[{\"slug\":\"alfred-scripts-for-jekyll\",\"layout\":\"post\",\"title\":\"Alfred scripts for Jekyll\",\"date\":\"2013-02-26T00:00:00.000Z\",\"tags\":[\"alfredapp\",\"jekyll\",\"shell script\"],\"category\":\"Alfred\",\"author\":\"Rolf Erik Lekang\",\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://www.alfredapp.com/\\\"\\n  }, \\\"Alfred App\\\"), \\\" is the productivity application I use the most, and the one that actually boosts productivity. I recently started to use Jekyll as a blog engine. I wanted an easy way to open a new file with the default parameters already in place. The tool for the job was a shell script as a \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://www.alfredapp.com/powerpack/#extensions-commands\\\"\\n  }, \\\"Alfred extension\\\")), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-bash\\\"\\n  }, \\\"DRAFT_PATH=~/relekang.github.com/drafts/{query}.md\\\\n\\\\nif [ -f $DRAFT_PATH ]\\\\nthen\\\\n  echo \\\\\\\"File exists\\\\\\\"\\\\n  open http://127.0.0.1:4000/drafts/{query}.html\\\\n  open $DRAFT_PATH\\\\nelse\\\\n  echo \\\\\\\"Creating file\\\\\\\"\\\\n  touch $DRAFT_PATH\\\\n  echo \\\\\\\"---\\\\\\\" \\u003e $DRAFT_PATH\\\\n  open http://127.0.0.1:4000/drafts/{query}.html\\\\n  open $DRAFT_PATH\\\\nfi\\\\n\\\")), mdx(\\\"p\\\", null, mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"em\\\"\\n  }, \\\"# { page.title }\\\"), \\\" has double curly-brackets in the script, but I could not get Jekyll to ignore them.\\\")), mdx(\\\"p\\\", null, \\\"I also wanted an easy way to add date and copy the post to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"_posts\\\"), \\\" when I am finished writing it.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-bash\\\"\\n  }, \\\"DATE=date '+%Y-%m-%d'\\\\nDRAFT_PATH=~/relekang.github.com/drafts/{query}.md\\\\nPUBLISH_PATH=~/relekang.github.com/_posts/$DATE-{query}.md\\\\n\\\\nif [ -f $DRAFT_PATH ]\\\\nthen\\\\n  mv $DRAFT_PATH $PUBLISH_PATH\\\\n  echo \\\\\\\"Post added to _posts\\\\\\\"\\\\nelse\\\\n  echo \\\\\\\"Could not find draft\\\\\\\"\\\\nfi\\\\n\\\")), mdx(\\\"p\\\", null, \\\"Both scripts are set up with Silent = True and Output = True. Silent stops Alfred\\\\nfrom opening a terminal window. Output makes output data appear in notification center.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003e\\u003ca href=\\\"http://www.alfredapp.com/\\\"\\u003eAlfred App\\u003c/a\\u003e is the productivity application I use the most, and the one that actually boosts productivity. I recently started to use Jekyll as a blog engine. I wanted an easy way to open a new file with the default parameters already in place. The tool for the job was a shell script as a \\u003ca href=\\\"http://www.alfredapp.com/powerpack/#extensions-commands\\\"\\u003eAlfred extension\\u003c/a\\u003e\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"bash\\\"\\u003e\\u003cpre class=\\\"prism-code language-bash\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token assign-left variable\\\"\\u003eDRAFT_PATH\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e~/relekang.github.com/drafts/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003equery\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e.md\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e -f \\u003c/span\\u003e\\u003cspan class=\\\"token variable\\\"\\u003e$DRAFT_PATH\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethen\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token builtin class-name\\\"\\u003eecho\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;File exists\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eopen\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e http://127.0.0.1:4000/drafts/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003equery\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e.html\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eopen\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token variable\\\"\\u003e$DRAFT_PATH\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token builtin class-name\\\"\\u003eecho\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;Creating file\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003etouch\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token variable\\\"\\u003e$DRAFT_PATH\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token builtin class-name\\\"\\u003eecho\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;---\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token variable\\\"\\u003e$DRAFT_PATH\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eopen\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e http://127.0.0.1:4000/drafts/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003equery\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e.html\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eopen\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token variable\\\"\\u003e$DRAFT_PATH\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efi\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003e\\u003cem\\u003e\\u003ccode\\u003e# { page.title }\\u003c/code\\u003e has double curly-brackets in the script, but I could not get Jekyll to ignore them.\\u003c/em\\u003e\\u003c/p\\u003e\\u003cp\\u003eI also wanted an easy way to add date and copy the post to \\u003ccode\\u003e_posts\\u003c/code\\u003e when I am finished writing it.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"bash\\\"\\u003e\\u003cpre class=\\\"prism-code language-bash\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token assign-left variable\\\"\\u003eDATE\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003edate \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;+%Y-%m-%d\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token assign-left variable\\\"\\u003eDRAFT_PATH\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e~/relekang.github.com/drafts/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003equery\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e.md\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token assign-left variable\\\"\\u003ePUBLISH_PATH\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e~/relekang.github.com/_posts/\\u003c/span\\u003e\\u003cspan class=\\\"token variable\\\"\\u003e$DATE\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003equery\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e.md\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e -f \\u003c/span\\u003e\\u003cspan class=\\\"token variable\\\"\\u003e$DRAFT_PATH\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethen\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003emv\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token variable\\\"\\u003e$DRAFT_PATH\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token variable\\\"\\u003e$PUBLISH_PATH\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token builtin class-name\\\"\\u003eecho\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;Post added to _posts\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token builtin class-name\\\"\\u003eecho\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;Could not find draft\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efi\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eBoth scripts are set up with Silent = True and Output = True. Silent stops Alfred\\nfrom opening a terminal window. Output makes output data appear in notification center.\\u003c/p\\u003e\",\"scope\":{}},\"count\":1}]},{\"slug\":\"building-tumblr-theme-with-grunt\",\"layout\":\"post\",\"title\":\"Building a Tumblr theme with GruntJS\",\"date\":\"2014-02-02T00:00:00.000Z\",\"category\":\"Cookiecutter\",\"tags\":[\"gruntjs\",\"cookiecutter\",\"tumblr\"],\"relatedPosts\":[]},{\"slug\":\"backup-routines-for-redisdb\",\"layout\":\"post\",\"title\":\"Backup routine for Redis\",\"date\":\"2013-10-24T00:00:00.000Z\",\"category\":\"Databases\",\"tags\":[\"db\",\"backup\",\"redis\"],\"relatedPosts\":[]},{\"slug\":\"django-app-custom-user\",\"layout\":\"post\",\"title\":\"Making your Django app ready for custom users\",\"date\":\"2013-05-22T00:00:00.000Z\",\"category\":\"Django\",\"tags\":[\"django\",\"custom user\"],\"relatedPosts\":[{\"slug\":\"django-nopassword\",\"layout\":\"post\",\"title\":\"django-nopassword\",\"date\":\"2012-09-28T00:00:00.000Z\",\"category\":\"Django\",\"tags\":[\"django\",\"no-password\",\"email-authentication\",\"authentication\"],\"redirect_from\":\"/2012/09/28/django-nopassword/\",\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"Some weeks ago I read a \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://notes.xoxco.com/post/27999787765/is-it-time-for-password-less-login\\\"\\n  }, \\\"blog post\\\"), \\\" by Ben Brown about password less login. I wanted to learn more about custom authentication in Django and I thought that implementing password less login would be good way to learn.\\\"), mdx(\\\"h2\\\", null, \\\"Installation\\\"), mdx(\\\"p\\\", null, \\\"Run this command to install django-nopassword\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\"\\n  }, \\\"pip install django-nopassword\\\\n\\\")), mdx(\\\"h2\\\", null, \\\"Usage\\\"), mdx(\\\"p\\\", null, \\\"Add the app to installed apps\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"INSTALLED_APPS = (\\\\n    ...\\\\n    'nopassword',\\\\n    ...\\\\n)\\\\n\\\")), mdx(\\\"p\\\", null, \\\"Set the authentication backend to \\\", mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"EmailBackend\\\")), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"AUTHENTICATION_BACKENDS = (\\\\n     'nopassword.backends.EmailBackend',\\\\n)\\\\n\\\")), mdx(\\\"p\\\", null, \\\"Add urls to your \\\", mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"urls.py\\\")), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"urlpatterns = patterns('',\\\\n    ...\\\\n    url(r'^accounts/', include('nopassword.urls')),\\\\n    ...\\\\n)\\\\n\\\")));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eSome weeks ago I read a \\u003ca href=\\\"http://notes.xoxco.com/post/27999787765/is-it-time-for-password-less-login\\\"\\u003eblog post\\u003c/a\\u003e by Ben Brown about password less login. I wanted to learn more about custom authentication in Django and I thought that implementing password less login would be good way to learn.\\u003c/p\\u003e\\u003ch2\\u003eInstallation\\u003c/h2\\u003e\\u003cp\\u003eRun this command to install django-nopassword\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\"\\u003e\\u003cpre class=\\\"prism-code language-undefined\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003epip install django-nopassword\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003ch2\\u003eUsage\\u003c/h2\\u003e\\u003cp\\u003eAdd the app to installed apps\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eINSTALLED_APPS \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;nopassword\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eSet the authentication backend to \\u003cem\\u003eEmailBackend\\u003c/em\\u003e\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eAUTHENTICATION_BACKENDS \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e     \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;nopassword.backends.EmailBackend\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eAdd urls to your \\u003cem\\u003eurls.py\\u003c/em\\u003e\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eurlpatterns \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e patterns\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    url\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003er\\u0026#x27;^accounts/\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e include\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;nopassword.urls\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\",\"scope\":{}},\"count\":1},{\"slug\":\"use-array-in-postgresql\",\"layout\":\"post\",\"title\":\"Use array in postgresql with django\",\"date\":\"2013-01-27T00:00:00.000Z\",\"category\":\"Django\",\"tags\":[\"tags\",\"postgres\",\"array\",\"pgarray\",\"django\"],\"redirect_from\":\"/2013/01/27/use-array-in-postgresql/\",\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"I wanted to use arrays in postgresql for tags on this blog. I installed the packages\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"djorm-ext-pgarray\\\"), \\\" and \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"djorm-ext-expressions\\\"), \\\". The model for the blogposts is displayed below. \\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"from django.db import models\\\\nfrom djorm_expressions.models import ExpressionManager\\\\nfrom djorm_pgarray.fields import ArrayField\\\\n\\\\nclass Post (models.Model):\\\\n    title = models.CharField(max_length=80)\\\\n    slug = models.SlugField()\\\\n    pub_date = models.DateField()\\\\n    content = models.TextField()\\\\n    tags = ArrayField(dbtype=\\\\\\\"varchar(60)\\\\\\\")\\\\n    objects = ExpressionManager()\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The tags field is using \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"djorm_pgarray.fields.ArrayField\\\"), \\\" and the ExpressionManagaer is\\\\nneeded if one would need to make a query using the ArrayField.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eI wanted to use arrays in postgresql for tags on this blog. I installed the packages\\n\\u003ccode\\u003edjorm-ext-pgarray\\u003c/code\\u003e and \\u003ccode\\u003edjorm-ext-expressions\\u003c/code\\u003e. The model for the blogposts is displayed below. \\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efrom\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e django\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003edb \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e models\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efrom\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e djorm_expressions\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emodels \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e ExpressionManager\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efrom\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e djorm_pgarray\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003efields \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e ArrayField\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eclass\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token class-name\\\"\\u003ePost\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emodels\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eModel\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    title \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e models\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eCharField\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emax_length\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e80\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    slug \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e models\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eSlugField\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    pub_date \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e models\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eDateField\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    content \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e models\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eTextField\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    tags \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e ArrayField\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003edbtype\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;varchar(60)\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    objects \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e ExpressionManager\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe tags field is using \\u003ccode\\u003edjorm_pgarray.fields.ArrayField\\u003c/code\\u003e and the ExpressionManagaer is\\nneeded if one would need to make a query using the ArrayField.\\u003c/p\\u003e\",\"scope\":{}},\"count\":1},{\"slug\":\"django-nopassword-one-point-o\",\"layout\":\"post\",\"title\":\"django-nopassword reached 1.0\",\"date\":\"2014-10-03T00:00:00.000Z\",\"categories\":\"django\",\"tags\":[\"django\",\"nopassword\",\"django-nopassword\",\"authentication\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"I started the this project as way to understand django authentication backends\\\\nabout two years ago. I read a blog post by Ben Brown about \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://notes.xoxco.com/post/27999787765/is-it-time-for-password-less-login\\\"\\n  }, \\\"password-less\\\\nlogin\\\"), \\\"\\\\nand thought that it would a great case to learn custom django authentication\\\\nbackends.\\\"), mdx(\\\"p\\\", null, \\\"A lot has changed since then and the project has moved from being an experiment to\\\\nsomething useful. I myself use it in production on several sites. I have heard from\\\\nothers who also use it. I hope you all like some of the new features in this release.\\\"), mdx(\\\"hr\\\", null), mdx(\\\"h3\\\", null, \\\"The new features since last release\\\"), mdx(\\\"p\\\", null, mdx(\\\"strong\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Rename the app to nopassword:\\\"), \\\" This means that from this version installed apps\\\\nin django should list \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"nopassword\\\"), \\\" not \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"django_nopassword\\\"), \\\". In addition all imports\\\\nneed to point to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"nopassword\\\"), \\\" not \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"django_nopassword\\\"), \\\".\\\"), mdx(\\\"p\\\", null, mdx(\\\"strong\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"The possibility to customize code delivery:\\\"), \\\"\\\\nMost of the code in the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"EmailBackend\\\"), \\\" has been moved to a new backend called\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"NoPasswordBackend\\\"), \\\". The latter is not meant to be used on its own, but it will\\\\nmake it easier to create other backends similar to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"EmailBackend\\\"), \\\". With other\\\\nwords, it has become easier to send the login codes with other technologies like\\\\nsms.\\\"), mdx(\\\"p\\\", null, mdx(\\\"strong\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Verification of the user:\\\"), \\\"\\\\ndjango-nopassword uses \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"user.is_active()\\\"), \\\" to determine whether a user is still\\\\nactive or not. In this release we moved this into its own method,\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"NoPasswordBackend.verify_user\\\"), \\\", which makes it easier to create your own logic\\\\nto verify your users.\\\"), mdx(\\\"p\\\", null, mdx(\\\"strong\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Django 1.7 support:\\\"), \\\" Now it is tested and known to work with the released version\\\\nof Django 1.7. Earlier it had just support for the beta 3.\\\"), mdx(\\\"p\\\", null, mdx(\\\"strong\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Migrations:\\\"), \\\" Support for both Django 1.7 migrations and South migrations. To use\\\\nSouth it is necessary to use version the lastest version(1.0), since it is the only\\\\nversion that looks for migrations in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"south_migrations\\\"), \\\".\\\"), mdx(\\\"hr\\\", null), mdx(\\\"p\\\", null, \\\"The test setup has also been changed to use \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://tox.readthedocs.org/en/latest/\\\"\\n  }, \\\"tox\\\"), \\\".\\\\nIt makes it a lot easier to test specific django and python versions locally. I have\\\\nto mention the new multi-dimensional configuration of environments. It makes it easier\\\\ngenerate test environments for several python and django versions with all combinations.\\\"), mdx(\\\"p\\\", null, \\\"If you use django-nopassword on any on your projects please let me know. I would love\\\\nto hear about it.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eI started the this project as way to understand django authentication backends\\nabout two years ago. I read a blog post by Ben Brown about \\u003ca href=\\\"http://notes.xoxco.com/post/27999787765/is-it-time-for-password-less-login\\\"\\u003epassword-less\\nlogin\\u003c/a\\u003e\\nand thought that it would a great case to learn custom django authentication\\nbackends.\\u003c/p\\u003e\\u003cp\\u003eA lot has changed since then and the project has moved from being an experiment to\\nsomething useful. I myself use it in production on several sites. I have heard from\\nothers who also use it. I hope you all like some of the new features in this release.\\u003c/p\\u003e\\u003chr/\\u003e\\u003ch3\\u003eThe new features since last release\\u003c/h3\\u003e\\u003cp\\u003e\\u003cstrong\\u003eRename the app to nopassword:\\u003c/strong\\u003e This means that from this version installed apps\\nin django should list \\u003ccode\\u003enopassword\\u003c/code\\u003e not \\u003ccode\\u003edjango_nopassword\\u003c/code\\u003e. In addition all imports\\nneed to point to \\u003ccode\\u003enopassword\\u003c/code\\u003e not \\u003ccode\\u003edjango_nopassword\\u003c/code\\u003e.\\u003c/p\\u003e\\u003cp\\u003e\\u003cstrong\\u003eThe possibility to customize code delivery:\\u003c/strong\\u003e\\nMost of the code in the \\u003ccode\\u003eEmailBackend\\u003c/code\\u003e has been moved to a new backend called\\n\\u003ccode\\u003eNoPasswordBackend\\u003c/code\\u003e. The latter is not meant to be used on its own, but it will\\nmake it easier to create other backends similar to \\u003ccode\\u003eEmailBackend\\u003c/code\\u003e. With other\\nwords, it has become easier to send the login codes with other technologies like\\nsms.\\u003c/p\\u003e\\u003cp\\u003e\\u003cstrong\\u003eVerification of the user:\\u003c/strong\\u003e\\ndjango-nopassword uses \\u003ccode\\u003euser.is_active()\\u003c/code\\u003e to determine whether a user is still\\nactive or not. In this release we moved this into its own method,\\n\\u003ccode\\u003eNoPasswordBackend.verify_user\\u003c/code\\u003e, which makes it easier to create your own logic\\nto verify your users.\\u003c/p\\u003e\\u003cp\\u003e\\u003cstrong\\u003eDjango 1.7 support:\\u003c/strong\\u003e Now it is tested and known to work with the released version\\nof Django 1.7. Earlier it had just support for the beta 3.\\u003c/p\\u003e\\u003cp\\u003e\\u003cstrong\\u003eMigrations:\\u003c/strong\\u003e Support for both Django 1.7 migrations and South migrations. To use\\nSouth it is necessary to use version the lastest version(1.0), since it is the only\\nversion that looks for migrations in \\u003ccode\\u003esouth_migrations\\u003c/code\\u003e.\\u003c/p\\u003e\\u003chr/\\u003e\\u003cp\\u003eThe test setup has also been changed to use \\u003ca href=\\\"https://tox.readthedocs.org/en/latest/\\\"\\u003etox\\u003c/a\\u003e.\\nIt makes it a lot easier to test specific django and python versions locally. I have\\nto mention the new multi-dimensional configuration of environments. It makes it easier\\ngenerate test environments for several python and django versions with all combinations.\\u003c/p\\u003e\\u003cp\\u003eIf you use django-nopassword on any on your projects please let me know. I would love\\nto hear about it.\\u003c/p\\u003e\",\"scope\":{}},\"count\":1}]},{\"slug\":\"stats-are-fun\",\"layout\":\"post\",\"title\":\"Stats are fun\",\"date\":\"2013-03-03T00:00:00.000Z\",\"category\":\"Python\",\"tags\":[\"pypstats\",\"pypi\",\"stats\",\"geek-tool\"],\"relatedPosts\":[]},{\"slug\":\"alfred-scripts-for-jekyll\",\"layout\":\"post\",\"title\":\"Alfred scripts for Jekyll\",\"date\":\"2013-02-26T00:00:00.000Z\",\"tags\":[\"alfredapp\",\"jekyll\",\"shell script\"],\"category\":\"Alfred\",\"author\":\"Rolf Erik Lekang\",\"relatedPosts\":[{\"slug\":\"moving-to-pelican\",\"layout\":\"post\",\"title\":\"Moving the blog to pelican\",\"date\":\"2014-05-07T00:00:00.000Z\",\"tags\":[\"this\",\"static-site\",\"pelican\",\"jekyll\"],\"category\":\"the blog\",\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"A couple of days ago I swapped the static site generator used at this blog\\\\nfrom Jekyll to Pelican. It was not to much work, mostly changing the metadata of the posts.\\\\nThe reason I changed engine is mostly to try out something different. I wanted to know the differences about the two of the top static site generators. It should not be surprising that I turned towards something written in python.\\\"), mdx(\\\"p\\\", null, \\\"I configured Pelican to some level to make it behave as I wanted to. I wrote some custom path settings to remove the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\".html\\\"), \\\" at the end of the url to each post by generating folders with index.html. The paths from jekyll where on the form \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"/year/month/day/slug/\\\"), \\\". I still wanted to support incoming links to those parts. The urls on the new setup is in the same pattern to solve that. In time I would like to use the pattern \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"/year/slug/\\\"), \\\" or even just the slug. To do that I need to find a way to redirect the old urls. Any ideas on how to solve the redirect issue are more than welcome. The theme will probably be available at my Github profile or something similar soon.\\\"), mdx(\\\"p\\\", null, \\\"I created a new Pelican theme for the blog. It is a work in progress. However, I think it is a great improvement over the old blog. Especially the fact that it does not load a huge css library to display something as simple as the design of this blog.\\\"), mdx(\\\"h3\\\", null, \\\"So what about hosting?\\\"), mdx(\\\"p\\\", null, \\\"I still host the site at github pages, using a \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/relekang/rolflekang.com/blob/gh-pages/CNAME\\\"\\n  }, \\\"CNAME\\\"), \\\" file to serve it on my domain \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://rolflekang.com\\\"\\n  }, \\\"rolflekang.com\\\"), \\\". I use a python package called \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/davisp/ghp-import\\\"\\n  }, \\\"ghp-import\\\"), \\\" to push the generated site to Github Pages. The source of the blog is not stored in the same repository, because I do not want people to see my unfinished posts, but still track them in the repo. Therefor I have added the public repository as a remote called \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gh-pages\\\"), \\\". I use the Make task below to publish to github pages. The \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"publish\\\"), \\\" task that it depends on is just the standard task from the Makefile generated by \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"pelican-quickstart\\\"), \\\".\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-make\\\"\\n  }, \\\"github: publish\\\\n  cp CNAME $(OUTPUTDIR)\\\\n  ghp-import $(OUTPUTDIR)\\\\n  git push gh gh-pages -f\\\\n\\\")));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eA couple of days ago I swapped the static site generator used at this blog\\nfrom Jekyll to Pelican. It was not to much work, mostly changing the metadata of the posts.\\nThe reason I changed engine is mostly to try out something different. I wanted to know the differences about the two of the top static site generators. It should not be surprising that I turned towards something written in python.\\u003c/p\\u003e\\u003cp\\u003eI configured Pelican to some level to make it behave as I wanted to. I wrote some custom path settings to remove the \\u003ccode\\u003e.html\\u003c/code\\u003e at the end of the url to each post by generating folders with index.html. The paths from jekyll where on the form \\u003ccode\\u003e/year/month/day/slug/\\u003c/code\\u003e. I still wanted to support incoming links to those parts. The urls on the new setup is in the same pattern to solve that. In time I would like to use the pattern \\u003ccode\\u003e/year/slug/\\u003c/code\\u003e or even just the slug. To do that I need to find a way to redirect the old urls. Any ideas on how to solve the redirect issue are more than welcome. The theme will probably be available at my Github profile or something similar soon.\\u003c/p\\u003e\\u003cp\\u003eI created a new Pelican theme for the blog. It is a work in progress. However, I think it is a great improvement over the old blog. Especially the fact that it does not load a huge css library to display something as simple as the design of this blog.\\u003c/p\\u003e\\u003ch3\\u003eSo what about hosting?\\u003c/h3\\u003e\\u003cp\\u003eI still host the site at github pages, using a \\u003ca href=\\\"https://github.com/relekang/rolflekang.com/blob/gh-pages/CNAME\\\"\\u003eCNAME\\u003c/a\\u003e file to serve it on my domain \\u003ca href=\\\"http://rolflekang.com\\\"\\u003erolflekang.com\\u003c/a\\u003e. I use a python package called \\u003ca href=\\\"https://github.com/davisp/ghp-import\\\"\\u003eghp-import\\u003c/a\\u003e to push the generated site to Github Pages. The source of the blog is not stored in the same repository, because I do not want people to see my unfinished posts, but still track them in the repo. Therefor I have added the public repository as a remote called \\u003ccode\\u003egh-pages\\u003c/code\\u003e. I use the Make task below to publish to github pages. The \\u003ccode\\u003epublish\\u003c/code\\u003e task that it depends on is just the standard task from the Makefile generated by \\u003ccode\\u003epelican-quickstart\\u003c/code\\u003e.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"make\\\"\\u003e\\u003cpre class=\\\"prism-code language-make\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003egithub: publish\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  cp CNAME $(OUTPUTDIR)\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  ghp-import $(OUTPUTDIR)\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  git push gh gh-pages -f\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\",\"scope\":{}},\"count\":1}]},{\"slug\":\"use-array-in-postgresql\",\"layout\":\"post\",\"title\":\"Use array in postgresql with django\",\"date\":\"2013-01-27T00:00:00.000Z\",\"category\":\"Django\",\"tags\":[\"tags\",\"postgres\",\"array\",\"pgarray\",\"django\"],\"redirect_from\":\"/2013/01/27/use-array-in-postgresql/\",\"relatedPosts\":[{\"slug\":\"django-nopassword\",\"layout\":\"post\",\"title\":\"django-nopassword\",\"date\":\"2012-09-28T00:00:00.000Z\",\"category\":\"Django\",\"tags\":[\"django\",\"no-password\",\"email-authentication\",\"authentication\"],\"redirect_from\":\"/2012/09/28/django-nopassword/\",\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"Some weeks ago I read a \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://notes.xoxco.com/post/27999787765/is-it-time-for-password-less-login\\\"\\n  }, \\\"blog post\\\"), \\\" by Ben Brown about password less login. I wanted to learn more about custom authentication in Django and I thought that implementing password less login would be good way to learn.\\\"), mdx(\\\"h2\\\", null, \\\"Installation\\\"), mdx(\\\"p\\\", null, \\\"Run this command to install django-nopassword\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\"\\n  }, \\\"pip install django-nopassword\\\\n\\\")), mdx(\\\"h2\\\", null, \\\"Usage\\\"), mdx(\\\"p\\\", null, \\\"Add the app to installed apps\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"INSTALLED_APPS = (\\\\n    ...\\\\n    'nopassword',\\\\n    ...\\\\n)\\\\n\\\")), mdx(\\\"p\\\", null, \\\"Set the authentication backend to \\\", mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"EmailBackend\\\")), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"AUTHENTICATION_BACKENDS = (\\\\n     'nopassword.backends.EmailBackend',\\\\n)\\\\n\\\")), mdx(\\\"p\\\", null, \\\"Add urls to your \\\", mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"urls.py\\\")), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"urlpatterns = patterns('',\\\\n    ...\\\\n    url(r'^accounts/', include('nopassword.urls')),\\\\n    ...\\\\n)\\\\n\\\")));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eSome weeks ago I read a \\u003ca href=\\\"http://notes.xoxco.com/post/27999787765/is-it-time-for-password-less-login\\\"\\u003eblog post\\u003c/a\\u003e by Ben Brown about password less login. I wanted to learn more about custom authentication in Django and I thought that implementing password less login would be good way to learn.\\u003c/p\\u003e\\u003ch2\\u003eInstallation\\u003c/h2\\u003e\\u003cp\\u003eRun this command to install django-nopassword\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\"\\u003e\\u003cpre class=\\\"prism-code language-undefined\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003epip install django-nopassword\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003ch2\\u003eUsage\\u003c/h2\\u003e\\u003cp\\u003eAdd the app to installed apps\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eINSTALLED_APPS \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;nopassword\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eSet the authentication backend to \\u003cem\\u003eEmailBackend\\u003c/em\\u003e\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eAUTHENTICATION_BACKENDS \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e     \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;nopassword.backends.EmailBackend\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eAdd urls to your \\u003cem\\u003eurls.py\\u003c/em\\u003e\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eurlpatterns \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e patterns\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    url\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003er\\u0026#x27;^accounts/\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e include\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;nopassword.urls\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\",\"scope\":{}},\"count\":1},{\"slug\":\"django-app-custom-user\",\"layout\":\"post\",\"title\":\"Making your Django app ready for custom users\",\"date\":\"2013-05-22T00:00:00.000Z\",\"category\":\"Django\",\"tags\":[\"django\",\"custom user\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"In Django 1.5 custom users was introduced. This means that the user model can be swapped for a\\\\ncustom model. How does this affect third-party apps? Foreignkeys and other relations will crash\\\\nif they point to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"auth.User\\\"), \\\". It will raise a exception of the type:\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"AttributeError: Manager isn't available; User has been swapped for 'myapp.CustomUser'\\\")), mdx(\\\"h3\\\", null, \\\"A possible solution\\\"), mdx(\\\"p\\\", null, \\\"In \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://github.com/relekang/django-nopassword/\\\"\\n  }, \\\"django-nopassword\\\"), \\\" I tried a some different approaches. I found a solution that worked well in that app. I added a file, called it \\\", mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"utils.py\\\"), \\\", did not find a more suitable name. The code is listed below:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"# -*- coding: utf-8 -*-\\\\nimport django\\\\n\\\\nif django.VERSION \\u003e= (1, 5):\\\\n    from django.contrib.auth import get_user_model\\\\n    User = get_user_model()\\\\nelse:\\\\n    from django.contrib.auth.models import User\\\\n\\\")), mdx(\\\"p\\\", null, \\\"Everywhere I use the User model I changed the import to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"from app_name.utils import User\\\"), \\\" where app_name in this case was \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"django_nopassword\\\"), \\\".\\\"), mdx(\\\"h3\\\", null, \\\"Testing\\\"), mdx(\\\"p\\\", null, \\\"To be certain that everything was working correctly with custom user I created some tests and \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/relekang/django-nopassword/tree/master/tests\\\"\\n  }, \\\"a test app with a custom user\\\"), \\\". These tests also work nicely on Django 1.4 since \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"AUTH_USER_MODEL\\\"), \\\" is ignored in earlier versions of Django. To make it easier to test with different environments I added it to \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://travis-ci.org/\\\"\\n  }, \\\"Travis\\\"), \\\" and added a hook to the Github repository. The travis settings:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-yaml\\\"\\n  }, \\\"language: python\\\\n\\\\npython:\\\\n  - \\\\\\\"2.6\\\\\\\"\\\\n  - \\\\\\\"2.7\\\\\\\"\\\\n\\\\nenv:\\\\n  - DJANGO_VERSION=1.4\\\\n  - DJANGO_VERSION=1.5\\\\n\\\\ninstall:\\\\n  - pip install psycopg2\\\\n  - pip install django==$DJANGO_VERSION\\\\n\\\\nscript: python setup.py test\\\\n\\\\nbefore_script:\\\\n  - psql -c 'create database django_nopassword;' -U postgres\\\\n\\\")));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eIn Django 1.5 custom users was introduced. This means that the user model can be swapped for a\\ncustom model. How does this affect third-party apps? Foreignkeys and other relations will crash\\nif they point to \\u003ccode\\u003eauth.User\\u003c/code\\u003e. It will raise a exception of the type:\\n\\u003ccode\\u003eAttributeError: Manager isn\\u0026#x27;t available; User has been swapped for \\u0026#x27;myapp.CustomUser\\u0026#x27;\\u003c/code\\u003e\\u003c/p\\u003e\\u003ch3\\u003eA possible solution\\u003c/h3\\u003e\\u003cp\\u003eIn \\u003ca href=\\\"http://github.com/relekang/django-nopassword/\\\"\\u003edjango-nopassword\\u003c/a\\u003e I tried a some different approaches. I found a solution that worked well in that app. I added a file, called it \\u003cem\\u003eutils.py\\u003c/em\\u003e, did not find a more suitable name. The code is listed below:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e# -*- coding: utf-8 -*-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e django\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e django\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eVERSION \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e1\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e5\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efrom\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e django\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003econtrib\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eauth \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e get_user_model\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    User \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e get_user_model\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efrom\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e django\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003econtrib\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eauth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emodels \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e User\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eEverywhere I use the User model I changed the import to \\u003ccode\\u003efrom app_name.utils import User\\u003c/code\\u003e where app_name in this case was \\u003ccode\\u003edjango_nopassword\\u003c/code\\u003e.\\u003c/p\\u003e\\u003ch3\\u003eTesting\\u003c/h3\\u003e\\u003cp\\u003eTo be certain that everything was working correctly with custom user I created some tests and \\u003ca href=\\\"https://github.com/relekang/django-nopassword/tree/master/tests\\\"\\u003ea test app with a custom user\\u003c/a\\u003e. These tests also work nicely on Django 1.4 since \\u003ccode\\u003eAUTH_USER_MODEL\\u003c/code\\u003e is ignored in earlier versions of Django. To make it easier to test with different environments I added it to \\u003ca href=\\\"https://travis-ci.org/\\\"\\u003eTravis\\u003c/a\\u003e and added a hook to the Github repository. The travis settings:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"yaml\\\"\\u003e\\u003cpre class=\\\"prism-code language-yaml\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003elanguage\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e python\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003epython\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;2.6\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;2.7\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eenv\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e DJANGO_VERSION=1.4\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e DJANGO_VERSION=1.5\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003einstall\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e pip install psycopg2\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e pip install django==$DJANGO_VERSION\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003escript\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e python setup.py test\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ebefore_script\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e psql \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ec \\u0026#x27;create database django_nopassword;\\u0026#x27; \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eU postgres\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\",\"scope\":{}},\"count\":1},{\"slug\":\"django-nopassword-one-point-o\",\"layout\":\"post\",\"title\":\"django-nopassword reached 1.0\",\"date\":\"2014-10-03T00:00:00.000Z\",\"categories\":\"django\",\"tags\":[\"django\",\"nopassword\",\"django-nopassword\",\"authentication\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"I started the this project as way to understand django authentication backends\\\\nabout two years ago. I read a blog post by Ben Brown about \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://notes.xoxco.com/post/27999787765/is-it-time-for-password-less-login\\\"\\n  }, \\\"password-less\\\\nlogin\\\"), \\\"\\\\nand thought that it would a great case to learn custom django authentication\\\\nbackends.\\\"), mdx(\\\"p\\\", null, \\\"A lot has changed since then and the project has moved from being an experiment to\\\\nsomething useful. I myself use it in production on several sites. I have heard from\\\\nothers who also use it. I hope you all like some of the new features in this release.\\\"), mdx(\\\"hr\\\", null), mdx(\\\"h3\\\", null, \\\"The new features since last release\\\"), mdx(\\\"p\\\", null, mdx(\\\"strong\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Rename the app to nopassword:\\\"), \\\" This means that from this version installed apps\\\\nin django should list \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"nopassword\\\"), \\\" not \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"django_nopassword\\\"), \\\". In addition all imports\\\\nneed to point to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"nopassword\\\"), \\\" not \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"django_nopassword\\\"), \\\".\\\"), mdx(\\\"p\\\", null, mdx(\\\"strong\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"The possibility to customize code delivery:\\\"), \\\"\\\\nMost of the code in the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"EmailBackend\\\"), \\\" has been moved to a new backend called\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"NoPasswordBackend\\\"), \\\". The latter is not meant to be used on its own, but it will\\\\nmake it easier to create other backends similar to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"EmailBackend\\\"), \\\". With other\\\\nwords, it has become easier to send the login codes with other technologies like\\\\nsms.\\\"), mdx(\\\"p\\\", null, mdx(\\\"strong\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Verification of the user:\\\"), \\\"\\\\ndjango-nopassword uses \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"user.is_active()\\\"), \\\" to determine whether a user is still\\\\nactive or not. In this release we moved this into its own method,\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"NoPasswordBackend.verify_user\\\"), \\\", which makes it easier to create your own logic\\\\nto verify your users.\\\"), mdx(\\\"p\\\", null, mdx(\\\"strong\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Django 1.7 support:\\\"), \\\" Now it is tested and known to work with the released version\\\\nof Django 1.7. Earlier it had just support for the beta 3.\\\"), mdx(\\\"p\\\", null, mdx(\\\"strong\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Migrations:\\\"), \\\" Support for both Django 1.7 migrations and South migrations. To use\\\\nSouth it is necessary to use version the lastest version(1.0), since it is the only\\\\nversion that looks for migrations in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"south_migrations\\\"), \\\".\\\"), mdx(\\\"hr\\\", null), mdx(\\\"p\\\", null, \\\"The test setup has also been changed to use \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://tox.readthedocs.org/en/latest/\\\"\\n  }, \\\"tox\\\"), \\\".\\\\nIt makes it a lot easier to test specific django and python versions locally. I have\\\\nto mention the new multi-dimensional configuration of environments. It makes it easier\\\\ngenerate test environments for several python and django versions with all combinations.\\\"), mdx(\\\"p\\\", null, \\\"If you use django-nopassword on any on your projects please let me know. I would love\\\\nto hear about it.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eI started the this project as way to understand django authentication backends\\nabout two years ago. I read a blog post by Ben Brown about \\u003ca href=\\\"http://notes.xoxco.com/post/27999787765/is-it-time-for-password-less-login\\\"\\u003epassword-less\\nlogin\\u003c/a\\u003e\\nand thought that it would a great case to learn custom django authentication\\nbackends.\\u003c/p\\u003e\\u003cp\\u003eA lot has changed since then and the project has moved from being an experiment to\\nsomething useful. I myself use it in production on several sites. I have heard from\\nothers who also use it. I hope you all like some of the new features in this release.\\u003c/p\\u003e\\u003chr/\\u003e\\u003ch3\\u003eThe new features since last release\\u003c/h3\\u003e\\u003cp\\u003e\\u003cstrong\\u003eRename the app to nopassword:\\u003c/strong\\u003e This means that from this version installed apps\\nin django should list \\u003ccode\\u003enopassword\\u003c/code\\u003e not \\u003ccode\\u003edjango_nopassword\\u003c/code\\u003e. In addition all imports\\nneed to point to \\u003ccode\\u003enopassword\\u003c/code\\u003e not \\u003ccode\\u003edjango_nopassword\\u003c/code\\u003e.\\u003c/p\\u003e\\u003cp\\u003e\\u003cstrong\\u003eThe possibility to customize code delivery:\\u003c/strong\\u003e\\nMost of the code in the \\u003ccode\\u003eEmailBackend\\u003c/code\\u003e has been moved to a new backend called\\n\\u003ccode\\u003eNoPasswordBackend\\u003c/code\\u003e. The latter is not meant to be used on its own, but it will\\nmake it easier to create other backends similar to \\u003ccode\\u003eEmailBackend\\u003c/code\\u003e. With other\\nwords, it has become easier to send the login codes with other technologies like\\nsms.\\u003c/p\\u003e\\u003cp\\u003e\\u003cstrong\\u003eVerification of the user:\\u003c/strong\\u003e\\ndjango-nopassword uses \\u003ccode\\u003euser.is_active()\\u003c/code\\u003e to determine whether a user is still\\nactive or not. In this release we moved this into its own method,\\n\\u003ccode\\u003eNoPasswordBackend.verify_user\\u003c/code\\u003e, which makes it easier to create your own logic\\nto verify your users.\\u003c/p\\u003e\\u003cp\\u003e\\u003cstrong\\u003eDjango 1.7 support:\\u003c/strong\\u003e Now it is tested and known to work with the released version\\nof Django 1.7. Earlier it had just support for the beta 3.\\u003c/p\\u003e\\u003cp\\u003e\\u003cstrong\\u003eMigrations:\\u003c/strong\\u003e Support for both Django 1.7 migrations and South migrations. To use\\nSouth it is necessary to use version the lastest version(1.0), since it is the only\\nversion that looks for migrations in \\u003ccode\\u003esouth_migrations\\u003c/code\\u003e.\\u003c/p\\u003e\\u003chr/\\u003e\\u003cp\\u003eThe test setup has also been changed to use \\u003ca href=\\\"https://tox.readthedocs.org/en/latest/\\\"\\u003etox\\u003c/a\\u003e.\\nIt makes it a lot easier to test specific django and python versions locally. I have\\nto mention the new multi-dimensional configuration of environments. It makes it easier\\ngenerate test environments for several python and django versions with all combinations.\\u003c/p\\u003e\\u003cp\\u003eIf you use django-nopassword on any on your projects please let me know. I would love\\nto hear about it.\\u003c/p\\u003e\",\"scope\":{}},\"count\":1}]},{\"slug\":\"apply-puppet-configuration-automatically\",\"layout\":\"post\",\"title\":\"Apply puppet automatically\",\"date\":\"2013-01-03T00:00:00.000Z\",\"category\":\"Puppet\",\"tags\":[\"puppet\",\"web.py\",\"nginx\",\"uwsgi\",\"github\",\"github-hooks\"],\"redirect_from\":\"/2013/01/03/apply-puppet-configuration-automatically/\",\"relatedPosts\":[{\"slug\":\"the-github-lamp\",\"layout\":\"post\",\"title\":\"The Github lamp\",\"date\":\"2012-09-16T00:00:00.000Z\",\"category\":\"Python\",\"tags\":[\"arduino\",\"github\",\"git\",\"web.py\"],\"redirect_from\":\"/2012/09/16/the-github-lamp/\",\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"blockquote\\\", null, mdx(\\\"p\\\", {\\n    parentName: \\\"blockquote\\\"\\n  }, \\\"Update: This project is now on github: \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://github.com/relekang/lumen\\\"\\n  }, \\\"relekang/lumen\\\"))), mdx(\\\"p\\\", null, \\\"My arduino has been collecting dust in a drawer for a while. This weekend I figured why not hook it up with github post-receive hooks and do something cool. The hooks can be set up in the \\\", mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Service Hooks\\\"), \\\" section of a repository's admin page on github. Just add a url to where the web.py site is running and github will send that url a POST request everytime someone pushes a commit to the repository. You can fin more info about post-receive hooks at \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://help.github.com/articles/post-receive-hooks\\\"\\n  }, \\\"help.github.com\\\"), \\\".\\\"), mdx(\\\"p\\\", null, \\\"About two years ago I rebuilt a IKEA children-lamp to be controllable with high/low digital signals.\\\"), mdx(\\\"p\\\", null, mdx(\\\"img\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"src\\\": \\\"/images/github-lamp.jpg\\\",\\n    \\\"alt\\\": \\\"The IKEA lamp\\\"\\n  })), mdx(\\\"p\\\", null, \\\"I wrote this based on the serial example for the arduino. It turns the lamp on and off according to the commands \\\", mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"on\\\"), \\\", \\\", mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"off\\\"), \\\" and \\\", mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"blink\\\"), \\\".\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-c\\\"\\n  }, \\\"String inputString = \\\\\\\"\\\\\\\";\\\\nboolean stringComplete = false;\\\\nint led = 5;\\\\n\\\\nvoid setup() {\\\\n      Serial.begin(9600);\\\\n      inputString.reserve(200);\\\\n      pinMode(led, OUTPUT);\\\\n}\\\\n\\\\nvoid loop() {\\\\n    if (stringComplete) {\\\\n        if(inputString == \\\\\\\"on\\\\\\\"){\\\\n            digitalWrite(led, HIGH);\\\\n        } else if (inputString == \\\\\\\"off\\\\\\\"){\\\\n            digitalWrite(led, LOW);\\\\n        } else if (inputString == \\\\\\\"blink\\\\\\\"){\\\\n            digitalWrite(led, HIGH);\\\\n            delay(1000);\\\\n            digitalWrite(led, LOW);\\\\n        } else {\\\\n            Serial.println(inputString);\\\\n        }\\\\n        // clear the string:\\\\n        inputString = \\\\\\\"\\\\\\\";\\\\n        stringComplete = false;\\\\n    }\\\\n}\\\\n\\\\nvoid serialEvent() {\\\\n    while (Serial.available()) {\\\\n        char inChar = (char)Serial.read();\\\\n        if (inChar == '\\\\\\\\n') {\\\\n            stringComplete = true;\\\\n        } else {\\\\n            inputString += inChar;\\\\n        }\\\\n    }\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The arduino is connected to my mac mini. I have some python code running on the mac to write stuff onto the serial connection between the mac and the arduino. I am using \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://webpy.org/\\\"\\n  }, \\\"web.py\\\"), \\\" and \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://gunicorn.org/\\\"\\n  }, \\\"gunicorn\\\"), \\\" to handle the web requests. The web.py-file \\\", mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"lighthouse_keeper.py\\\"), \\\" looks like this:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"SERIALPORT = \\\\\\\"/dev/tty.usbmodemfd121\\\\\\\"\\\\n\\\\nclass GithubHook:\\\\n    def POST(self):\\\\n        send_serial_data(\\\\\\\"blink\\\\\\\\n\\\\\\\")\\\\n        data = json.loads(web.input().payload)\\\\n        print \\\\\\\"%s pushed to %s - %s\\\\\\\" % (\\\\n            data['pusher']['name'],\\\\n            data['repository']['name'],\\\\n            data['repository']['homepage']\\\\n        )\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\\n    def GET(self):\\\\n        return \\\\\\\"Something is wrong\\\\\\\"\\\\n\\\\ndef send_serial_data(data):\\\\n    #open serial port\\\\n    try:\\\\n        ser = serial.Serial(SERIALPORT, 9600)\\\\n    except serial.SerialException:\\\\n        return\\\\n\\\\n    ser.write(data)\\\\n\\\\n    #close serial port\\\\n    ser.close()\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    app = web.application(urls, globals())\\\\n    app.run()\\\\n\\\\napplication = web.application(urls, globals(), True).wsgifunc()\\\\n\\\")), mdx(\\\"p\\\", null, \\\"To run gunicorn I just run the command:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-bash\\\"\\n  }, \\\"gunicorn lighthouse_keeper\\\\n\\\")));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cblockquote\\u003e\\u003cp\\u003eUpdate: This project is now on github: \\u003ca href=\\\"http://github.com/relekang/lumen\\\"\\u003erelekang/lumen\\u003c/a\\u003e\\u003c/p\\u003e\\u003c/blockquote\\u003e\\u003cp\\u003eMy arduino has been collecting dust in a drawer for a while. This weekend I figured why not hook it up with github post-receive hooks and do something cool. The hooks can be set up in the \\u003cem\\u003eService Hooks\\u003c/em\\u003e section of a repository\\u0026#x27;s admin page on github. Just add a url to where the web.py site is running and github will send that url a POST request everytime someone pushes a commit to the repository. You can fin more info about post-receive hooks at \\u003ca href=\\\"https://help.github.com/articles/post-receive-hooks\\\"\\u003ehelp.github.com\\u003c/a\\u003e.\\u003c/p\\u003e\\u003cp\\u003eAbout two years ago I rebuilt a IKEA children-lamp to be controllable with high/low digital signals.\\u003c/p\\u003e\\u003cp\\u003e\\u003cimg alt=\\\"The IKEA lamp\\\" src=\\\"/images/github-lamp.jpg\\\"/\\u003e\\u003c/p\\u003e\\u003cp\\u003eI wrote this based on the serial example for the arduino. It turns the lamp on and off according to the commands \\u003cem\\u003eon\\u003c/em\\u003e, \\u003cem\\u003eoff\\u003c/em\\u003e and \\u003cem\\u003eblink\\u003c/em\\u003e.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"c\\\"\\u003e\\u003cpre class=\\\"prism-code language-c\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eString inputString \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eboolean stringComplete \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e false\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eint\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e led \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e5\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003evoid\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003esetup\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      Serial\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ebegin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e9600\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      inputString\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ereserve\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e200\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003epinMode\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eled\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e OUTPUT\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003evoid\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eloop\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003estringComplete\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003einputString \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;on\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003edigitalWrite\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eled\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e HIGH\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003einputString \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;off\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003edigitalWrite\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eled\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e LOW\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003einputString \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;blink\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003edigitalWrite\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eled\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e HIGH\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003edelay\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e1000\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003edigitalWrite\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eled\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e LOW\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            Serial\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eprintln\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003einputString\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e// clear the string:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        inputString \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        stringComplete \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e false\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003evoid\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eserialEvent\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ewhile\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eSerial\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eavailable\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003echar\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e inChar \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003echar\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eSerial\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eread\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003einChar \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;\\\\n\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            stringComplete \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e true\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            inputString \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e+=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e inChar\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe arduino is connected to my mac mini. I have some python code running on the mac to write stuff onto the serial connection between the mac and the arduino. I am using \\u003ca href=\\\"http://webpy.org/\\\"\\u003eweb.py\\u003c/a\\u003e and \\u003ca href=\\\"http://gunicorn.org/\\\"\\u003egunicorn\\u003c/a\\u003e to handle the web requests. The web.py-file \\u003cem\\u003elighthouse_keeper.py\\u003c/em\\u003e looks like this:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eSERIALPORT \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;/dev/tty.usbmodemfd121\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eclass\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token class-name\\\"\\u003eGithubHook\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003edef\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ePOST\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eself\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        send_serial_data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;blink\\\\n\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        data \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e json\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eloads\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eweb\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token builtin\\\"\\u003einput\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003epayload\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eprint\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;%s pushed to %s - %s\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e%\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;pusher\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;name\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;repository\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;name\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;repository\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;homepage\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003edef\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eGET\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eself\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;Something is wrong\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003edef\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003esend_serial_data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e#open serial port\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003etry\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        ser \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e serial\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eSerial\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eSERIALPORT\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e9600\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eexcept\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e serial\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eSerialException\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    ser\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ewrite\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e#close serial port\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    ser\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eclose\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e __name__ \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;__main__\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    app \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e web\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eapplication\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eurls\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token builtin\\\"\\u003eglobals\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    app\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003erun\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eapplication \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e web\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eapplication\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eurls\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token builtin\\\"\\u003eglobals\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token boolean\\\"\\u003eTrue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ewsgifunc\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eTo run gunicorn I just run the command:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"bash\\\"\\u003e\\u003cpre class=\\\"prism-code language-bash\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003egunicorn lighthouse_keeper\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\",\"scope\":{}},\"count\":2}]},{\"slug\":\"readable-wikipedia\",\"layout\":\"post\",\"title\":\"Readable Wikipedia\",\"date\":\"2012-12-02T00:00:00.000Z\",\"category\":\"Stylebot\",\"tags\":[\"wikipedia\",\"css\",\"readability\",\"stylebot\"],\"redirect_from\":\"/2012/12/02/readable-wikipedia/\",\"relatedPosts\":[]},{\"slug\":\"django-nopassword\",\"layout\":\"post\",\"title\":\"django-nopassword\",\"date\":\"2012-09-28T00:00:00.000Z\",\"category\":\"Django\",\"tags\":[\"django\",\"no-password\",\"email-authentication\",\"authentication\"],\"redirect_from\":\"/2012/09/28/django-nopassword/\",\"relatedPosts\":[{\"slug\":\"django-app-custom-user\",\"layout\":\"post\",\"title\":\"Making your Django app ready for custom users\",\"date\":\"2013-05-22T00:00:00.000Z\",\"category\":\"Django\",\"tags\":[\"django\",\"custom user\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"In Django 1.5 custom users was introduced. This means that the user model can be swapped for a\\\\ncustom model. How does this affect third-party apps? Foreignkeys and other relations will crash\\\\nif they point to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"auth.User\\\"), \\\". It will raise a exception of the type:\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"AttributeError: Manager isn't available; User has been swapped for 'myapp.CustomUser'\\\")), mdx(\\\"h3\\\", null, \\\"A possible solution\\\"), mdx(\\\"p\\\", null, \\\"In \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://github.com/relekang/django-nopassword/\\\"\\n  }, \\\"django-nopassword\\\"), \\\" I tried a some different approaches. I found a solution that worked well in that app. I added a file, called it \\\", mdx(\\\"em\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"utils.py\\\"), \\\", did not find a more suitable name. The code is listed below:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"# -*- coding: utf-8 -*-\\\\nimport django\\\\n\\\\nif django.VERSION \\u003e= (1, 5):\\\\n    from django.contrib.auth import get_user_model\\\\n    User = get_user_model()\\\\nelse:\\\\n    from django.contrib.auth.models import User\\\\n\\\")), mdx(\\\"p\\\", null, \\\"Everywhere I use the User model I changed the import to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"from app_name.utils import User\\\"), \\\" where app_name in this case was \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"django_nopassword\\\"), \\\".\\\"), mdx(\\\"h3\\\", null, \\\"Testing\\\"), mdx(\\\"p\\\", null, \\\"To be certain that everything was working correctly with custom user I created some tests and \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/relekang/django-nopassword/tree/master/tests\\\"\\n  }, \\\"a test app with a custom user\\\"), \\\". These tests also work nicely on Django 1.4 since \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"AUTH_USER_MODEL\\\"), \\\" is ignored in earlier versions of Django. To make it easier to test with different environments I added it to \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://travis-ci.org/\\\"\\n  }, \\\"Travis\\\"), \\\" and added a hook to the Github repository. The travis settings:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-yaml\\\"\\n  }, \\\"language: python\\\\n\\\\npython:\\\\n  - \\\\\\\"2.6\\\\\\\"\\\\n  - \\\\\\\"2.7\\\\\\\"\\\\n\\\\nenv:\\\\n  - DJANGO_VERSION=1.4\\\\n  - DJANGO_VERSION=1.5\\\\n\\\\ninstall:\\\\n  - pip install psycopg2\\\\n  - pip install django==$DJANGO_VERSION\\\\n\\\\nscript: python setup.py test\\\\n\\\\nbefore_script:\\\\n  - psql -c 'create database django_nopassword;' -U postgres\\\\n\\\")));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eIn Django 1.5 custom users was introduced. This means that the user model can be swapped for a\\ncustom model. How does this affect third-party apps? Foreignkeys and other relations will crash\\nif they point to \\u003ccode\\u003eauth.User\\u003c/code\\u003e. It will raise a exception of the type:\\n\\u003ccode\\u003eAttributeError: Manager isn\\u0026#x27;t available; User has been swapped for \\u0026#x27;myapp.CustomUser\\u0026#x27;\\u003c/code\\u003e\\u003c/p\\u003e\\u003ch3\\u003eA possible solution\\u003c/h3\\u003e\\u003cp\\u003eIn \\u003ca href=\\\"http://github.com/relekang/django-nopassword/\\\"\\u003edjango-nopassword\\u003c/a\\u003e I tried a some different approaches. I found a solution that worked well in that app. I added a file, called it \\u003cem\\u003eutils.py\\u003c/em\\u003e, did not find a more suitable name. The code is listed below:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e# -*- coding: utf-8 -*-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e django\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e django\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eVERSION \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e1\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e5\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efrom\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e django\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003econtrib\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eauth \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e get_user_model\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    User \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e get_user_model\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efrom\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e django\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003econtrib\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eauth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emodels \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e User\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eEverywhere I use the User model I changed the import to \\u003ccode\\u003efrom app_name.utils import User\\u003c/code\\u003e where app_name in this case was \\u003ccode\\u003edjango_nopassword\\u003c/code\\u003e.\\u003c/p\\u003e\\u003ch3\\u003eTesting\\u003c/h3\\u003e\\u003cp\\u003eTo be certain that everything was working correctly with custom user I created some tests and \\u003ca href=\\\"https://github.com/relekang/django-nopassword/tree/master/tests\\\"\\u003ea test app with a custom user\\u003c/a\\u003e. These tests also work nicely on Django 1.4 since \\u003ccode\\u003eAUTH_USER_MODEL\\u003c/code\\u003e is ignored in earlier versions of Django. To make it easier to test with different environments I added it to \\u003ca href=\\\"https://travis-ci.org/\\\"\\u003eTravis\\u003c/a\\u003e and added a hook to the Github repository. The travis settings:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"yaml\\\"\\u003e\\u003cpre class=\\\"prism-code language-yaml\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003elanguage\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e python\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003epython\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;2.6\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;2.7\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eenv\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e DJANGO_VERSION=1.4\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e DJANGO_VERSION=1.5\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003einstall\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e pip install psycopg2\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e pip install django==$DJANGO_VERSION\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003escript\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e python setup.py test\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003ebefore_script\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e psql \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ec \\u0026#x27;create database django_nopassword;\\u0026#x27; \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eU postgres\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\",\"scope\":{}},\"count\":1},{\"slug\":\"use-array-in-postgresql\",\"layout\":\"post\",\"title\":\"Use array in postgresql with django\",\"date\":\"2013-01-27T00:00:00.000Z\",\"category\":\"Django\",\"tags\":[\"tags\",\"postgres\",\"array\",\"pgarray\",\"django\"],\"redirect_from\":\"/2013/01/27/use-array-in-postgresql/\",\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"I wanted to use arrays in postgresql for tags on this blog. I installed the packages\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"djorm-ext-pgarray\\\"), \\\" and \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"djorm-ext-expressions\\\"), \\\". The model for the blogposts is displayed below. \\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"from django.db import models\\\\nfrom djorm_expressions.models import ExpressionManager\\\\nfrom djorm_pgarray.fields import ArrayField\\\\n\\\\nclass Post (models.Model):\\\\n    title = models.CharField(max_length=80)\\\\n    slug = models.SlugField()\\\\n    pub_date = models.DateField()\\\\n    content = models.TextField()\\\\n    tags = ArrayField(dbtype=\\\\\\\"varchar(60)\\\\\\\")\\\\n    objects = ExpressionManager()\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The tags field is using \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"djorm_pgarray.fields.ArrayField\\\"), \\\" and the ExpressionManagaer is\\\\nneeded if one would need to make a query using the ArrayField.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eI wanted to use arrays in postgresql for tags on this blog. I installed the packages\\n\\u003ccode\\u003edjorm-ext-pgarray\\u003c/code\\u003e and \\u003ccode\\u003edjorm-ext-expressions\\u003c/code\\u003e. The model for the blogposts is displayed below. \\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efrom\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e django\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003edb \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e models\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efrom\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e djorm_expressions\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emodels \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e ExpressionManager\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efrom\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e djorm_pgarray\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003efields \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e ArrayField\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eclass\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token class-name\\\"\\u003ePost\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emodels\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eModel\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    title \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e models\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eCharField\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emax_length\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e80\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    slug \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e models\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eSlugField\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    pub_date \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e models\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eDateField\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    content \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e models\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eTextField\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    tags \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e ArrayField\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003edbtype\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;varchar(60)\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    objects \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e ExpressionManager\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe tags field is using \\u003ccode\\u003edjorm_pgarray.fields.ArrayField\\u003c/code\\u003e and the ExpressionManagaer is\\nneeded if one would need to make a query using the ArrayField.\\u003c/p\\u003e\",\"scope\":{}},\"count\":1},{\"slug\":\"django-nopassword-one-point-o\",\"layout\":\"post\",\"title\":\"django-nopassword reached 1.0\",\"date\":\"2014-10-03T00:00:00.000Z\",\"categories\":\"django\",\"tags\":[\"django\",\"nopassword\",\"django-nopassword\",\"authentication\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"I started the this project as way to understand django authentication backends\\\\nabout two years ago. I read a blog post by Ben Brown about \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://notes.xoxco.com/post/27999787765/is-it-time-for-password-less-login\\\"\\n  }, \\\"password-less\\\\nlogin\\\"), \\\"\\\\nand thought that it would a great case to learn custom django authentication\\\\nbackends.\\\"), mdx(\\\"p\\\", null, \\\"A lot has changed since then and the project has moved from being an experiment to\\\\nsomething useful. I myself use it in production on several sites. I have heard from\\\\nothers who also use it. I hope you all like some of the new features in this release.\\\"), mdx(\\\"hr\\\", null), mdx(\\\"h3\\\", null, \\\"The new features since last release\\\"), mdx(\\\"p\\\", null, mdx(\\\"strong\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Rename the app to nopassword:\\\"), \\\" This means that from this version installed apps\\\\nin django should list \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"nopassword\\\"), \\\" not \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"django_nopassword\\\"), \\\". In addition all imports\\\\nneed to point to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"nopassword\\\"), \\\" not \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"django_nopassword\\\"), \\\".\\\"), mdx(\\\"p\\\", null, mdx(\\\"strong\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"The possibility to customize code delivery:\\\"), \\\"\\\\nMost of the code in the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"EmailBackend\\\"), \\\" has been moved to a new backend called\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"NoPasswordBackend\\\"), \\\". The latter is not meant to be used on its own, but it will\\\\nmake it easier to create other backends similar to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"EmailBackend\\\"), \\\". With other\\\\nwords, it has become easier to send the login codes with other technologies like\\\\nsms.\\\"), mdx(\\\"p\\\", null, mdx(\\\"strong\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Verification of the user:\\\"), \\\"\\\\ndjango-nopassword uses \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"user.is_active()\\\"), \\\" to determine whether a user is still\\\\nactive or not. In this release we moved this into its own method,\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"NoPasswordBackend.verify_user\\\"), \\\", which makes it easier to create your own logic\\\\nto verify your users.\\\"), mdx(\\\"p\\\", null, mdx(\\\"strong\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Django 1.7 support:\\\"), \\\" Now it is tested and known to work with the released version\\\\nof Django 1.7. Earlier it had just support for the beta 3.\\\"), mdx(\\\"p\\\", null, mdx(\\\"strong\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Migrations:\\\"), \\\" Support for both Django 1.7 migrations and South migrations. To use\\\\nSouth it is necessary to use version the lastest version(1.0), since it is the only\\\\nversion that looks for migrations in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"south_migrations\\\"), \\\".\\\"), mdx(\\\"hr\\\", null), mdx(\\\"p\\\", null, \\\"The test setup has also been changed to use \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://tox.readthedocs.org/en/latest/\\\"\\n  }, \\\"tox\\\"), \\\".\\\\nIt makes it a lot easier to test specific django and python versions locally. I have\\\\nto mention the new multi-dimensional configuration of environments. It makes it easier\\\\ngenerate test environments for several python and django versions with all combinations.\\\"), mdx(\\\"p\\\", null, \\\"If you use django-nopassword on any on your projects please let me know. I would love\\\\nto hear about it.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eI started the this project as way to understand django authentication backends\\nabout two years ago. I read a blog post by Ben Brown about \\u003ca href=\\\"http://notes.xoxco.com/post/27999787765/is-it-time-for-password-less-login\\\"\\u003epassword-less\\nlogin\\u003c/a\\u003e\\nand thought that it would a great case to learn custom django authentication\\nbackends.\\u003c/p\\u003e\\u003cp\\u003eA lot has changed since then and the project has moved from being an experiment to\\nsomething useful. I myself use it in production on several sites. I have heard from\\nothers who also use it. I hope you all like some of the new features in this release.\\u003c/p\\u003e\\u003chr/\\u003e\\u003ch3\\u003eThe new features since last release\\u003c/h3\\u003e\\u003cp\\u003e\\u003cstrong\\u003eRename the app to nopassword:\\u003c/strong\\u003e This means that from this version installed apps\\nin django should list \\u003ccode\\u003enopassword\\u003c/code\\u003e not \\u003ccode\\u003edjango_nopassword\\u003c/code\\u003e. In addition all imports\\nneed to point to \\u003ccode\\u003enopassword\\u003c/code\\u003e not \\u003ccode\\u003edjango_nopassword\\u003c/code\\u003e.\\u003c/p\\u003e\\u003cp\\u003e\\u003cstrong\\u003eThe possibility to customize code delivery:\\u003c/strong\\u003e\\nMost of the code in the \\u003ccode\\u003eEmailBackend\\u003c/code\\u003e has been moved to a new backend called\\n\\u003ccode\\u003eNoPasswordBackend\\u003c/code\\u003e. The latter is not meant to be used on its own, but it will\\nmake it easier to create other backends similar to \\u003ccode\\u003eEmailBackend\\u003c/code\\u003e. With other\\nwords, it has become easier to send the login codes with other technologies like\\nsms.\\u003c/p\\u003e\\u003cp\\u003e\\u003cstrong\\u003eVerification of the user:\\u003c/strong\\u003e\\ndjango-nopassword uses \\u003ccode\\u003euser.is_active()\\u003c/code\\u003e to determine whether a user is still\\nactive or not. In this release we moved this into its own method,\\n\\u003ccode\\u003eNoPasswordBackend.verify_user\\u003c/code\\u003e, which makes it easier to create your own logic\\nto verify your users.\\u003c/p\\u003e\\u003cp\\u003e\\u003cstrong\\u003eDjango 1.7 support:\\u003c/strong\\u003e Now it is tested and known to work with the released version\\nof Django 1.7. Earlier it had just support for the beta 3.\\u003c/p\\u003e\\u003cp\\u003e\\u003cstrong\\u003eMigrations:\\u003c/strong\\u003e Support for both Django 1.7 migrations and South migrations. To use\\nSouth it is necessary to use version the lastest version(1.0), since it is the only\\nversion that looks for migrations in \\u003ccode\\u003esouth_migrations\\u003c/code\\u003e.\\u003c/p\\u003e\\u003chr/\\u003e\\u003cp\\u003eThe test setup has also been changed to use \\u003ca href=\\\"https://tox.readthedocs.org/en/latest/\\\"\\u003etox\\u003c/a\\u003e.\\nIt makes it a lot easier to test specific django and python versions locally. I have\\nto mention the new multi-dimensional configuration of environments. It makes it easier\\ngenerate test environments for several python and django versions with all combinations.\\u003c/p\\u003e\\u003cp\\u003eIf you use django-nopassword on any on your projects please let me know. I would love\\nto hear about it.\\u003c/p\\u003e\",\"scope\":{}},\"count\":2}]},{\"slug\":\"the-github-lamp\",\"layout\":\"post\",\"title\":\"The Github lamp\",\"date\":\"2012-09-16T00:00:00.000Z\",\"category\":\"Python\",\"tags\":[\"arduino\",\"github\",\"git\",\"web.py\"],\"redirect_from\":\"/2012/09/16/the-github-lamp/\",\"relatedPosts\":[{\"slug\":\"apply-puppet-configuration-automatically\",\"layout\":\"post\",\"title\":\"Apply puppet automatically\",\"date\":\"2013-01-03T00:00:00.000Z\",\"category\":\"Puppet\",\"tags\":[\"puppet\",\"web.py\",\"nginx\",\"uwsgi\",\"github\",\"github-hooks\"],\"redirect_from\":\"/2013/01/03/apply-puppet-configuration-automatically/\",\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"I recently started using github web interface as editor for my puppet configuration. I wanted to be able to push a new configuration without doing it manually, as I do not have a puppet master I wanted to try using Github hooks as in the \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"/the-github-lamp/\\\"\\n  }, \\\"Github lamp code\\\"), \\\". I have the puppet-repo cloned to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"/puppet/\\\"), \\\" and the main manifest is in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"/puppet/manifests/site.pp\\\"), \\\". The code below is the web.py script. It checks the payload from Github and will only apply the configuration if changes are pushed to the master branch. A GET request would simply get a 404.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"from fabric.api import local, lcd\\\\nimport web, json\\\\n\\\\nurls = (\\\\n    '/', 'GithubHook',\\\\n)\\\\n\\\\nrender = web.template.render('.')\\\\n\\\\nclass GithubHook:\\\\n    def POST(self):\\\\n        data = json.loads(web.input().payload)\\\\n        if 'ref' in data:\\\\n            if data['ref'] == 'refs/heads/master':\\\\n              with lcd('/puppet/'):\\\\n                    local('git pull origin master')\\\\n                    local('puppet apply /puppet/manifests/site.pp')\\\\n                    print \\\\\\\"applied puppet\\\\\\\"\\\\n        else:\\\\n            print \\\\\\\"ref: %s\\\\\\\" % data['ref']\\\\n  else:\\\\n            print \\\\\\\"no ref\\\\\\\"\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\\n    def GET(self):\\\\n        raise web.notfound()\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    app = web.application(urls, globals())\\\\n    app.run()\\\\n\\\\napplication = web.application(urls, globals(), True).wsgifunc()\\\\n\\\")), mdx(\\\"p\\\", null, \\\"I running this with uWSGI and Nginx in front. To make the setup a little more secure I added deny all and allow to Github's IP-addresses.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-bash\\\"\\n  }, \\\"server {\\\\n    listen 80;\\\\n    server_name puppet.example.com;\\\\n\\\\n    access_log /var/log/nginx/puppet_apply.access.log;\\\\n    error_log /var/log/nginx/puppet_apply.error.log;\\\\n\\\\n    location / {\\\\n        allow 207.97.227.253;\\\\n        allow 50.57.128.197;\\\\n        allow 108.171.174.178;\\\\n        deny all;\\\\n\\\\n        proxy_pass         http://127.0.0.1:9060;\\\\n        proxy_redirect     off;\\\\n\\\\n        proxy_set_header   Host             $host;\\\\n        proxy_set_header   X-Real-IP        $remote_addr;\\\\n        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;\\\\n    }\\\\n\\\\n    location = /favicon.ico {\\\\n        access_log off;\\\\n        log_not_found off;\\\\n        return 204;\\\\n    }\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The web.py script is in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"/home/web/puppet_apply/puppet_apply.py\\\"), \\\". The ini-file used by uWSGI is below.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-ini\\\"\\n  }, \\\"[uwsgi]\\\\nchdir = /home/web/puppet_apply\\\\nvirtualenv = /home/web/puppet_apply/venv\\\\npythonpath = /home/web/puppet_apply\\\\nprocname-prefix = puppet_apply\\\\ndaemonize=/var/log/uwsgi/puppet_apply.log\\\\nwsgi-file = /home/web/puppet_apply/puppet_apply.py\\\\nhttp-socket = 0.0.0.0:9060\\\\nmaster = True\\\\nprocesses = 1\\\\n\\\")));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eI recently started using github web interface as editor for my puppet configuration. I wanted to be able to push a new configuration without doing it manually, as I do not have a puppet master I wanted to try using Github hooks as in the \\u003ca href=\\\"/the-github-lamp/\\\"\\u003eGithub lamp code\\u003c/a\\u003e. I have the puppet-repo cloned to \\u003ccode\\u003e/puppet/\\u003c/code\\u003e and the main manifest is in \\u003ccode\\u003e/puppet/manifests/site.pp\\u003c/code\\u003e. The code below is the web.py script. It checks the payload from Github and will only apply the configuration if changes are pushed to the master branch. A GET request would simply get a 404.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efrom\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fabric\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eapi \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e local\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e lcd\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eimport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e web\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e json\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eurls \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;/\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;GithubHook\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003erender \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e web\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etemplate\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003erender\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;.\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eclass\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token class-name\\\"\\u003eGithubHook\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003edef\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ePOST\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eself\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        data \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e json\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eloads\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eweb\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token builtin\\\"\\u003einput\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003epayload\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;ref\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ein\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;ref\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;refs/heads/master\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e              \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ewith\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e lcd\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;/puppet/\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e                    local\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;git pull origin master\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e                    local\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;puppet apply /puppet/manifests/site.pp\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e                    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eprint\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;applied puppet\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eprint\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;ref: %s\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e%\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;ref\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eprint\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;no ref\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003edef\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eGET\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eself\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eraise\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e web\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003enotfound\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e __name__ \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;__main__\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    app \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e web\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eapplication\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eurls\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token builtin\\\"\\u003eglobals\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    app\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003erun\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eapplication \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e web\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eapplication\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eurls\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token builtin\\\"\\u003eglobals\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token boolean\\\"\\u003eTrue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ewsgifunc\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eI running this with uWSGI and Nginx in front. To make the setup a little more secure I added deny all and allow to Github\\u0026#x27;s IP-addresses.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"bash\\\"\\u003e\\u003cpre class=\\\"prism-code language-bash\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eserver \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    listen \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e80\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    server_name puppet.example.com\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    access_log /var/log/nginx/puppet_apply.access.log\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    error_log /var/log/nginx/puppet_apply.error.log\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    location / \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        allow \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e207.97\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e.227.253\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        allow \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e50.57\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e.128.197\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        allow \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e108.171\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e.174.178\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        deny all\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        proxy_pass         http://127.0.0.1:9060\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        proxy_redirect     off\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        proxy_set_header   Host             \\u003c/span\\u003e\\u003cspan class=\\\"token variable\\\"\\u003e$host\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        proxy_set_header   X-Real-IP        \\u003c/span\\u003e\\u003cspan class=\\\"token variable\\\"\\u003e$remote_addr\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        proxy_set_header   X-Forwarded-For  \\u003c/span\\u003e\\u003cspan class=\\\"token variable\\\"\\u003e$proxy_add_x_forwarded_for\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    location \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e /favicon.ico \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        access_log off\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        log_not_found off\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token builtin class-name\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e204\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe web.py script is in \\u003ccode\\u003e/home/web/puppet_apply/puppet_apply.py\\u003c/code\\u003e. The ini-file used by uWSGI is below.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"ini\\\"\\u003e\\u003cpre class=\\\"prism-code language-ini\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e[uwsgi]\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003echdir = /home/web/puppet_apply\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003evirtualenv = /home/web/puppet_apply/venv\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003epythonpath = /home/web/puppet_apply\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eprocname-prefix = puppet_apply\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003edaemonize=/var/log/uwsgi/puppet_apply.log\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ewsgi-file = /home/web/puppet_apply/puppet_apply.py\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ehttp-socket = 0.0.0.0:9060\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emaster = True\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eprocesses = 1\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\",\"scope\":{}},\"count\":2},{\"slug\":\"using-git-commits-instead-of-stash\",\"layout\":\"post\",\"title\":\"Using git commits instead of git stash\",\"date\":\"2019-11-14T00:00:00.000Z\",\"tags\":[\"git\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"Over the years I have time and time again run into the problem of getting\\\\nconflicts when popping from the git stash. Somehow this has resulted in loss\\\\nof parts of the work I have done. There is probably a correct way to use stash\\\\nin these situations. However, commits is a much bigger part of my workflow and\\\\nI have deeper knowledge of how to work with commits. Furthermore, if I learn\\\\nmore about tricks around commits it will be helpful in the rest of my workflow.\\\"), mdx(\\\"p\\\", null, \\\"I started to use wip commits a lot instead. I just add everything and commit it\\\\nwith the commit message \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"wip\\\"), \\\". Git has this nice feature to make new commands\\\\nthat are either aliases to other git commands or shell commands. To aid working\\\\nwith wip commits I created these two aliases:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-ini\\\"\\n  }, \\\"wip = \\\\\\\"!git add . \\u0026\\u0026 git commit -nm'wip'\\\\\\\"\\\\npop = reset HEAD^\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The first alias, wip, does two git operation through a shell command. The exclamation\\\\nmark in the beginning of the alias indicates that this is a shell command. The\\\\nfirst operation is adding everything in the current folder, and then the\\\\nsecond operation is committing the changes. The flag \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"-n\\\"), \\\" in this command\\\\ntells git to skip any pre-commit hooks since I don't want a linter or anything\\\\nstopping the creation of the wip commit.\\\"), mdx(\\\"p\\\", null, \\\"The second alias, pop, will remove the last commit and unstage the changes. This means\\\\nthat if I do some changes in a repo and run \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"git wip\\\"), \\\" and then \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"git pop\\\"), \\\" the state\\\\nwould be the same after \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"git pop\\\"), \\\" as it was before \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"git wip\\\"), \\\".\\\"), mdx(\\\"p\\\", null, \\\"Adding this to my workflow has made it much easier to put away work temporary by\\\\nrunning git wip in a branch. Or rebasing my current work on the latest master,\\\\nwhich has the possibility of creating tedious conflict situations.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eOver the years I have time and time again run into the problem of getting\\nconflicts when popping from the git stash. Somehow this has resulted in loss\\nof parts of the work I have done. There is probably a correct way to use stash\\nin these situations. However, commits is a much bigger part of my workflow and\\nI have deeper knowledge of how to work with commits. Furthermore, if I learn\\nmore about tricks around commits it will be helpful in the rest of my workflow.\\u003c/p\\u003e\\u003cp\\u003eI started to use wip commits a lot instead. I just add everything and commit it\\nwith the commit message \\u003ccode\\u003ewip\\u003c/code\\u003e. Git has this nice feature to make new commands\\nthat are either aliases to other git commands or shell commands. To aid working\\nwith wip commits I created these two aliases:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"ini\\\"\\u003e\\u003cpre class=\\\"prism-code language-ini\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ewip = \\u0026quot;!git add . \\u0026amp;\\u0026amp; git commit -nm\\u0026#x27;wip\\u0026#x27;\\u0026quot;\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003epop = reset HEAD^\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe first alias, wip, does two git operation through a shell command. The exclamation\\nmark in the beginning of the alias indicates that this is a shell command. The\\nfirst operation is adding everything in the current folder, and then the\\nsecond operation is committing the changes. The flag \\u003ccode\\u003e-n\\u003c/code\\u003e in this command\\ntells git to skip any pre-commit hooks since I don\\u0026#x27;t want a linter or anything\\nstopping the creation of the wip commit.\\u003c/p\\u003e\\u003cp\\u003eThe second alias, pop, will remove the last commit and unstage the changes. This means\\nthat if I do some changes in a repo and run \\u003ccode\\u003egit wip\\u003c/code\\u003e and then \\u003ccode\\u003egit pop\\u003c/code\\u003e the state\\nwould be the same after \\u003ccode\\u003egit pop\\u003c/code\\u003e as it was before \\u003ccode\\u003egit wip\\u003c/code\\u003e.\\u003c/p\\u003e\\u003cp\\u003eAdding this to my workflow has made it much easier to put away work temporary by\\nrunning git wip in a branch. Or rebasing my current work on the latest master,\\nwhich has the possibility of creating tedious conflict situations.\\u003c/p\\u003e\",\"scope\":{}},\"count\":1}]}]},\"__N_SSG\":true},\"page\":\"/writing\",\"query\":{},\"buildId\":\"eDZ3F4brH1sou4s_NY8ok\",\"nextExport\":false,\"isFallback\":false,\"gsp\":true}</script><script nomodule=\"\" src=\"/_next/static/chunks/polyfills-5ba9c403cc30e4733b64.js\"></script><script src=\"/_next/static/chunks/main-7d802164a7b8639038cc.js\" async=\"\"></script><script src=\"/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js\" async=\"\"></script><script src=\"/_next/static/chunks/framework.abffcf18e526b7c0dbcd.js\" async=\"\"></script><script src=\"/_next/static/chunks/8415929568fe72b6a34b53df40b441bf1d16c618.f4a246c9c1efb0a580ac.js\" async=\"\"></script><script src=\"/_next/static/chunks/98a995b697fdf6ac7718c65f99d5111879ab1e63.083a266542cc50e12bc5.js\" async=\"\"></script><script src=\"/_next/static/chunks/059db41020c5a0b2f8e44e07e9a188d04fefe6bb.2f9308fbeaf5eadb94bb.js\" async=\"\"></script><script src=\"/_next/static/chunks/pages/_app-d9022d161dcdc53f7fc0.js\" async=\"\"></script><script src=\"/_next/static/chunks/d2fd18a0c135e6d07091be301f7526a200065b3b.c6cb363515a690cb8a1f.js\" async=\"\"></script><script src=\"/_next/static/chunks/pages/writing-dd4eb9934d4fcc628fdd.js\" async=\"\"></script><script src=\"/_next/static/eDZ3F4brH1sou4s_NY8ok/_buildManifest.js\" async=\"\"></script><script src=\"/_next/static/eDZ3F4brH1sou4s_NY8ok/_ssgManifest.js\" async=\"\"></script><script async=\"\" data-api=\"/_hive\" src=\"/sb.js\"></script></body></html>",
  "status": 200,
  "headers": {
    "date": "Wed, 02 Jun 2021 07:44:36 GMT",
    "content-type": "text/html; charset=utf-8",
    "transfer-encoding": "chunked",
    "connection": "close",
    "x-powered-by": "Next.js",
    "cache-control": "s-maxage=31536000, stale-while-revalidate",
    "vary": "Accept-Encoding",
    "x-frame-options": "SAMEORIGIN",
    "strict-transport-security": "max-age=2592000; includeSubdomains; preload",
    "x-content-type-options": "nosniff",
    "referrer-policy": "strict-origin",
    "feature-policy": "microphone 'none'; geolocation 'none'",
    "cf-cache-status": "DYNAMIC",
    "cf-request-id": "0a6d47828d00000b06002b1000000001",
    "expect-ct": "max-age=604800, report-uri=\"https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct\"",
    "report-to": "{\"endpoints\":[{\"url\":\"https:\\/\\/a.nel.cloudflare.com\\/report\\/v2?s=Rx3u0%2BtDhbxbMA5DsZWgEWFycdNw3cXf083sY55T4jo9YkDv1TAuhE5rYdle7iUmIPZt0JRpCS1jAzrYEQKjnj147ednacMZCoCLToTWE448mcmcptLwRJc4Uqc%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}",
    "nel": "{\"report_to\":\"cf-nel\",\"max_age\":604800}",
    "server": "cloudflare",
    "cf-ray": "658f0eb0ed920b06-OSL",
    "alt-svc": "h3-27=\":443\"; ma=86400, h3-28=\":443\"; ma=86400, h3-29=\":443\"; ma=86400, h3=\":443\"; ma=86400"
  }
}