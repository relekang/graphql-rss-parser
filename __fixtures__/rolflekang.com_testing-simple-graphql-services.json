{
  "data": "<!DOCTYPE html><html lang=\"en\"><head><script src=\"/cdn-cgi/apps/head/UfjZ8HAT0I7Fsvqp0rf-S7u-dA8.js\"></script><link href=\"https://fonts.googleapis.com/css?family=Merriweather:300,400,700\" rel=\"stylesheet\"/><link rel=\"alternate\" type=\"application/rss+xml\" title=\"Writing by Rolf Erik Lekang\" href=\"feed.xml\"/><link rel=\"alternate\" type=\"application/feed+json\" title=\"Writing by Rolf Erik Lekang\" href=\"feed.json\"/><meta name=\"viewport\" content=\"width=device-width\"/><meta charSet=\"utf-8\"/><title>Testing simple GraphQL services - Rolf Erik Lekang</title><meta content=\"Testing simple GraphQL services - Rolf Erik Lekang\" property=\"og:title\"/><meta content=\"Testing simple GraphQL services - Rolf Erik Lekang\" name=\"twitter:title\"/><meta content=\"@relekang\" name=\"twitter:author\"/><meta content=\"summary_large_image\" name=\"twitter:card\"/><meta property=\"og:image\" content=\"https://rolflekang.com/testing-simple-graphql-services-link-cards.png\"/><meta name=\"twitter:image:src\" content=\"https://rolflekang.com/testing-simple-graphql-services-link-cards.png\"/><meta name=\"next-head-count\" content=\"9\"/><link rel=\"preload\" href=\"/_next/static/css/d771bc1f6de9098f2a56.css\" as=\"style\"/><link rel=\"stylesheet\" href=\"/_next/static/css/d771bc1f6de9098f2a56.css\" data-n-g=\"\"/><link rel=\"preload\" href=\"/_next/static/css/793b06ca10cbc005d32f.css\" as=\"style\"/><link rel=\"stylesheet\" href=\"/_next/static/css/793b06ca10cbc005d32f.css\" data-n-p=\"\"/><noscript data-n-css=\"\"></noscript><link rel=\"preload\" href=\"/_next/static/chunks/main-7d802164a7b8639038cc.js\" as=\"script\"/><link rel=\"preload\" href=\"/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js\" as=\"script\"/><link rel=\"preload\" href=\"/_next/static/chunks/framework.abffcf18e526b7c0dbcd.js\" as=\"script\"/><link rel=\"preload\" href=\"/_next/static/chunks/8415929568fe72b6a34b53df40b441bf1d16c618.f4a246c9c1efb0a580ac.js\" as=\"script\"/><link rel=\"preload\" href=\"/_next/static/chunks/98a995b697fdf6ac7718c65f99d5111879ab1e63.083a266542cc50e12bc5.js\" as=\"script\"/><link rel=\"preload\" href=\"/_next/static/chunks/059db41020c5a0b2f8e44e07e9a188d04fefe6bb.2f9308fbeaf5eadb94bb.js\" as=\"script\"/><link rel=\"preload\" href=\"/_next/static/chunks/pages/_app-d9022d161dcdc53f7fc0.js\" as=\"script\"/><link rel=\"preload\" href=\"/_next/static/chunks/d2fd18a0c135e6d07091be301f7526a200065b3b.c6cb363515a690cb8a1f.js\" as=\"script\"/><link rel=\"preload\" href=\"/_next/static/chunks/pages/%5Bslug%5D-bcdc524279b1554569fa.js\" as=\"script\"/></head><body><div id=\"__next\"><div class=\"   Layout_Layout__SbGXq light\"><header class=\"Layout_Header__UiVoQ\"><div class=\"Layout_Wrapper__1m2JS\"><a class=\"Layout_Name__1Xoz7\" href=\"/\">Rolf Erik Lekang</a><nav class=\"   Layout_Navigation__31nKV no-print\"><a href=\"/writing\">Writing</a><a href=\"/photography\">Photography</a></nav></div></header><div class=\"  Layout_Wrapper__1m2JS\"><main><div><h1>Testing simple GraphQL services</h1>Posted 28.05.2017<div><p>I recently created a <a href=\"https://github.com/relekang/micro-rss-parser\">GraphQL based microservice</a> for parsing RSS-feeds. I wanted\nto write something down about the approach I took to test the API. The service is read only, as\nthere is little we can push out into others RSS feeds.</p><p>GraphQL returns 200 status for almost everything. Whenever error occurs it only pushes the error\nto a list of errors that is passed to the payload. This is because it is designed to be resillient\nand give as much information as it can even when something fails. This also means that we can\nabstract away the most part of successful and unsuccessful requests in our tests and still get\nvalid tests. Thus, when testing the API layer of this service the only thing that matters is the\nquery and the response.</p><p>Services like micro-rss-parser has another characteristic that makes them easy to test. No\nauthentication or authorization, which means that we do not need to check different types of errors\nbased on different states of authorization. Thus, it is only the GraphQL query and the response\nthat matters.</p><p>I created a helper that allowed me to write tests in an easy way with focus on the queries. The\ntests look like this:</p><pre><code class=\"CodeBlock_Highlight__2EDB2\" data-language=\"js\"><pre class=\"prism-code language-js\"><div class=\"token-line\"><span class=\"token plain\">testGraphQlService</span><span class=\"token template-string template-punctuation string\">`</span><span class=\"token template-string string\">{</span></div><div class=\"token-line\"><span class=\"token template-string string\">  feed(url=&quot;https://rolflekang.com/feed.xml&quot;) {</span></div><div class=\"token-line\"><span class=\"token template-string string\">    entries {</span></div><div class=\"token-line\"><span class=\"token template-string string\">      title</span></div><div class=\"token-line\"><span class=\"token template-string string\">    }</span></div><div class=\"token-line\"><span class=\"token template-string string\">  }</span></div><div class=\"token-line\"><span class=\"token template-string string\">}</span></div><div class=\"token-line\"><span class=\"token template-string string\"> </span><span class=\"token template-string template-punctuation string\">`</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">\n</span></div></pre></code></pre><p>Under the hood that helper creates a <a href=\"https://facebook.github.io/jest/\">jest</a> test that asserts to a snapshot with jests handy\n<a href=\"https://facebook.github.io/jest/docs/expect.html#tomatchsnapshotoptionalstring\">toMatchSnapshot()</a>. This generates a snapshot file for every test file with a map of responses\nwith the query as key. Thus, reviewing these tests and test changes is a bliss. Below is the\nimplementation of the test helper as it was in micro-rss-parser at the time when this was written.</p><pre><code class=\"CodeBlock_Highlight__2EDB2\" data-language=\"js\"><pre class=\"prism-code language-js\"><div class=\"token-line\"><span class=\"token keyword\">const</span><span class=\"token plain\"> request </span><span class=\"token operator\">=</span><span class=\"token plain\"> </span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">&#x27;superagent&#x27;</span><span class=\"token punctuation\">)</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">\n</span></div><div class=\"token-line\"><span class=\"token plain\"></span><span class=\"token keyword\">function</span><span class=\"token plain\"> </span><span class=\"token function\">createTestServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\">{</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">  </span><span class=\"token comment\">/*</span></div><div class=\"token-line\"><span class=\"token comment\">   * Set up a test instance and return url.</span></div><div class=\"token-line\"><span class=\"token comment\">   * For micro-rss-parser I used this https://github.com/zeit/micro#testing</span></div><div class=\"token-line\"><span class=\"token comment\">   */</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\"></span><span class=\"token punctuation\">}</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">\n</span></div><div class=\"token-line\"><span class=\"token plain\"></span><span class=\"token keyword\">function</span><span class=\"token plain\"> </span><span class=\"token function\">testGraphqlApi</span><span class=\"token plain\"> </span><span class=\"token punctuation\">(</span><span class=\"token parameter\">strings</span><span class=\"token parameter punctuation\">,</span><span class=\"token parameter\"> </span><span class=\"token parameter operator\">...</span><span class=\"token parameter\">args</span><span class=\"token punctuation\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\">{</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">  </span><span class=\"token keyword\">const</span><span class=\"token plain\"> query </span><span class=\"token operator\">=</span><span class=\"token plain\"> </span><span class=\"token known-class-name class-name\">String</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">raw</span><span class=\"token punctuation\">(</span><span class=\"token plain\">strings</span><span class=\"token punctuation\">,</span><span class=\"token plain\"> </span><span class=\"token spread operator\">...</span><span class=\"token plain\">args</span><span class=\"token punctuation\">)</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">  </span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token plain\">query</span><span class=\"token punctuation\">,</span><span class=\"token plain\"> </span><span class=\"token keyword\">async</span><span class=\"token plain\"> </span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token punctuation\">{</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">    </span><span class=\"token keyword\">let</span><span class=\"token plain\"> response</span></div><div class=\"token-line\"><span class=\"token plain\">    </span><span class=\"token keyword\">const</span><span class=\"token plain\"> url </span><span class=\"token operator\">=</span><span class=\"token plain\"> </span><span class=\"token keyword control-flow\">await</span><span class=\"token plain\"> </span><span class=\"token function\">createTestServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">\n</span></div><div class=\"token-line\"><span class=\"token plain\">    </span><span class=\"token keyword control-flow\">try</span><span class=\"token plain\"> </span><span class=\"token punctuation\">{</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">      response </span><span class=\"token operator\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\">(</span><span class=\"token keyword control-flow\">await</span><span class=\"token plain\"> request</span></div><div class=\"token-line\"><span class=\"token plain\">        </span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">post</span><span class=\"token punctuation\">(</span><span class=\"token plain\">url</span><span class=\"token punctuation\">)</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">        </span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">&#x27;User-Agent&#x27;</span><span class=\"token punctuation\">,</span><span class=\"token plain\"> </span><span class=\"token string\">&#x27;graphql-test&#x27;</span><span class=\"token punctuation\">)</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">        </span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">&#x27;Content-Type&#x27;</span><span class=\"token punctuation\">,</span><span class=\"token plain\"> </span><span class=\"token string\">&#x27;application/json&#x27;</span><span class=\"token punctuation\">)</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">        </span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">send</span><span class=\"token punctuation\">(</span><span class=\"token known-class-name class-name\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token plain\"> query </span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">      </span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">body</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">    </span><span class=\"token punctuation\">}</span><span class=\"token plain\"> </span><span class=\"token keyword control-flow\">catch</span><span class=\"token plain\"> </span><span class=\"token punctuation\">(</span><span class=\"token plain\">error</span><span class=\"token punctuation\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\">{</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">      </span><span class=\"token keyword control-flow\">if</span><span class=\"token plain\"> </span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token plain\">error</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">response</span><span class=\"token punctuation\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\">{</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">        </span><span class=\"token keyword control-flow\">throw</span><span class=\"token plain\"> error</span></div><div class=\"token-line\"><span class=\"token plain\">      </span><span class=\"token punctuation\">}</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">\n</span></div><div class=\"token-line\"><span class=\"token plain\">      response </span><span class=\"token operator\">=</span><span class=\"token plain\"> error</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">response</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">body</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">    </span><span class=\"token punctuation\">}</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">\n</span></div><div class=\"token-line\"><span class=\"token plain\">    </span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token plain\">response</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toMatchSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">  </span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\"></span><span class=\"token punctuation\">}</span><span class=\"token plain\"></span></div><div class=\"token-line\"><span class=\"token plain\">\n</span></div></pre></code></pre><p>It has made it easy to write good and readable API tests of the little microservice. However,\nkeep in mind that this is a sufficient solution due to the assumptions discussed earlier so it\nmight not be a fit approach for you project, nevertheless, feel free to take the helper. Let me\nknow how it works out for you ✌️</p></div><section id=\"related-posts\" class=\"RelatedPosts_RelatedPosts__BX_lO\"><header>Related posts</header><ul><li><a href=\"/rmoq\">rmoq - a request mock cache</a> <em>30.12.2014</em></li><li><a href=\"/related-articles-with-gatsby\">Related articles with Gatsby</a> <em>20.02.2019</em></li><li><a href=\"/twitter-cards-for-gatsby-posts\">Twitter cards for Gatsby posts</a> <em>26.02.2019</em></li><li><a href=\"/serving-plain-text-with-nextjs\">Serving text/plain for curl with Next</a> <em>26.05.2020</em></li></ul></section><div class=\"Post_Tags__HvmNu\">#graphql, #testing, #javascript</div></div></main></div></div></div><script id=\"__NEXT_DATA__\" type=\"application/json\">{\"props\":{\"pageProps\":{\"post\":{\"slug\":\"testing-simple-graphql-services\",\"layout\":\"post\",\"date\":\"2017-05-28T00:00:00.000Z\",\"title\":\"Testing simple GraphQL services\",\"tags\":[\"graphql\",\"testing\",\"javascript\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"I recently created a \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/relekang/micro-rss-parser\\\"\\n  }, \\\"GraphQL based microservice\\\"), \\\" for parsing RSS-feeds. I wanted\\\\nto write something down about the approach I took to test the API. The service is read only, as\\\\nthere is little we can push out into others RSS feeds.\\\"), mdx(\\\"p\\\", null, \\\"GraphQL returns 200 status for almost everything. Whenever error occurs it only pushes the error\\\\nto a list of errors that is passed to the payload. This is because it is designed to be resillient\\\\nand give as much information as it can even when something fails. This also means that we can\\\\nabstract away the most part of successful and unsuccessful requests in our tests and still get\\\\nvalid tests. Thus, when testing the API layer of this service the only thing that matters is the\\\\nquery and the response.\\\"), mdx(\\\"p\\\", null, \\\"Services like micro-rss-parser has another characteristic that makes them easy to test. No\\\\nauthentication or authorization, which means that we do not need to check different types of errors\\\\nbased on different states of authorization. Thus, it is only the GraphQL query and the response\\\\nthat matters.\\\"), mdx(\\\"p\\\", null, \\\"I created a helper that allowed me to write tests in an easy way with focus on the queries. The\\\\ntests look like this:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"testGraphQlService`{\\\\n  feed(url=\\\\\\\"https://rolflekang.com/feed.xml\\\\\\\") {\\\\n    entries {\\\\n      title\\\\n    }\\\\n  }\\\\n}\\\\n `\\\\n\\\")), mdx(\\\"p\\\", null, \\\"Under the hood that helper creates a \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://facebook.github.io/jest/\\\"\\n  }, \\\"jest\\\"), \\\" test that asserts to a snapshot with jests handy\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://facebook.github.io/jest/docs/expect.html#tomatchsnapshotoptionalstring\\\"\\n  }, \\\"toMatchSnapshot()\\\"), \\\". This generates a snapshot file for every test file with a map of responses\\\\nwith the query as key. Thus, reviewing these tests and test changes is a bliss. Below is the\\\\nimplementation of the test helper as it was in micro-rss-parser at the time when this was written.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"const request = require('superagent')\\\\n\\\\nfunction createTestServer() {\\\\n  /*\\\\n   * Set up a test instance and return url.\\\\n   * For micro-rss-parser I used this https://github.com/zeit/micro#testing\\\\n   */\\\\n}\\\\n\\\\nfunction testGraphqlApi (strings, ...args) {\\\\n  const query = String.raw(strings, ...args)\\\\n  test(query, async () =\\u003e {\\\\n    let response\\\\n    const url = await createTestServer()\\\\n\\\\n    try {\\\\n      response = (await request\\\\n        .post(url)\\\\n        .set('User-Agent', 'graphql-test')\\\\n        .set('Content-Type', 'application/json')\\\\n        .send(JSON.stringify({ query }))\\\\n      ).body\\\\n    } catch (error) {\\\\n      if (!error.response) {\\\\n        throw error\\\\n      }\\\\n\\\\n      response = error.response.body\\\\n    }\\\\n\\\\n    expect(response).toMatchSnapshot()\\\\n  })\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"It has made it easy to write good and readable API tests of the little microservice. However,\\\\nkeep in mind that this is a sufficient solution due to the assumptions discussed earlier so it\\\\nmight not be a fit approach for you project, nevertheless, feel free to take the helper. Let me\\\\nknow how it works out for you \\\\u270C\\\\uFE0F\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eI recently created a \\u003ca href=\\\"https://github.com/relekang/micro-rss-parser\\\"\\u003eGraphQL based microservice\\u003c/a\\u003e for parsing RSS-feeds. I wanted\\nto write something down about the approach I took to test the API. The service is read only, as\\nthere is little we can push out into others RSS feeds.\\u003c/p\\u003e\\u003cp\\u003eGraphQL returns 200 status for almost everything. Whenever error occurs it only pushes the error\\nto a list of errors that is passed to the payload. This is because it is designed to be resillient\\nand give as much information as it can even when something fails. This also means that we can\\nabstract away the most part of successful and unsuccessful requests in our tests and still get\\nvalid tests. Thus, when testing the API layer of this service the only thing that matters is the\\nquery and the response.\\u003c/p\\u003e\\u003cp\\u003eServices like micro-rss-parser has another characteristic that makes them easy to test. No\\nauthentication or authorization, which means that we do not need to check different types of errors\\nbased on different states of authorization. Thus, it is only the GraphQL query and the response\\nthat matters.\\u003c/p\\u003e\\u003cp\\u003eI created a helper that allowed me to write tests in an easy way with focus on the queries. The\\ntests look like this:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etestGraphQlService\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e{\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e  feed(url=\\u0026quot;https://rolflekang.com/feed.xml\\u0026quot;) {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e    entries {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      title\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e    }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e  }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e}\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eUnder the hood that helper creates a \\u003ca href=\\\"https://facebook.github.io/jest/\\\"\\u003ejest\\u003c/a\\u003e test that asserts to a snapshot with jests handy\\n\\u003ca href=\\\"http://facebook.github.io/jest/docs/expect.html#tomatchsnapshotoptionalstring\\\"\\u003etoMatchSnapshot()\\u003c/a\\u003e. This generates a snapshot file for every test file with a map of responses\\nwith the query as key. Thus, reviewing these tests and test changes is a bliss. Below is the\\nimplementation of the test helper as it was in micro-rss-parser at the time when this was written.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e request \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;superagent\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateTestServer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e/*\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e   * Set up a test instance and return url.\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e   * For micro-rss-parser I used this https://github.com/zeit/micro#testing\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e   */\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003etestGraphqlApi\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003estrings\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eargs\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e query \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token known-class-name class-name\\\"\\u003eString\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eraw\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003estrings\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eargs\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003etest\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003equery\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003easync\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003elet\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e url \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eawait\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateTestServer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003etry\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eawait\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e request\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003epost\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eurl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eset\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;User-Agent\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;graphql-test\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eset\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;Content-Type\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;application/json\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esend\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token known-class-name class-name\\\"\\u003eJSON\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003estringify\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e query \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ebody\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ecatch\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eerror\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eerror\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eresponse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ethrow\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e error\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e error\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eresponse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ebody\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eexpect\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eresponse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003etoMatchSnapshot\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eIt has made it easy to write good and readable API tests of the little microservice. However,\\nkeep in mind that this is a sufficient solution due to the assumptions discussed earlier so it\\nmight not be a fit approach for you project, nevertheless, feel free to take the helper. Let me\\nknow how it works out for you ✌️\\u003c/p\\u003e\",\"scope\":{}},\"relatedPosts\":[{\"slug\":\"rmoq\",\"layout\":\"post\",\"title\":\"rmoq - a request mock cache\",\"date\":\"2014-12-30T00:00:00.000Z\",\"category\":\"Python\",\"tags\":[\"python\",\"testing\",\"mocking\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"While working on \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://feedhuddler.com\\\"\\n  }, \\\"feedhuddler.com\\\"), \\\" there are tests that test the feedparsing functionality. It uses the actual feeds from their origins, which I think is ok for this situation. If the feeds are not longer parseable by feedhuddler the continous integration will fail and I can look into it. It could be managed by some downloaded feeds and mocking of the requests. However, I wouldn't feel comfortable by putting other peoples content in the feedhuddler repo. Furthermore, it should be easy to add a feed that is reported to break the parser without much work. The tests can take a while on the continous integration server without it beeing a big deal, but locally the time consuming tests makes it cumbersome to work test driven or to work with the tests at all.\\\"), mdx(\\\"p\\\", null, mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/relekang/rmoq\\\"\\n  }, mdx(\\\"strong\\\", {\\n    parentName: \\\"a\\\"\\n  }, \\\"rmoq\\\")), \\\" was created to work around that problem. It listen on all requests made by the \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"http://docs.python-requests.org/en/latest/\\\"\\n  }, \\\"requests\\\"), \\\" framework and intercepts them. If a request is already been cached in the cache folder it creates a response based on a local file. On the other hand, if no file exists for that url it will perform the request and save the content into a file and then return the response. Thus, if the files are already there the tests will run faster and no manual work is needed to create the local files.\\\"), mdx(\\\"p\\\", null, \\\"A nice side-effect of using files as storage is that they can be added to the version control repo. In the case of the feedhuddler tests it is not wanted behaviour, but in other cases it might be just what you want to add these files to code repository.\\\"), mdx(\\\"p\\\", null, \\\"The code can be found on \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/relekang/rmoq\\\"\\n  }, \\\"github.com/relekang/rmoq\\\"), \\\" and it can be installed with pip:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-bash\\\"\\n  }, \\\"pip install rmoq\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The basic way to use it is just to add a decorator to your test:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-python\\\"\\n  }, \\\"@rmoq.activate('test_fixtures')\\\\ndef test_remote_call():\\\\n    response = requests.get('http://example.com')\\\\n    assert response.body == 'Example'\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The path parameter sent in above is optional, and if left out the path will then be set to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"fixtures/\\\"), \\\". The test function is then wrapped in a with statement that intercepts all requests and either load them from file or fetches the content from the url and saves it to a file before returning the response.\\\"), mdx(\\\"p\\\", null, \\\"The feedhuddler tests went from \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Ran 21 tests in 41.394s\\\"), \\\" to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Ran 21 tests in 1.942s\\\"), \\\" which is quite a speedup and the tests suite is much more pleasant to work on.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eWhile working on \\u003ca href=\\\"https://feedhuddler.com\\\"\\u003efeedhuddler.com\\u003c/a\\u003e there are tests that test the feedparsing functionality. It uses the actual feeds from their origins, which I think is ok for this situation. If the feeds are not longer parseable by feedhuddler the continous integration will fail and I can look into it. It could be managed by some downloaded feeds and mocking of the requests. However, I wouldn\\u0026#x27;t feel comfortable by putting other peoples content in the feedhuddler repo. Furthermore, it should be easy to add a feed that is reported to break the parser without much work. The tests can take a while on the continous integration server without it beeing a big deal, but locally the time consuming tests makes it cumbersome to work test driven or to work with the tests at all.\\u003c/p\\u003e\\u003cp\\u003e\\u003ca href=\\\"https://github.com/relekang/rmoq\\\"\\u003e\\u003cstrong\\u003ermoq\\u003c/strong\\u003e\\u003c/a\\u003e was created to work around that problem. It listen on all requests made by the \\u003ca href=\\\"http://docs.python-requests.org/en/latest/\\\"\\u003erequests\\u003c/a\\u003e framework and intercepts them. If a request is already been cached in the cache folder it creates a response based on a local file. On the other hand, if no file exists for that url it will perform the request and save the content into a file and then return the response. Thus, if the files are already there the tests will run faster and no manual work is needed to create the local files.\\u003c/p\\u003e\\u003cp\\u003eA nice side-effect of using files as storage is that they can be added to the version control repo. In the case of the feedhuddler tests it is not wanted behaviour, but in other cases it might be just what you want to add these files to code repository.\\u003c/p\\u003e\\u003cp\\u003eThe code can be found on \\u003ca href=\\\"https://github.com/relekang/rmoq\\\"\\u003egithub.com/relekang/rmoq\\u003c/a\\u003e and it can be installed with pip:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"bash\\\"\\u003e\\u003cpre class=\\\"prism-code language-bash\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003epip \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003einstall\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e rmoq\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe basic way to use it is just to add a decorator to your test:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"python\\\"\\u003e\\u003cpre class=\\\"prism-code language-python\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token decorator annotation punctuation\\\"\\u003e@rmoq\\u003c/span\\u003e\\u003cspan class=\\\"token decorator annotation punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token decorator annotation punctuation\\\"\\u003eactivate\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;test_fixtures\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003edef\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003etest_remote_call\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e requests\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eget\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;http://example.com\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eassert\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ebody \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;Example\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe path parameter sent in above is optional, and if left out the path will then be set to \\u003ccode\\u003efixtures/\\u003c/code\\u003e. The test function is then wrapped in a with statement that intercepts all requests and either load them from file or fetches the content from the url and saves it to a file before returning the response.\\u003c/p\\u003e\\u003cp\\u003eThe feedhuddler tests went from \\u003ccode\\u003eRan 21 tests in 41.394s\\u003c/code\\u003e to \\u003ccode\\u003eRan 21 tests in 1.942s\\u003c/code\\u003e which is quite a speedup and the tests suite is much more pleasant to work on.\\u003c/p\\u003e\",\"scope\":{}},\"count\":1},{\"slug\":\"related-articles-with-gatsby\",\"layout\":\"post\",\"title\":\"Related articles with Gatsby\",\"date\":\"2019-02-20T00:00:00.000Z\",\"category\":\"Gatsby\",\"tags\":[\"gatsby\",\"javascript\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"This website is created with \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/\\\"\\n  }, \\\"Gatsby\\\"), \\\", Reasonml and a little bit of typescript.\\\\nIn this post I will explain how I built the \\\\\\\"Related articles\\\\\\\" feature that can be\\\\nseen on the bottom of some of the articles. I have kept all the examples in this\\\\npost in javascript so it will be helpful to more people.\\\"), mdx(\\\"p\\\", null, \\\"First of we need to define what makes two posts or articles related. On this site\\\\nand for this article I am defining it as articles that has the same tags. In the\\\\nfrontmatter I have a comma separated list of tags. Below is an example:\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-yaml\\\"\\n  }, \\\"title: Related articles with Gatsby\\\\nslug: related-articles-with-gatsby\\\\ntags: gatsby,javascript\\\\ndate: 2019-02-20\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This blog is based on a setup with \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\n  }, \\\"gatsby-transformer-remark\\\"), \\\" which has the\\\\nfollowing in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatsby-node.js\\\"), \\\" to generate the pages. The first part fetches all\\\\nthe articles and the necessary metadata with Graphql. The second part loops over\\\\nall the articles and then creates pages for them with the Gatsby \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createPage\\\"), \\\"\\\\nfunction.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"exports.createPages = async ({ graphql, actions }) =\\u003e {\\\\n  const { createPage } = actions;\\\\n  const templatePath = path.resolve('./src/templates/');\\\\n\\\\n  const response = await graphql(\\\\n    `\\\\n      query {\\\\n        allMarkdownRemark {\\\\n          edges {\\\\n            node {\\\\n              frontmatter {\\\\n                layout\\\\n                slug\\\\n                date(formatString: \\\\\\\"DD.MM.YYYY\\\\\\\")\\\\n              }\\\\n            }\\\\n          }\\\\n        }\\\\n      }\\\\n    `\\\\n  );\\\\n\\\\n  const postEdges = response.data.allMarkdownRemark.edges\\\\n\\\\n  postEdges.forEach(({ node }) =\\u003e {\\\\n    const { slug, layout, tags } = node.frontmatter;\\\\n    createPage({\\\\n      path: `/${slug}`,\\\\n      component: path.join(templatePath, `${layout}.tsx`),\\\\n      context: { slug },\\\\n    });\\\\n  });\\\\n\\\")), mdx(\\\"p\\\", null, \\\"In order to populate the data for related articles we will add the data as\\\\ncontext parameters in the createPage call. However, first we need to find\\\\nthose articles. The code below will build a map of tags and articles with those\\\\ntags.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"const articlesByTags = postEdges.reduce((lastValue, { node }) =\\u003e {\\\\n  const tags = node.frontmatter.tags || \\\\\\\"\\\\\\\";\\\\n  tags.split(/, ?/).forEach(tag =\\u003e {\\\\n    if (lastValue[tag]) {\\\\n      lastValue[tag].push(node.frontmatter);\\\\n    } else {\\\\n      lastValue[tag] = [node.frontmatter];\\\\n    }\\\\n  });\\\\n  return lastValue;\\\\n}, {});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The result will be something like the following, where \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"{...}\\\"), \\\" is the\\\\nfrontmatter of a post. This we can use to look up all the related articles for\\\\none post.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"{\\\\n  gatsby: [{...}, {...}],\\\\n  cli: [{...}, {...}]\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"articlesByTags\\\"), \\\" is useful for looking up all the articles that has a list of tags. Let\\\\nus look at a possible implementation for that.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"const _ = require(\\\\\\\"lodash/fp\\\\\\\");\\\\n\\\\nfunction findRelatedArticles(slug, tags) {\\\\n  return _.flow([\\\\n    _.split(/, ?/),\\\\n    _.map(tag =\\u003e articlesByTags[tag]),\\\\n    _.flatten,\\\\n    _.filter(node =\\u003e node.slug !== slug),\\\\n    _.uniqBy(node =\\u003e node.slug)\\\\n  ])(tags);\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"In this function the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"_\\\"), \\\" is the\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/lodash/lodash/wiki/FP-Guide\\\"\\n  }, \\\"functional programming(fp) version of lodash\\\"), \\\", which has this neat\\\\nutility called flow for grouping actions together. Flow returns a function when\\\\ncalled will perform all the operations in the array. Each operation will have\\\\nto be a function and the return value of each of them will be passed as the\\\\nargument to the next one. The function above will first split the comma\\\\nseparated string to a list and then perform a map on that list of tags to a\\\\nlist of lists of articles. Since we now have a list of lists it is necessary to\\\\nflatten it, which will result in a list of articles. The next step is to filter\\\\nout the current post since we only want other articles than the one that is\\\\ncurrently viewed. In the last step we want to remove any duplicate articles and\\\\ncan do that by selecting unique elements based on the slug.\\\"), mdx(\\\"p\\\", null, \\\"To finish the data setup it is necessary to add the related articles to the\\\\ncontext in the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createPage\\\"), \\\" call.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"createPage({\\\\n  path: `/${slug}`,\\\\n  component: path.join(templatePath, `${layout}.tsx`),\\\\n  context: {\\\\n    slug,\\\\n    // highlight-next-line\\\\n    relatedArticles: findRelatedArticles(slug, tags),\\\\n  },\\\\n});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatsby-node.js\\\"), \\\" file should look something like the following now. In the\\\\ncode below the changes is highlighted.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"exports.createPages = async ({ graphql, actions }) =\\u003e {\\\\n  const { createPage } = actions;\\\\n  const templatePath = path.resolve('./src/templates/');\\\\n\\\\n  const response = await graphql(\\\\n    `\\\\n      query {\\\\n        allMarkdownRemark {\\\\n          edges {\\\\n            node {\\\\n              frontmatter {\\\\n                layout\\\\n                slug\\\\n                date(formatString: \\\\\\\"DD.MM.YYYY\\\\\\\")\\\\n              }\\\\n            }\\\\n          }\\\\n        }\\\\n      }\\\\n    `\\\\n  );\\\\n\\\\n  const postEdges = response.data.allMarkdownRemark.edges;\\\\n\\\\n  // highlight-start\\\\n  const articlesByTags = postEdges.reduce((lastValue, { node }) =\\u003e {\\\\n    const tags = node.frontmatter.tags || '';\\\\n    tags.split(/, ?/).forEach(tag =\\u003e {\\\\n      if (lastValue[tag]) {\\\\n        lastValue[tag].push(node.frontmatter);\\\\n      } else {\\\\n        lastValue[tag] = [node.frontmatter];\\\\n      }\\\\n    });\\\\n    return lastValue;\\\\n  }, {});\\\\n  // highlight-end\\\\n\\\\n  // highlight-start\\\\n  function findRelatedArticles(slug, tags) {\\\\n    return _.flow([\\\\n      _.split(/, ?/),\\\\n      _.map(tag =\\u003e articlesByTags[tag]),\\\\n      _.flatten,\\\\n      _.filter(node =\\u003e node.slug !== slug),\\\\n      _.uniqBy(node =\\u003e node.slug),\\\\n    ])(tags);\\\\n  }\\\\n  // highlight-end\\\\n\\\\n  postEdges.forEach(({ node }) =\\u003e {\\\\n    const { slug, layout, tags } = node.frontmatter;\\\\n    createPage({\\\\n      path: `/${slug}`,\\\\n      component: path.join(templatePath, `${layout}.tsx`),\\\\n      context: {\\\\n        slug,\\\\n        // highlight-next-line\\\\n        relatedArticles: findRelatedArticles(slug, tags),\\\\n      },\\\\n    });\\\\n  });\\\\n\\\")), mdx(\\\"p\\\", null, \\\"At this point all the data needed is in place. However, it still has to\\\\nbe shown to give some value. Let us look at a component to add this to\\\\nthe site.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"export function RelatedArticles(props) {\\\\n  if (!props.articles || props.articles.length === 0) {\\\\n    return \\u003cdiv /\\u003e;\\\\n  }\\\\n  return (\\\\n    \\u003csection id=\\\\\\\"related-articles\\\\\\\"\\u003e\\\\n      \\u003cheader\\u003eRelated articles\\u003c/header\\u003e\\\\n      \\u003cul\\u003e\\\\n        {props.articles.map(article =\\u003e (\\\\n          \\u003cli key={article.slug}\\u003e\\\\n            \\u003cLink to={`/${article.slug}`}\\u003e{article.title}\\u003c/Link\\u003e\\\\n            {' '}\\\\n            \\u003cem\\u003e{article.date}\\u003c/em\\u003e\\\\n          \\u003c/li\\u003e\\\\n        ))}\\\\n      \\u003c/ul\\u003e\\\\n    \\u003c/section\\u003e\\\\n  );\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This component will render an empty div if there are no related articles.\\\\nIn the case of related articles it will render a list with links to the\\\\narticles. Remember that the data available here is defined by the graphql\\\\nquery in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatbsy-node.js\\\"), \\\". In order to glue these parts together and make\\\\nit work the component needs to be added in the template used for the\\\\narticles.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"\\u003cRelatedArticles articles={props.pageContext.relatedArticles} /\\u003e\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The page component will get the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"context\\\"), \\\" attribute from \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createPage\\\"), \\\" as\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"pageContext\\\"), \\\". Thus, the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"relatedArticles\\\"), \\\" attribute we created earlier will\\\\nbe accessible on that object.\\\"), mdx(\\\"p\\\", null, \\\"This is all that is needed to have related articles with a Gatsby site with\\\\nthe transformer-remark plugin. To see have it looks have a look at the bottom\\\\nof the \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"/testing-simple-graphql-services#related-articles\\\"\\n  }, \\\"Testing simple GraphQL services\\\"), \\\"\\\\narticle.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eThis website is created with \\u003ca href=\\\"https://www.gatsbyjs.org/\\\"\\u003eGatsby\\u003c/a\\u003e, Reasonml and a little bit of typescript.\\nIn this post I will explain how I built the \\u0026quot;Related articles\\u0026quot; feature that can be\\nseen on the bottom of some of the articles. I have kept all the examples in this\\npost in javascript so it will be helpful to more people.\\u003c/p\\u003e\\u003cp\\u003eFirst of we need to define what makes two posts or articles related. On this site\\nand for this article I am defining it as articles that has the same tags. In the\\nfrontmatter I have a comma separated list of tags. Below is an example:\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"yaml\\\"\\u003e\\u003cpre class=\\\"prism-code language-yaml\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e Related articles with Gatsby\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e related\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003earticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ewith\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003egatsby\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e gatsby\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ejavascript\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token key atrule\\\"\\u003edate\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token datetime number\\\"\\u003e2019-02-20\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis blog is based on a setup with \\u003ca href=\\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\u003egatsby-transformer-remark\\u003c/a\\u003e which has the\\nfollowing in \\u003ccode\\u003egatsby-node.js\\u003c/code\\u003e to generate the pages. The first part fetches all\\nthe articles and the necessary metadata with Graphql. The second part loops over\\nall the articles and then creates pages for them with the Gatsby \\u003ccode\\u003ecreatePage\\u003c/code\\u003e\\nfunction.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eexports\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method-variable function-variable method function property-access\\\"\\u003ecreatePages\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003easync\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e graphql\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e actions \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e createPage \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e actions\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e templatePath \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eresolve\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;./src/templates/\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eawait\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003egraphql\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      query {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e        allMarkdownRemark {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e          edges {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e            node {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e              frontmatter {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                layout\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                slug\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                date(formatString: \\u0026quot;DD.MM.YYYY\\u0026quot;)\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e              }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e            }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e          }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e        }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e postEdges \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eallMarkdownRemark\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eedges\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  postEdges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e layout\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreatePage\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      component\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etemplatePath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003elayout\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e.tsx\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      context\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eIn order to populate the data for related articles we will add the data as\\ncontext parameters in the createPage call. However, first we need to find\\nthose articles. The code below will build a map of tags and articles with those\\ntags.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articlesByTags \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e postEdges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ereduce\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003elastValue\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003e, ?\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003elastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003epush\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe result will be something like the following, where \\u003ccode\\u003e{...}\\u003c/code\\u003e is the\\nfrontmatter of a post. This we can use to look up all the related articles for\\none post.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  gatsby\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  cli\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token spread operator\\\"\\u003e...\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe \\u003ccode\\u003earticlesByTags\\u003c/code\\u003e is useful for looking up all the articles that has a list of tags. Let\\nus look at a possible implementation for that.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e _ \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;lodash/fp\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003efindRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eflow\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003e, ?\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emap\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articlesByTags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eflatten\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efilter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003euniqBy\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eIn this function the \\u003ccode\\u003e_\\u003c/code\\u003e is the\\n\\u003ca href=\\\"https://github.com/lodash/lodash/wiki/FP-Guide\\\"\\u003efunctional programming(fp) version of lodash\\u003c/a\\u003e, which has this neat\\nutility called flow for grouping actions together. Flow returns a function when\\ncalled will perform all the operations in the array. Each operation will have\\nto be a function and the return value of each of them will be passed as the\\nargument to the next one. The function above will first split the comma\\nseparated string to a list and then perform a map on that list of tags to a\\nlist of lists of articles. Since we now have a list of lists it is necessary to\\nflatten it, which will result in a list of articles. The next step is to filter\\nout the current post since we only want other articles than the one that is\\ncurrently viewed. In the last step we want to remove any duplicate articles and\\ncan do that by selecting unique elements based on the slug.\\u003c/p\\u003e\\u003cp\\u003eTo finish the data setup it is necessary to add the related articles to the\\ncontext in the \\u003ccode\\u003ecreatePage\\u003c/code\\u003e call.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreatePage\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  component\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etemplatePath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003elayout\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e.tsx\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    relatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003efindRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe \\u003ccode\\u003egatsby-node.js\\u003c/code\\u003e file should look something like the following now. In the\\ncode below the changes is highlighted.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eexports\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method-variable function-variable method function property-access\\\"\\u003ecreatePages\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003easync\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e graphql\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e actions \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e createPage \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e actions\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e templatePath \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eresolve\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;./src/templates/\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eawait\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003egraphql\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      query {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e        allMarkdownRemark {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e          edges {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e            node {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e              frontmatter {\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                layout\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                slug\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e                date(formatString: \\u0026quot;DD.MM.YYYY\\u0026quot;)\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e              }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e            }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e          }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e        }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e      }\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e postEdges \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e response\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eallMarkdownRemark\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eedges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articlesByTags \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e postEdges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ereduce\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003elastValue\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003e, ?\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003elastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003epush\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e lastValue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003efindRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eflow\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003e, ?\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emap\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articlesByTags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etag\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eflatten\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efilter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      _\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003euniqBy\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003enode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  postEdges\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e layout\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreatePage\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      component\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etemplatePath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003elayout\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e.tsx\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      context\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        relatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003efindRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eAt this point all the data needed is in place. However, it still has to\\nbe shown to give some value. Let us look at a component to add this to\\nthe site.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword module\\\"\\u003eexport\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function maybe-class-name\\\"\\u003eRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eprops\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eprops\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003earticles\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e props\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003earticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003elength\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e===\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ediv \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003esection id\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;related-articles\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eheader\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eRelated\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articles\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eheader\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eul\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eprops\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003earticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emap\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e          \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eli key\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eLink\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e to\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eLink\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27; \\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e            \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eem\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003earticle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edate\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eem\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e          \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eli\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eul\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003esection\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis component will render an empty div if there are no related articles.\\nIn the case of related articles it will render a list with links to the\\narticles. Remember that the data available here is defined by the graphql\\nquery in \\u003ccode\\u003egatbsy-node.js\\u003c/code\\u003e. In order to glue these parts together and make\\nit work the component needs to be added in the template used for the\\narticles.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eRelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e articles\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eprops\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003epageContext\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003erelatedArticles\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe page component will get the \\u003ccode\\u003econtext\\u003c/code\\u003e attribute from \\u003ccode\\u003ecreatePage\\u003c/code\\u003e as\\n\\u003ccode\\u003epageContext\\u003c/code\\u003e. Thus, the \\u003ccode\\u003erelatedArticles\\u003c/code\\u003e attribute we created earlier will\\nbe accessible on that object.\\u003c/p\\u003e\\u003cp\\u003eThis is all that is needed to have related articles with a Gatsby site with\\nthe transformer-remark plugin. To see have it looks have a look at the bottom\\nof the \\u003ca href=\\\"/testing-simple-graphql-services#related-articles\\\"\\u003eTesting simple GraphQL services\\u003c/a\\u003e\\narticle.\\u003c/p\\u003e\",\"scope\":{}},\"count\":1},{\"slug\":\"twitter-cards-for-gatsby-posts\",\"layout\":\"post\",\"title\":\"Twitter cards for Gatsby posts\",\"date\":\"2019-02-26T00:00:00.000Z\",\"category\":\"Gatsby\",\"tags\":[\"gatsby\",\"canvas\",\"javascript\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"Previously this blog had the default article twitter card. I have seen some\\\\nother sited like \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://dev.to/\\\"\\n  }, \\\"dev.to\\\"), \\\" have these nice title images for the twitter cards.\\\\nI wanted to add these to this site for two reasons: they look kind of nice and\\\\nI would like to look into what it would take to create these. The idea I had\\\\nfor my own cards was for it to resemble the current header with RL and the\\\\npurple line and then the title of the post below it. This first version\\\\nwas written with Node.js and \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/Automattic/node-canvas\\\"\\n  }, \\\"node-canvas\\\"), \\\", maybe in the feature I will try\\\\nto convert it to native reason. Here is a preview of the twitter card for this\\\\npost.\\\"), mdx(\\\"p\\\", null, mdx(\\\"img\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"src\\\": \\\"/twitter-cards-for-gatsby-posts-link-card.png\\\",\\n    \\\"alt\\\": \\\"Twitter card for this post\\\"\\n  })), mdx(\\\"p\\\", null, \\\"Twitter has \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://cards-dev.twitter.com/validator\\\"\\n  }, \\\"a tool to validate\\\"), \\\" the cards for different\\\\npages. It will show how the card will be viewed in a tweet. Below is an\\\\nexample with this post.\\\"), mdx(\\\"p\\\", null, mdx(\\\"img\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"src\\\": \\\"/images/twitter-cards-for-gatsby-posts/card-screenshot.png\\\",\\n    \\\"alt\\\": \\\"Screenshot of a twitter card\\\"\\n  })), mdx(\\\"p\\\", null, \\\"So how to build this? Two things is necessary to get this to work. Creating\\\\nthe image and then add the meta tags to each posts according to the twitter\\\\ndocumentation.\\\"), mdx(\\\"p\\\", null, \\\"Firstly, let us look at the creating of the images themselves. \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://github.com/Automattic/node-canvas\\\"\\n  }, \\\"node-canvas\\\"), \\\"\\\\nis a nice tool to do drawing in Node.js that we want to store in a file. It\\\\ncan do many of the things possible to do with browser side canvas. Below is\\\\nthe implementation of the card for this site. What parts each section draws\\\\nis put in comments above them. In the end of the function the\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"canvas.toBuffer('image/png')\\\"), \\\" function is used to create a buffer that we\\\\ncan write to a file, which then is written to the file.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"const { createCanvas } = require('canvas');\\\\nconst fs = require('fs');\\\\n\\\\nfunction createLinkCards({ title, path }) {\\\\n  const canvas = createCanvas(600, 300);\\\\n  const context = canvas.getContext('2d');\\\\n\\\\n  // Create a white background\\\\n  context.fillStyle = 'white';\\\\n  context.fillRect(0, 0, canvas.width, canvas.height);\\\\n\\\\n  // Create the big RL in purple\\\\n  context.font = '100pt serif';\\\\n  context.fillStyle = '#6C3082';\\\\n  const header = context.measureText('RL');\\\\n  context.fillText('RL', (canvas.width - header.width) / 2, 160);\\\\n\\\\n  // Create the purple line across the image\\\\n  context.strokeStyle = '#6C3082';\\\\n  context.beginPath();\\\\n  context.lineTo(0, 180);\\\\n  context.lineTo(canvas.width, 180);\\\\n  context.lineWidth = 6;\\\\n  context.stroke();\\\\n\\\\n  // Insert the title text beneath the purple line\\\\n  setFontSizeForWidth(canvas.width * 0.75)\\\\n  context.fillStyle = 'black';\\\\n  const text = context.measureText(title);\\\\n  context.fillText(title, (canvas.width - text.width) / 2, 250);\\\\n\\\\n  fs.writeFileSync(path, canvas.toBuffer('image/png'));\\\\n};\\\\n\\\")), mdx(\\\"p\\\", null, \\\"There are a few things to take a closer look at. Several places\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"context.measureText\\\"), \\\" is used. It will take use the current font config to\\\\nmeasure how wide the string passed as the first argument will be. This is\\\\nuseful to center the text since we can use it to calculate the placement of\\\\nthe text. Furthermore, it can be used to decide the font size if we do not\\\\nknow the amount of text to render beforehand. In this case, that is done for\\\\nthe title with the function below, which will test any font size from 100pt\\\\nand downwards until the text fits within a certain limit. In the case of the\\\\ncard title it is set to 75 % of the canvas with.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"function setFontSizeForWidth(context, width) {\\\\n  let fontSize = 100;\\\\n  do {\\\\n    fontSize--;\\\\n    context.font = fontSize + 'pt serif';\\\\n  } while (context.measureText(title).width \\u003e width);\\\\n  return fontSize;\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The next thing needed is to call the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createLinkCards\\\"), \\\" in the same place\\\\nwhere \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"createPage\\\"), \\\" is called in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatsby-node.js\\\"), \\\". In this example I have used\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\n  }, \\\"gatsby-transformer-remark\\\"), \\\" the code snippet below is looping over the result\\\\nof the graphql query similar to the documentation for\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\n  }, \\\"gatsby-transformer-remark\\\"), \\\".\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"posts.forEach(({ node }) =\\u003e {\\\\n  const { slug, layout, tags, title } = node.frontmatter;\\\\n  createPage({\\\\n    path: `/${slug}`,\\\\n    component: path.join(templatePath, 'blogpost.js'),\\\\n  });\\\\n  createLinkCards({\\\\n    title,\\\\n    path: path.join('public', `${slug}-link-card.png`),\\\\n  });\\\\n});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"After running \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"gatsby build\\\"), \\\" the public folder will now have a link card file\\\\nfor each post. Open one and check how it looks. Next step will be to link this\\\\nin the blogpost template. These things needs to be linked in meta tags in the\\\\nhead tag. To change metadata with Gatsby it is recommended to use react-helmet.\\\\nThere is a \\\", \\\"[guide on how to change metadata][gatsby-docs-metadata]\\\", \\\" in the Gatsby\\\\ndocumentation. In the component in the \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"blogpost.js\\\"), \\\" template add the following\\\\nsnippet of code.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-js\\\"\\n  }, \\\"\\u003cHelmet\\u003e\\\\n  \\u003cmeta name=\\\\\\\"twitter:title\\\\\\\" content={title} /\\u003e\\\\n  \\u003cmeta name=\\\\\\\"twitter:card\\\\\\\" content=\\\\\\\"summary_large_image\\\\\\\" /\\u003e\\\\n  \\u003cmeta name=\\\\\\\"twitter:author\\\\\\\" content=\\\\\\\"@\\u003cyour twitter handle\\u003e\\\\\\\" /\\u003e\\\\n  \\u003cmeta name=\\\\\\\"twitter:image:src\\\\\\\" content={`${window.location.origin}/${slug}-link-card.png`} /\\u003e\\\\n\\u003c/Helmet\\u003e\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This is all that is needed to get these nice cards in tweets with links to your blog.\\\\nIt might be worth looking into more meta tags for getting the same behavior on other\\\\nsites that have similar functionality. Remember that \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://cards-dev.twitter.com/validator\\\"\\n  }, \\\"twitter has a tool to test\\\"), \\\"\\\\nyour new cards.\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003ePreviously this blog had the default article twitter card. I have seen some\\nother sited like \\u003ca href=\\\"https://dev.to/\\\"\\u003edev.to\\u003c/a\\u003e have these nice title images for the twitter cards.\\nI wanted to add these to this site for two reasons: they look kind of nice and\\nI would like to look into what it would take to create these. The idea I had\\nfor my own cards was for it to resemble the current header with RL and the\\npurple line and then the title of the post below it. This first version\\nwas written with Node.js and \\u003ca href=\\\"https://github.com/Automattic/node-canvas\\\"\\u003enode-canvas\\u003c/a\\u003e, maybe in the feature I will try\\nto convert it to native reason. Here is a preview of the twitter card for this\\npost.\\u003c/p\\u003e\\u003cp\\u003e\\u003cimg alt=\\\"Twitter card for this post\\\" src=\\\"/twitter-cards-for-gatsby-posts-link-card.png\\\"/\\u003e\\u003c/p\\u003e\\u003cp\\u003eTwitter has \\u003ca href=\\\"https://cards-dev.twitter.com/validator\\\"\\u003ea tool to validate\\u003c/a\\u003e the cards for different\\npages. It will show how the card will be viewed in a tweet. Below is an\\nexample with this post.\\u003c/p\\u003e\\u003cp\\u003e\\u003cimg alt=\\\"Screenshot of a twitter card\\\" src=\\\"/images/twitter-cards-for-gatsby-posts/card-screenshot.png\\\"/\\u003e\\u003c/p\\u003e\\u003cp\\u003eSo how to build this? Two things is necessary to get this to work. Creating\\nthe image and then add the meta tags to each posts according to the twitter\\ndocumentation.\\u003c/p\\u003e\\u003cp\\u003eFirstly, let us look at the creating of the images themselves. \\u003ca href=\\\"https://github.com/Automattic/node-canvas\\\"\\u003enode-canvas\\u003c/a\\u003e\\nis a nice tool to do drawing in Node.js that we want to store in a file. It\\ncan do many of the things possible to do with browser side canvas. Below is\\nthe implementation of the card for this site. What parts each section draws\\nis put in comments above them. In the end of the function the\\n\\u003ccode\\u003ecanvas.toBuffer(\\u0026#x27;image/png\\u0026#x27;)\\u003c/code\\u003e function is used to create a buffer that we\\ncan write to a file, which then is written to the file.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e createCanvas \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;canvas\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fs \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;fs\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateLinkCards\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e title\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e path \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateCanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e600\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e300\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e context \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003egetContext\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;2d\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e// Create a white background\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efillStyle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;white\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efillRect\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheight\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e// Create the big RL in purple\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efont\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;100pt serif\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efillStyle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;#6C3082\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e header \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emeasureText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;RL\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efillText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;RL\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ecanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e header\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e2\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e160\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e// Create the purple line across the image\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003estrokeStyle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;#6C3082\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ebeginPath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elineTo\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e180\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elineTo\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ecanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e180\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003elineWidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e6\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003estroke\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token comment\\\"\\u003e// Insert the title text beneath the purple line\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003esetFontSizeForWidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ecanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e*\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e0.75\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efillStyle\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;black\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e text \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emeasureText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efillText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ecanvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e text\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e2\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e250\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  fs\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ewriteFileSync\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003epath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e canvas\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003etoBuffer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;image/png\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThere are a few things to take a closer look at. Several places\\n\\u003ccode\\u003econtext.measureText\\u003c/code\\u003e is used. It will take use the current font config to\\nmeasure how wide the string passed as the first argument will be. This is\\nuseful to center the text since we can use it to calculate the placement of\\nthe text. Furthermore, it can be used to decide the font size if we do not\\nknow the amount of text to render beforehand. In this case, that is done for\\nthe title with the function below, which will test any font size from 100pt\\nand downwards until the text fits within a certain limit. In the case of the\\ncard title it is set to 75 % of the canvas with.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003esetFontSizeForWidth\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003econtext\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e width\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003elet\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fontSize \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e100\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003edo\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    fontSize\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e--\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    context\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efont\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fontSize \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e+\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;pt serif\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ewhile\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003econtext\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003emeasureText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003ewidth\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e width\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fontSize\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe next thing needed is to call the \\u003ccode\\u003ecreateLinkCards\\u003c/code\\u003e in the same place\\nwhere \\u003ccode\\u003ecreatePage\\u003c/code\\u003e is called in \\u003ccode\\u003egatsby-node.js\\u003c/code\\u003e. In this example I have used\\n\\u003ca href=\\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\u003egatsby-transformer-remark\\u003c/a\\u003e the code snippet below is looping over the result\\nof the graphql query similar to the documentation for\\n\\u003ca href=\\\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark/\\\"\\u003egatsby-transformer-remark\\u003c/a\\u003e.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eposts\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e node \\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e slug\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e layout\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e tags\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e title \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e node\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003efrontmatter\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreatePage\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    component\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etemplatePath\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;blogpost.js\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateLinkCards\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    title\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    path\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e:\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e path\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ejoin\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026#x27;public\\u0026#x27;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e-link-card.png\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eAfter running \\u003ccode\\u003egatsby build\\u003c/code\\u003e the public folder will now have a link card file\\nfor each post. Open one and check how it looks. Next step will be to link this\\nin the blogpost template. These things needs to be linked in meta tags in the\\nhead tag. To change metadata with Gatsby it is recommended to use react-helmet.\\nThere is a \\u003c!-- --\\u003e[guide on how to change metadata][gatsby-docs-metadata]\\u003c!-- --\\u003e in the Gatsby\\ndocumentation. In the component in the \\u003ccode\\u003eblogpost.js\\u003c/code\\u003e template add the following\\nsnippet of code.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"js\\\"\\u003e\\u003cpre class=\\\"prism-code language-js\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eHelmet\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emeta name\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;twitter:title\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e content\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003etitle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emeta name\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;twitter:card\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e content\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;summary_large_image\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emeta name\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;twitter:author\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e content\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;@\\u0026lt;your twitter handle\\u0026gt;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003emeta name\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;twitter:image:src\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e content\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003ewindow\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003elocation\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eorigin\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eslug\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e-link-card.png\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026lt;\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token maybe-class-name\\\"\\u003eHelmet\\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis is all that is needed to get these nice cards in tweets with links to your blog.\\nIt might be worth looking into more meta tags for getting the same behavior on other\\nsites that have similar functionality. Remember that \\u003ca href=\\\"https://cards-dev.twitter.com/validator\\\"\\u003etwitter has a tool to test\\u003c/a\\u003e\\nyour new cards.\\u003c/p\\u003e\",\"scope\":{}},\"count\":1},{\"slug\":\"serving-plain-text-with-nextjs\",\"layout\":\"post\",\"title\":\"Serving text/plain for curl with Next\",\"date\":\"2020-05-26T00:00:00.000Z\",\"category\":\"nextjs\",\"tags\":[\"nextjs\",\"javascript\",\"curl\",\"nodejs\"],\"mdxSource\":{\"compiledSource\":\"\\\"use strict\\\";\\n\\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \\u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\\n\\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \\u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\\n\\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \\u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \\u003e= 0) continue; target[key] = source[key]; } return target; }\\n\\n/* @jsxRuntime classic */\\n\\n/* @jsx mdx */\\nvar layoutProps = {};\\nvar MDXLayout = \\\"wrapper\\\";\\n\\nfunction MDXContent(_ref) {\\n  var components = _ref.components,\\n      props = _objectWithoutProperties(_ref, [\\\"components\\\"]);\\n\\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\\n    components: components,\\n    mdxType: \\\"MDXLayout\\\"\\n  }), mdx(\\\"p\\\", null, \\\"I have recently been trying out the \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://nextjs.org/\\\"\\n  }, \\\"Next.js\\\"), \\\" for some projects again. I have\\\\nhad earlier projects where I have been really happy with Next, but for some time now\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.gatsbyjs.org/\\\"\\n  }, \\\"Gatsby\\\"), \\\" has been my go to. One of the big things separating these two are that Next\\\\nhas runtime server side rendering and thought it would be a neat to utilize this to\\\\nhave separate content-types based on the client. The idea is that if the client is a\\\\nCLI based client like \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://curl.haxx.se/\\\"\\n  }, \\\"curl\\\"), \\\" the server should respond with a plain text response.\\\\nThis should not be the case if the accept header is set to something specific. The\\\\ndefault accept header in curl is \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"*/*\\\"), \\\".\\\"), mdx(\\\"p\\\", null, \\\"Next has a feature where you can drop in your own http server and still let the\\\\nframework handle the rendering. This is helpful in many situations like protecting\\\\nthings with login or using Next as a part of an already existing application. Below is\\\\na minimal custom server. The highlighted line is where the rendering of the response\\\\nis handed of to Next.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-javascript\\\"\\n  }, \\\"const { createServer } = require(\\\\\\\"http\\\\\\\");\\\\nconst { parse } = require(\\\\\\\"url\\\\\\\");\\\\nconst next = require(\\\\\\\"next\\\\\\\");\\\\n\\\\nconst dev = process.env.NODE_ENV !== \\\\\\\"production\\\\\\\";\\\\nconst app = next({ dev });\\\\nconst handle = app.getRequestHandler();\\\\nconst port = parseInt(process.env.PORT || \\\\\\\"3000\\\\\\\");\\\\n\\\\napp.prepare().then(() =\\u003e {\\\\n  createServer((req, res) =\\u003e {\\\\n    const parsedUrl = parse(req.url, true);\\\\n    // highlight-next-line\\\\n    handle(req, res, parsedUrl);\\\\n  }).listen(port, err =\\u003e {\\\\n    if (err) throw err;\\\\n    console.log(`\\u003e Ready on http://localhost:${port}`);\\\\n  });\\\\n});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This custom server does nothing that the default Next server does not, so putting this\\\\na project does not make very much sense unless one adds something more. That said, if\\\\nthis is put in \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"server.js\\\"), \\\" in a Next project running \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"node server.js\\\"), \\\" in dev and\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"NODE_ENV=production node server.js\\\"), \\\" in production should work nicely.\\\"), mdx(\\\"p\\\", null, \\\"To achieve the custom content type responses without duplicating the content we can\\\\nuse Next to render the content. Then we will pass it through a npm module that returns\\\\ntext from HTML. It could also be interesting to do the same with something that returns\\\\nmarkdown if you want to keep more of semantic elements. In order to get the html from\\\\nNext we need to give it a fake response that we can read from afterwords. I will admit,\\\\nthis is a hack, but hey it works. \\\\uD83E\\\\uDD37\\\\u200D\\\\u2642\\\\uFE0F\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-javascript\\\"\\n  }, \\\"class FakeResponse extends EventEmitter {\\\\n  constructor() {\\\\n    super();\\\\n    this.headers = {};\\\\n    this.data = \\\\\\\"\\\\\\\";\\\\n  }\\\\n\\\\n  getHeader(key) {\\\\n    return this.headers[key];\\\\n  }\\\\n\\\\n  setHeader(key, value) {\\\\n    return (this.headers[key] = value);\\\\n  }\\\\n\\\\n  write(data) {\\\\n    this.data += data;\\\\n  }\\\\n\\\\n  end(data) {\\\\n    this.data += data;\\\\n    this.emit(\\\\\\\"end\\\\\\\", data);\\\\n  }\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"The class above emulates the part of Node's \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"http.ServerResponse\\\"), \\\" that is needed and emits\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"end\\\"), \\\" when the response is done. This makes it possible to get the HTML generated by Next\\\\nand the headers set by Next. Below is a function that takes the same arguments as Next's\\\\nhandle function, but it uses the fake response to get the generated HTML and pass that to\\\\n\\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://www.npmjs.com/package/html-to-text\\\"\\n  }, \\\"html-to-text\\\"), \\\". It also copies all the headers from the fake response to the real response.\\\\n\\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Content-Length\\\"), \\\" and \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"Content-Type\\\"), \\\" is excluded from this copying since those will be\\\\ndifferent from what Next has set.\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-javascript\\\"\\n  }, \\\"function handleWithText(req, res, parsedUrl) {\\\\n  const fakeRes = new FakeResponse();\\\\n  fakeRes.on(\\\\\\\"end\\\\\\\", data =\\u003e {\\\\n    Object.keys(fakeRes.headers).forEach(key =\\u003e {\\\\n      if (key !== \\\\\\\"Content-Length\\\\\\\" \\u0026\\u0026 key !== \\\\\\\"Content-Type\\\\\\\") {\\\\n        res.setHeader(key, fakeRes.getHeader(key));\\\\n      }\\\\n    });\\\\n    res.setHeader(\\\\\\\"Content-Type\\\\\\\", \\\\\\\"text/plain\\\\\\\");\\\\n    res.statusCode = fakeRes.statusCode || 200\\\\n    res.end(htmlToText.fromString(data));\\\\n  });\\\\n  handle(req, fakeRes, parsedUrl);\\\\n}\\\\n\\\")), mdx(\\\"p\\\", null, \\\"With that set up, the custom server code can be changed to the following. The code\\\\nbelow checks the accept header and uses the new \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"handleWithText\\\"), \\\" function if the\\\\naccept header is set to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"text/plain\\\"), \\\" or the user agent is \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://curl.haxx.se/\\\"\\n  }, \\\"curl\\\"), \\\" or \\\", mdx(\\\"a\\\", {\\n    parentName: \\\"p\\\",\\n    \\\"href\\\": \\\"https://httpie.org/\\\"\\n  }, \\\"httpie\\\"), \\\",\\\\nthe two CLI based http clients I know of, with an accept header set to \\\", mdx(\\\"inlineCode\\\", {\\n    parentName: \\\"p\\\"\\n  }, \\\"*/*\\\"), \\\".\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\",\\n    \\\"className\\\": \\\"language-javascript\\\"\\n  }, \\\"app.prepare().then(() =\\u003e {\\\\n  createServer((req, res) =\\u003e {\\\\n    const parsedUrl = parse(req.url, true);\\\\n    const [accept] = (req.headers[\\\\\\\"accept\\\\\\\"] || \\\\\\\"\\\\\\\").split(\\\\\\\";\\\\\\\");\\\\n\\\\n    if (\\\\n      accept === \\\\\\\"text/plain\\\\\\\" ||\\\\n      (accept === \\\\\\\"*/*\\\\\\\" \\u0026\\u0026 /curl|HTTPie/.test(req.headers[\\\\\\\"user-agent\\\\\\\"] || \\\\\\\"\\\\\\\"))\\\\n    ) {\\\\n      handleWithText(req, res, parsedUrl);\\\\n    } else {\\\\n      handle(req, res, parsedUrl);\\\\n    }\\\\n  }).listen(port, err =\\u003e {\\\\n    if (err) throw err;\\\\n    console.log(`\\u003e Ready on http://localhost:${port}`);\\\\n  });\\\\n});\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This would result in this output if it would be used on the front page of this website\\\\n(which would require me to rewrite it from Gatsby first, but that is another thing).\\\"), mdx(\\\"pre\\\", null, mdx(\\\"code\\\", {\\n    parentName: \\\"pre\\\"\\n  }, \\\"$ curl -L rolflekang.com\\\\nRL [/]\\\\n\\\\nHi, I am Rolf\\\\n\\\\nI am an independent software developer who enjoys working\\\\nwith the whole stack. I occationally write posts [/writing], take photographs\\\\n[/photography], ride mountain bikes and snowboards. I do consulting work, if\\\\nthat is something you are looking I might be able to help out [/hire].\\\\n\\\")), mdx(\\\"p\\\", null, \\\"This might not be the most useful feature, but it might be neat if your website\\\\ncontains information that people often would want to get from the terminal. Anyhow,\\\\nit is a fun little easter egg. \\\\uD83D\\\\uDC23\\\"));\\n}\\n\\n;\\nMDXContent.isMDXComponent = true;\",\"renderedOutput\":\"\\u003cp\\u003eI have recently been trying out the \\u003ca href=\\\"https://nextjs.org/\\\"\\u003eNext.js\\u003c/a\\u003e for some projects again. I have\\nhad earlier projects where I have been really happy with Next, but for some time now\\n\\u003ca href=\\\"https://www.gatsbyjs.org/\\\"\\u003eGatsby\\u003c/a\\u003e has been my go to. One of the big things separating these two are that Next\\nhas runtime server side rendering and thought it would be a neat to utilize this to\\nhave separate content-types based on the client. The idea is that if the client is a\\nCLI based client like \\u003ca href=\\\"https://curl.haxx.se/\\\"\\u003ecurl\\u003c/a\\u003e the server should respond with a plain text response.\\nThis should not be the case if the accept header is set to something specific. The\\ndefault accept header in curl is \\u003ccode\\u003e*/*\\u003c/code\\u003e.\\u003c/p\\u003e\\u003cp\\u003eNext has a feature where you can drop in your own http server and still let the\\nframework handle the rendering. This is helpful in many situations like protecting\\nthings with login or using Next as a part of an already existing application. Below is\\na minimal custom server. The highlighted line is where the rendering of the response\\nis handed of to Next.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"javascript\\\"\\u003e\\u003cpre class=\\\"prism-code language-javascript\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e createServer \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;http\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parse \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;url\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e next \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003erequire\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;next\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e dev \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e process\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eenv\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token constant\\\"\\u003eNODE_ENV\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;production\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e app \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003enext\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e dev \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e handle \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e app\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003egetRequestHandler\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e port \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eparseInt\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eprocess\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eenv\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token constant\\\"\\u003ePORT\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;3000\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eapp\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eprepare\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ethen\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateServer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eparse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eurl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token boolean\\\"\\u003etrue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line CodeBlock_HighlightLine__1SWaL\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elisten\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eerr\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eerr\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ethrow\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e err\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token console class-name\\\"\\u003econsole\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elog\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e\\u0026gt; Ready on http://localhost:\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis custom server does nothing that the default Next server does not, so putting this\\na project does not make very much sense unless one adds something more. That said, if\\nthis is put in \\u003ccode\\u003eserver.js\\u003c/code\\u003e in a Next project running \\u003ccode\\u003enode server.js\\u003c/code\\u003e in dev and\\n\\u003ccode\\u003eNODE_ENV=production node server.js\\u003c/code\\u003e in production should work nicely.\\u003c/p\\u003e\\u003cp\\u003eTo achieve the custom content type responses without duplicating the content we can\\nuse Next to render the content. Then we will pass it through a npm module that returns\\ntext from HTML. It could also be interesting to do the same with something that returns\\nmarkdown if you want to keep more of semantic elements. In order to get the html from\\nNext we need to give it a fake response that we can read from afterwords. I will admit,\\nthis is a hack, but hey it works. 🤷‍♂️\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"javascript\\\"\\u003e\\u003cpre class=\\\"prism-code language-javascript\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eclass\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token class-name\\\"\\u003eFakeResponse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003eextends\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token class-name\\\"\\u003eEventEmitter\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003econstructor\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003esuper\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003egetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003esetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e value\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ereturn\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e value\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ewrite\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e+=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eend\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e+=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003ethis\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eemit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;end\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e data\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThe class above emulates the part of Node\\u0026#x27;s \\u003ccode\\u003ehttp.ServerResponse\\u003c/code\\u003e that is needed and emits\\n\\u003ccode\\u003eend\\u003c/code\\u003e when the response is done. This makes it possible to get the HTML generated by Next\\nand the headers set by Next. Below is a function that takes the same arguments as Next\\u0026#x27;s\\nhandle function, but it uses the fake response to get the generated HTML and pass that to\\n\\u003ca href=\\\"https://www.npmjs.com/package/html-to-text\\\"\\u003ehtml-to-text\\u003c/a\\u003e. It also copies all the headers from the fake response to the real response.\\n\\u003ccode\\u003eContent-Length\\u003c/code\\u003e and \\u003ccode\\u003eContent-Type\\u003c/code\\u003e is excluded from this copying since those will be\\ndifferent from what Next has set.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"javascript\\\"\\u003e\\u003cpre class=\\\"prism-code language-javascript\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003efunction\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandleWithText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fakeRes \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003enew\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token class-name\\\"\\u003eFakeResponse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  fakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eon\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;end\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token known-class-name class-name\\\"\\u003eObject\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ekeys\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003efakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eforEach\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;Content-Length\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026amp;\\u0026amp;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e key \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e!==\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;Content-Type\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e        res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003egetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ekey\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esetHeader\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;Content-Type\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;text/plain\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003estatusCode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003estatusCode\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token number\\\"\\u003e200\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eend\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ehtmlToText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003efromString\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003edata\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e fakeRes\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eWith that set up, the custom server code can be changed to the following. The code\\nbelow checks the accept header and uses the new \\u003ccode\\u003ehandleWithText\\u003c/code\\u003e function if the\\naccept header is set to \\u003ccode\\u003etext/plain\\u003c/code\\u003e or the user agent is \\u003ca href=\\\"https://curl.haxx.se/\\\"\\u003ecurl\\u003c/a\\u003e or \\u003ca href=\\\"https://httpie.org/\\\"\\u003ehttpie\\u003c/a\\u003e,\\nthe two CLI based http clients I know of, with an accept header set to \\u003ccode\\u003e*/*\\u003c/code\\u003e.\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\" data-language=\\\"javascript\\\"\\u003e\\u003cpre class=\\\"prism-code language-javascript\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eapp\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003eprepare\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003ethen\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ecreateServer\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token parameter punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003eparse\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eurl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token boolean\\\"\\u003etrue\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword\\\"\\u003econst\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eaccept\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;accept\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003esplit\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      accept \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e===\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;text/plain\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eaccept \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e===\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;*/*\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e\\u0026amp;\\u0026amp;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-source language-regex\\\"\\u003ecurl|HTTPie\\u003c/span\\u003e\\u003cspan class=\\\"token regex regex-delimiter\\\"\\u003e/\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003etest\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token property-access\\\"\\u003eheaders\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e[\\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;user-agent\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e]\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token operator\\\"\\u003e||\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token string\\\"\\u003e\\u0026quot;\\u0026quot;\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandleWithText\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eelse\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e      \\u003c/span\\u003e\\u003cspan class=\\\"token function\\\"\\u003ehandle\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ereq\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e res\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e parsedUrl\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elisten\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e,\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token parameter\\\"\\u003eerr\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token arrow operator\\\"\\u003e=\\u0026gt;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003eif\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eerr\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e \\u003c/span\\u003e\\u003cspan class=\\\"token keyword control-flow\\\"\\u003ethrow\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e err\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e    \\u003c/span\\u003e\\u003cspan class=\\\"token console class-name\\\"\\u003econsole\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e.\\u003c/span\\u003e\\u003cspan class=\\\"token method function property-access\\\"\\u003elog\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e(\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token template-string string\\\"\\u003e\\u0026gt; Ready on http://localhost:\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e${\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation\\\"\\u003eport\\u003c/span\\u003e\\u003cspan class=\\\"token template-string interpolation interpolation-punctuation punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token template-string template-punctuation string\\\"\\u003e`\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e  \\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e}\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e)\\u003c/span\\u003e\\u003cspan class=\\\"token punctuation\\\"\\u003e;\\u003c/span\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis would result in this output if it would be used on the front page of this website\\n(which would require me to rewrite it from Gatsby first, but that is another thing).\\u003c/p\\u003e\\u003cpre\\u003e\\u003ccode class=\\\"CodeBlock_Highlight__2EDB2\\\"\\u003e\\u003cpre class=\\\"prism-code language-undefined\\\"\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e$ curl -L rolflekang.com\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eRL [/]\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eHi, I am Rolf\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003eI am an independent software developer who enjoys working\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ewith the whole stack. I occationally write posts [/writing], take photographs\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e[/photography], ride mountain bikes and snowboards. I do consulting work, if\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003ethat is something you are looking I might be able to help out [/hire].\\u003c/span\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"token-line\\\"\\u003e\\u003cspan class=\\\"token plain\\\"\\u003e\\n\\u003c/span\\u003e\\u003c/div\\u003e\\u003c/pre\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\u003cp\\u003eThis might not be the most useful feature, but it might be neat if your website\\ncontains information that people often would want to get from the terminal. Anyhow,\\nit is a fun little easter egg. 🐣\\u003c/p\\u003e\",\"scope\":{}},\"count\":1}]}},\"__N_SSG\":true},\"page\":\"/[slug]\",\"query\":{\"slug\":\"testing-simple-graphql-services\"},\"buildId\":\"WZN9R8QSYuWTzKGPS3QLt\",\"nextExport\":false,\"isFallback\":false,\"gsp\":true}</script><script nomodule=\"\" src=\"/_next/static/chunks/polyfills-5ba9c403cc30e4733b64.js\"></script><script src=\"/_next/static/chunks/main-7d802164a7b8639038cc.js\" async=\"\"></script><script src=\"/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js\" async=\"\"></script><script src=\"/_next/static/chunks/framework.abffcf18e526b7c0dbcd.js\" async=\"\"></script><script src=\"/_next/static/chunks/8415929568fe72b6a34b53df40b441bf1d16c618.f4a246c9c1efb0a580ac.js\" async=\"\"></script><script src=\"/_next/static/chunks/98a995b697fdf6ac7718c65f99d5111879ab1e63.083a266542cc50e12bc5.js\" async=\"\"></script><script src=\"/_next/static/chunks/059db41020c5a0b2f8e44e07e9a188d04fefe6bb.2f9308fbeaf5eadb94bb.js\" async=\"\"></script><script src=\"/_next/static/chunks/pages/_app-d9022d161dcdc53f7fc0.js\" async=\"\"></script><script src=\"/_next/static/chunks/d2fd18a0c135e6d07091be301f7526a200065b3b.c6cb363515a690cb8a1f.js\" async=\"\"></script><script src=\"/_next/static/chunks/pages/%5Bslug%5D-bcdc524279b1554569fa.js\" async=\"\"></script><script src=\"/_next/static/WZN9R8QSYuWTzKGPS3QLt/_buildManifest.js\" async=\"\"></script><script src=\"/_next/static/WZN9R8QSYuWTzKGPS3QLt/_ssgManifest.js\" async=\"\"></script><script async=\"\" data-api=\"/_hive\" src=\"/sb.js\"></script><script async=\"\" defer=\"\" src=\"https://a.rolflekang.com/latest.js\"></script><noscript><img src=\"https://a.rolflekang.com/noscript.gif\" alt=\"\" referrerPolicy=\"no-referrer-when-downgrade\"/></noscript></body></html>",
  "status": 200,
  "headers": {
    "date": "Sun, 13 Jun 2021 17:52:27 GMT",
    "content-type": "text/html; charset=utf-8",
    "transfer-encoding": "chunked",
    "connection": "close",
    "x-powered-by": "Next.js",
    "cache-control": "s-maxage=31536000, stale-while-revalidate",
    "vary": "Accept-Encoding",
    "x-frame-options": "SAMEORIGIN",
    "strict-transport-security": "max-age=2592000; includeSubdomains; preload",
    "x-content-type-options": "nosniff",
    "referrer-policy": "strict-origin",
    "feature-policy": "microphone 'none'; geolocation 'none'",
    "cf-cache-status": "DYNAMIC",
    "cf-request-id": "0aa819f74300001c16c7853000000001",
    "expect-ct": "max-age=604800, report-uri=\"https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct\"",
    "report-to": "{\"endpoints\":[{\"url\":\"https:\\/\\/a.nel.cloudflare.com\\/report\\/v2?s=xcpeEPtWJFS1Oj8Ts6dL%2FtGvq6PF8003nV48KxX8hTXRh1zTrn3oBGG4SGfCgNsvUN9uJuUPwtytQo0yAbpRmUV0%2BXSkKeZoDNmZcyfeOm%2BCXynkE2YZqG828KU%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}",
    "nel": "{\"report_to\":\"cf-nel\",\"max_age\":604800}",
    "server": "cloudflare",
    "cf-ray": "65ed2c386d191c16-OSL",
    "alt-svc": "h3-27=\":443\"; ma=86400, h3-28=\":443\"; ma=86400, h3-29=\":443\"; ma=86400, h3=\":443\"; ma=86400"
  }
}